<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="client__ros__base_8cpp" kind="file" language="C++">
    <compoundname>client_ros_base.cpp</compoundname>
    <includes refid="client__ros_8h" local="yes">rgbd/client_ros.h</includes>
    <includes refid="image_8h" local="yes">rgbd/image.h</includes>
    <includes local="no">cv_bridge/cv_bridge.h</includes>
    <includes local="no">message_filters/synchronizer.h</includes>
    <includes local="no">message_filters/subscriber.h</includes>
    <includes local="no">message_filters/sync_policies/approximate_time.h</includes>
    <includes local="no">sensor_msgs/Image.h</includes>
    <includes local="no">sensor_msgs/image_encodings.h</includes>
    <includes local="no">image_geometry/pinhole_camera_model.h</includes>
    <incdepgraph>
      <node id="7">
        <label>message_filters/subscriber.h</label>
      </node>
      <node id="11">
        <label>sensor_msgs/CameraInfo.h</label>
      </node>
      <node id="1">
        <label>client_ros_base.cpp</label>
        <link refid="client__ros__base_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="14">
        <label>memory</label>
        <link refid="cpp/header/memory" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml"/>
      </node>
      <node id="10">
        <label>sensor_msgs/Image.h</label>
      </node>
      <node id="9">
        <label>image_geometry/pinhole_camera_model.h</label>
      </node>
      <node id="18">
        <label>cv_bridge/cv_bridge.h</label>
      </node>
      <node id="2">
        <label>rgbd/client_ros.h</label>
        <link refid="client__ros_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
      <node id="13">
        <label>rgbd/types.h</label>
        <link refid="types_8h"/>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>message_filters/sync_policies/approximate_time.h</label>
      </node>
      <node id="19">
        <label>sensor_msgs/image_encodings.h</label>
      </node>
      <node id="6">
        <label>message_filters/synchronizer.h</label>
      </node>
      <node id="16">
        <label>opencv2/core.hpp</label>
      </node>
      <node id="15">
        <label>rgbd/image.h</label>
        <link refid="image_8h"/>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>ros/callback_queue.h</label>
      </node>
      <node id="17">
        <label>rgbd_msgs/RGBD.h</label>
      </node>
      <node id="5">
        <label>ros/callback_queue_interface.h</label>
      </node>
      <node id="3">
        <label>ros/node_handle.h</label>
      </node>
      <node id="12">
        <label>rgbd/client_ros_base.h</label>
        <link refid="client__ros__base_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innernamespace refid="namespacergbd">rgbd</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="client__ros_8h" kindref="compound">rgbd/client_ros.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="image_8h" kindref="compound">rgbd/image.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//<sp/>ROS<sp/>message<sp/>serialization</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;cv_bridge/cv_bridge.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;message_filters/synchronizer.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;message_filters/subscriber.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;message_filters/sync_policies/approximate_time.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sensor_msgs/Image.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sensor_msgs/image_encodings.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;image_geometry/pinhole_camera_model.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespacergbd" kindref="compound">rgbd</ref><sp/>{</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">//<sp/>----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="classrgbd_1_1ClientROSBase_1a5ec2e26b573bd0576f258c1775efda55" refkind="member"><highlight class="normal"><ref refid="classrgbd_1_1ClientROSBase_1a5ec2e26b573bd0576f258c1775efda55" kindref="member">ClientROSBase::ClientROSBase</ref>(ros::NodeHandle<sp/>nh)<sp/>:<sp/>nh_(nh),<sp/>sync_(nullptr),<sp/>sub_rgb_sync_(nullptr),<sp/>sub_depth_sync_(nullptr),<sp/>image_ptr_(nullptr)</highlight></codeline>
<codeline lineno="18"><highlight class="normal">{</highlight></codeline>
<codeline lineno="19"><highlight class="normal">}</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="comment">//<sp/>----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="classrgbd_1_1ClientROSBase_1a3525ad7bb5f1b61cc171454981d8fc05" refkind="member"><highlight class="normal"><ref refid="classrgbd_1_1ClientROSBase_1a3525ad7bb5f1b61cc171454981d8fc05" kindref="member">ClientROSBase::~ClientROSBase</ref>()</highlight></codeline>
<codeline lineno="24"><highlight class="normal">{</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1af8a0e1be518ee1d7834c8c5695a381ac" kindref="member">deinitialize</ref>();</highlight></codeline>
<codeline lineno="26"><highlight class="normal">}</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="comment">//<sp/>----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="classrgbd_1_1ClientROSBase_1a24531128e7eb36c96592afb0f20be89b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classrgbd_1_1ClientROSBase_1a24531128e7eb36c96592afb0f20be89b" kindref="member">ClientROSBase::initialize</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="cpp/string/basic_string" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::string</ref>&amp;<sp/>rgb_image_topic,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="cpp/string/basic_string" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::string</ref>&amp;<sp/>depth_image_topic,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="cpp/string/basic_string" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::string</ref>&amp;<sp/>cam_info_topic)</highlight></codeline>
<codeline lineno="31"><highlight class="normal">{</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1ae32b02ea20f92f4b95bc9629ba24a2f5" kindref="member">sub_cam_info_</ref><sp/>=<sp/><ref refid="classrgbd_1_1ClientROSBase_1ada91d299f44f6ef923b061c5bb03abbf" kindref="member">nh_</ref>.subscribe(cam_info_topic,<sp/>1,<sp/>&amp;<ref refid="classrgbd_1_1ClientROSBase_1ae73000fe6bf70e483a9cb76226f99fd8" kindref="member">ClientROSBase::camInfoCallback</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1af2776c7803c0cd0f22f215d8636b8374" kindref="member">sub_rgb_sync_</ref><sp/>=<sp/><ref refid="cpp/memory/unique_ptr" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::unique_ptr&lt;message_filters::Subscriber&lt;sensor_msgs::Image&gt;</ref><sp/>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>message_filters::Subscriber&lt;sensor_msgs::Image&gt;(<ref refid="classrgbd_1_1ClientROSBase_1ada91d299f44f6ef923b061c5bb03abbf" kindref="member">nh_</ref>,<sp/>rgb_image_topic,<sp/>1));</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1a98a636fe29875e8751717af6d3abe843" kindref="member">sub_depth_sync_</ref><sp/>=<sp/><ref refid="cpp/memory/unique_ptr" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::unique_ptr&lt;message_filters::Subscriber&lt;sensor_msgs::Image&gt;</ref><sp/>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>message_filters::Subscriber&lt;sensor_msgs::Image&gt;(<ref refid="classrgbd_1_1ClientROSBase_1ada91d299f44f6ef923b061c5bb03abbf" kindref="member">nh_</ref>,<sp/>depth_image_topic,<sp/>1));</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1a38e27c8702891218d3c8aa197f18ab28" kindref="member">sync_</ref><sp/>=<sp/><ref refid="cpp/memory/unique_ptr" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::unique_ptr&lt;message_filters::Synchronizer&lt;RGBDApproxPolicy&gt;</ref><sp/>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>message_filters::Synchronizer&lt;RGBDApproxPolicy&gt;(<ref refid="namespacergbd_1ae4d370fb1810905487f4c2ba2aca446d" kindref="member">RGBDApproxPolicy</ref>(10),<sp/>*<ref refid="classrgbd_1_1ClientROSBase_1af2776c7803c0cd0f22f215d8636b8374" kindref="member">sub_rgb_sync_</ref>,<sp/>*<ref refid="classrgbd_1_1ClientROSBase_1a98a636fe29875e8751717af6d3abe843" kindref="member">sub_depth_sync_</ref>));</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="40"><highlight class="normal">}</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="comment">//<sp/>----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="classrgbd_1_1ClientROSBase_1af8a0e1be518ee1d7834c8c5695a381ac" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classrgbd_1_1ClientROSBase_1af8a0e1be518ee1d7834c8c5695a381ac" kindref="member">ClientROSBase::deinitialize</ref>()</highlight></codeline>
<codeline lineno="45"><highlight class="normal">{</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1ada91d299f44f6ef923b061c5bb03abbf" kindref="member">nh_</ref>.shutdown();</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1a38e27c8702891218d3c8aa197f18ab28" kindref="member">sync_</ref>.<ref refid="cpp/memory/unique_ptr/reset" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">reset</ref>();</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1af2776c7803c0cd0f22f215d8636b8374" kindref="member">sub_rgb_sync_</ref>.<ref refid="cpp/memory/unique_ptr/reset" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">reset</ref>();</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1a98a636fe29875e8751717af6d3abe843" kindref="member">sub_depth_sync_</ref>.<ref refid="cpp/memory/unique_ptr/reset" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">reset</ref>();</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1a099221f16716e50465e47928908f2a49" kindref="member">cam_model_</ref><sp/>=<sp/>image_geometry::PinholeCameraModel();</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="52"><highlight class="normal">}</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="comment">//<sp/>----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="classrgbd_1_1ClientROSBase_1ae73000fe6bf70e483a9cb76226f99fd8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classrgbd_1_1ClientROSBase_1ae73000fe6bf70e483a9cb76226f99fd8" kindref="member">ClientROSBase::camInfoCallback</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>sensor_msgs::CameraInfoConstPtr&amp;<sp/>cam_info_msg)</highlight></codeline>
<codeline lineno="57"><highlight class="normal">{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classrgbd_1_1ClientROSBase_1a099221f16716e50465e47928908f2a49" kindref="member">cam_model_</ref>.initialized())</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1a099221f16716e50465e47928908f2a49" kindref="member">cam_model_</ref>.fromCameraInfo(cam_info_msg);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1ae32b02ea20f92f4b95bc9629ba24a2f5" kindref="member">sub_cam_info_</ref>.shutdown();</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR_NAMED(</highlight><highlight class="stringliteral">&quot;ClientROS&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;CameraInfo<sp/>should<sp/>unsubsribe<sp/>after<sp/>inititializing<sp/>the<sp/>camera<sp/>model&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="67"><highlight class="normal">}</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="comment">//<sp/>----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71" refid="classrgbd_1_1ClientROSBase_1ae95b316b81976714f21c50a489dd6394" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classrgbd_1_1ClientROSBase_1ae95b316b81976714f21c50a489dd6394" kindref="member">ClientROSBase::imageCallback</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="namespacergbd_1a11f6d8b65b491dba632371e8355a99df" kindref="member">sensor_msgs::ImageConstPtr</ref>&amp;<sp/>rgb_image_msg,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="namespacergbd_1a11f6d8b65b491dba632371e8355a99df" kindref="member">sensor_msgs::ImageConstPtr</ref>&amp;<sp/>depth_image_msg)</highlight></codeline>
<codeline lineno="72"><highlight class="normal">{</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classrgbd_1_1ClientROSBase_1a099221f16716e50465e47928908f2a49" kindref="member">cam_model_</ref>.initialized())</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR_DELAYED_THROTTLE_NAMED(1,<sp/></highlight><highlight class="stringliteral">&quot;ClientROS&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ClientROSBase:<sp/>cam_model<sp/>not<sp/>yet<sp/>initialized&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>cv_bridge::CvImagePtr<sp/>rgb_img_ptr,<sp/>depth_img_ptr;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>RGB<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb_img_ptr<sp/>=<sp/>cv_bridge::toCvCopy(rgb_image_msg,<sp/>sensor_msgs::image_encodings::BGR8);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(cv_bridge::Exception&amp;<sp/>e)</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR_NAMED(</highlight><highlight class="stringliteral">&quot;ClientROS&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ClientROSBase:<sp/>Could<sp/>not<sp/>deserialize<sp/>rgb<sp/>image:<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>e.what());</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>depth<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>cv_bridge<sp/>doesn&apos;t<sp/>support<sp/>changing<sp/>the<sp/>encoding<sp/>of<sp/>depth<sp/>images,<sp/>so<sp/>just<sp/>creating<sp/>ImagePtr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>depth_img_ptr<sp/>=<sp/>cv_bridge::toCvCopy(depth_image_msg,<sp/>depth_image_msg-&gt;encoding);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(depth_image_msg-&gt;encoding<sp/>==<sp/>sensor_msgs::image_encodings::TYPE_16UC1)</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>depths<sp/>are<sp/>16-bit<sp/>unsigned<sp/>ints,<sp/>in<sp/>mm.<sp/>Convert<sp/>to<sp/>32-bit<sp/>float<sp/>(meters)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cv::Mat<sp/>depth_image(depth_img_ptr-&gt;image.rows,<sp/>depth_img_ptr-&gt;image.cols,<sp/>CV_32FC1);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x<sp/>=<sp/>0;<sp/>x<sp/>&lt;<sp/>depth_image.cols;<sp/>++x)</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/>0;<sp/>y<sp/>&lt;<sp/>depth_image.rows;<sp/>++y)</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>depth_image.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(y,<sp/>x)<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(depth_img_ptr-&gt;image.at&lt;</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal">&gt;(y,<sp/>x))<sp/>/<sp/>1000;<sp/></highlight><highlight class="comment">//<sp/>(mm<sp/>to<sp/>m)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>depth_img_ptr-&gt;image<sp/>=<sp/>depth_image;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(cv_bridge::Exception&amp;<sp/>e)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR_NAMED(</highlight><highlight class="stringliteral">&quot;ClientROS&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ClientROSBase:<sp/>Could<sp/>not<sp/>deserialize<sp/>depth<sp/>image:<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>e.what());</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classrgbd_1_1ClientROSBase_1abecaca90a9f6d5c61ac5226367645943" kindref="member">image_ptr_</ref>)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>this<sp/>case,<sp/>the<sp/>pointer<sp/>will<sp/>always<sp/>be<sp/>wrapped<sp/>in<sp/>a<sp/>shared<sp/>ptr,<sp/>so<sp/>no<sp/>mem<sp/>leaks<sp/>(see<sp/>nextImage()<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1abecaca90a9f6d5c61ac5226367645943" kindref="member">image_ptr_</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classrgbd_1_1Image" kindref="compound">Image</ref>();</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1abecaca90a9f6d5c61ac5226367645943" kindref="member">image_ptr_</ref>-&gt;<ref refid="classrgbd_1_1Image_1add0a90ba9aca9403d5a9f311db9025af" kindref="member">setRGBImage</ref>(rgb_img_ptr-&gt;image);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1abecaca90a9f6d5c61ac5226367645943" kindref="member">image_ptr_</ref>-&gt;<ref refid="classrgbd_1_1Image_1a076df0655b8634b09693faecb5e87934" kindref="member">setDepthImage</ref>(depth_img_ptr-&gt;image);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1abecaca90a9f6d5c61ac5226367645943" kindref="member">image_ptr_</ref>-&gt;<ref refid="classrgbd_1_1Image_1a836e03f6c1d22be10cecb1490ca23c36" kindref="member">setCameraModel</ref>(<ref refid="classrgbd_1_1ClientROSBase_1a099221f16716e50465e47928908f2a49" kindref="member">cam_model_</ref>);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1abecaca90a9f6d5c61ac5226367645943" kindref="member">image_ptr_</ref>-&gt;<ref refid="classrgbd_1_1Image_1a2a533e05c3eb97fa796d3bec28b73740" kindref="member">setFrameId</ref>(rgb_image_msg-&gt;header.frame_id);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1abecaca90a9f6d5c61ac5226367645943" kindref="member">image_ptr_</ref>-&gt;<ref refid="classrgbd_1_1Image_1a22877f3a4f1bffa15f99ed5f82eb77d2" kindref="member">setTimestamp</ref>(rgb_image_msg-&gt;header.stamp.toSec());</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classrgbd_1_1ClientROSBase_1afe9a8147e966592db8cddc722981d23d" kindref="member">new_image_</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="131"><highlight class="normal">}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="src/client_ros_base.cpp"/>
  </compounddef>
</doxygen>
