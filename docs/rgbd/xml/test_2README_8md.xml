<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="test_2README_8md" kind="file" language="Markdown">
    <compoundname>test/README.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">#<sp/>Test</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>file<sp/>contains<sp/>information<sp/>about<sp/>the<sp/>test<sp/>nodes<sp/>and<sp/>a<sp/>correct<sp/>procedure<sp/>to<sp/>test<sp/>the</highlight></codeline>
<codeline><highlight class="normal">communication.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Test<sp/>Nodes</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>nodes<sp/>are<sp/>split<sp/>into<sp/>two<sp/>types,<sp/>server<sp/>and<sp/>client<sp/>nodes.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>server<sp/>nodes<sp/>generate<sp/>an<sp/>artificial<sp/>image<sp/>and<sp/>distribute<sp/>it<sp/>via<sp/>their<sp/>specific<sp/>way<sp/>of</highlight></codeline>
<codeline><highlight class="normal">communication.<sp/>The<sp/>client<sp/>nodes<sp/>use<sp/>their<sp/>specific<sp/>way<sp/>of<sp/>communication<sp/>to<sp/>receive<sp/>an<sp/>image</highlight></codeline>
<codeline><highlight class="normal">and<sp/>show<sp/>it<sp/>on<sp/>a<sp/>gui.<sp/>The<sp/>server<sp/>and<sp/>client<sp/>nodes<sp/>with<sp/>matching<sp/>names<sp/>should<sp/>always<sp/>communicate<sp/>with</highlight></codeline>
<codeline><highlight class="normal">each<sp/>other.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Server<sp/>nodes:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_server_ros`:<sp/>Publishes<sp/>an<sp/>image<sp/>via<sp/>default<sp/>ROS<sp/>image<sp/>message<sp/>with<sp/>the<sp/>use<sp/>of<sp/>the</highlight></codeline>
<codeline><highlight class="normal">`ServerROS`<sp/>class.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_server_rgbd`:<sp/>Publishes<sp/>an<sp/>image<sp/>via<sp/>the<sp/>custom<sp/>RGBD<sp/>message<sp/>on<sp/>a<sp/>ROS<sp/>topic<sp/>with<sp/>the</highlight></codeline>
<codeline><highlight class="normal">use<sp/>of<sp/>the<sp/>`ServerRGBD`<sp/>class.<sp/>This<sp/>also<sp/>provides<sp/>the<sp/>RGBD<sp/>service.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_server_shm`:<sp/>Publishes<sp/>an<sp/>image<sp/>via<sp/>shared<sp/>memory<sp/>communication<sp/>with<sp/>the<sp/>use<sp/>of</highlight></codeline>
<codeline><highlight class="normal">the<sp/>`ServerSHM`<sp/>class.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_server`:<sp/>Provides<sp/>the<sp/>interfaces<sp/>of<sp/>the<sp/>`Server`<sp/>class.<sp/>This<sp/>includes<sp/>the<sp/>interface<sp/>of</highlight></codeline>
<codeline><highlight class="normal">`ServerRGBD`<sp/>and<sp/>`ServrSHM`<sp/>combined<sp/>with<sp/>a<sp/>hostname<sp/>topic.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Client<sp/>nodes:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_client_ros`:<sp/>Subsribes<sp/>to<sp/>the<sp/>default<sp/>ROS<sp/>image<sp/>topics<sp/>to<sp/>receive<sp/>an<sp/>image<sp/>with<sp/>the</highlight></codeline>
<codeline><highlight class="normal">use<sp/>of<sp/>the<sp/>`ClientROS`<sp/>class.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_client_rgbd`:<sp/>Subsribes<sp/>to<sp/>the<sp/>custom<sp/>RGBD<sp/>topic<sp/>with<sp/>the</highlight></codeline>
<codeline><highlight class="normal">use<sp/>of<sp/>the<sp/>`ClientRGBD`<sp/>class.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_client_shm`:<sp/>Receives<sp/>an<sp/>image<sp/>via<sp/>shared<sp/>memory<sp/>communication<sp/>with<sp/>the<sp/>use<sp/>of</highlight></codeline>
<codeline><highlight class="normal">the<sp/>`ClientSHM`<sp/>class.<sp/>__Note__:<sp/>This<sp/>node<sp/>has<sp/>an<sp/>initialization<sp/>timeout.<sp/>The<sp/>shared<sp/>memory<sp/>needs</highlight></codeline>
<codeline><highlight class="normal">needs<sp/>to<sp/>be<sp/>created<sp/>before<sp/>this<sp/>timeout<sp/>ends.<sp/>So<sp/>start<sp/>the<sp/>server<sp/>node<sp/>providing<sp/>the<sp/>shared<sp/>memory</highlight></codeline>
<codeline><highlight class="normal">either<sp/>before<sp/>or<sp/>directly<sp/>after<sp/>starting<sp/>this<sp/>node.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>`rgbd_test_client`:<sp/>Receives<sp/>images<sp/>via<sp/>either<sp/>the<sp/>RGBD<sp/>topic<sp/>or<sp/>shared<sp/>memory<sp/>communication<sp/>with</highlight></codeline>
<codeline><highlight class="normal">the<sp/>use<sp/>of<sp/>the<sp/>`Client`<sp/>class.<sp/>It<sp/>switched<sp/>between<sp/>these<sp/>two<sp/>based<sp/>on<sp/>a<sp/>hostname<sp/>topic<sp/>to<sp/>determine</highlight></codeline>
<codeline><highlight class="normal">the<sp/>availability<sp/>of<sp/>shared<sp/>memory<sp/>communication,<sp/>but<sp/>uses<sp/>RGBD<sp/>as<sp/>a<sp/>fallback.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Test<sp/>procedure</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>mentioned<sp/>earlier,<sp/>the<sp/>server<sp/>and<sp/>client<sp/>nodes<sp/>with<sp/>matching<sp/>names<sp/>should<sp/>always<sp/>communicate</highlight></codeline>
<codeline><highlight class="normal">with<sp/>each<sp/>other.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>nodes<sp/>communicating<sp/>via<sp/>ROS<sp/>topics,<sp/>`*_ros`<sp/>and<sp/>`*_rgbd`,<sp/>can<sp/>be<sp/>started,<sp/>closed<sp/>and<sp/>restarted</highlight></codeline>
<codeline><highlight class="normal">in<sp/>any<sp/>order.<sp/>The<sp/>nodes<sp/>should<sp/>always<sp/>reconnect<sp/>automatically<sp/>and<sp/>the<sp/>client<sp/>node<sp/>should<sp/>show<sp/>new</highlight></codeline>
<codeline><highlight class="normal">images.<sp/>Test<sp/>this<sp/>by<sp/>opening<sp/>the<sp/>server<sp/>before<sp/>the<sp/>client<sp/>and<sp/>vice-versa.<sp/>Test<sp/>the<sp/>reconnection<sp/>by</highlight></codeline>
<codeline><highlight class="normal">closing<sp/>the<sp/>first<sp/>node<sp/>and<sp/>restart<sp/>it<sp/>again.<sp/>Try<sp/>mutltiple<sp/>time<sp/>intervals.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>bare<sp/>shared<sp/>memory<sp/>nodes,<sp/>`rgbd_test_server_shm`<sp/>and<sp/>`rgbd_test_client_shm`,<sp/>are<sp/>not<sp/>that</highlight></codeline>
<codeline><highlight class="normal">robust<sp/>by<sp/>themselves.<sp/>These<sp/>don&apos;t<sp/>reconnect<sp/>and<sp/>the<sp/>shared<sp/>memory<sp/>needs<sp/>to<sp/>be<sp/>opened<sp/>before<sp/>the</highlight></codeline>
<codeline><highlight class="normal">timoeut<sp/>of<sp/>the<sp/>client<sp/>nodes<sp/>has<sp/>ended.<sp/>Otherwise<sp/>no<sp/>communication<sp/>will<sp/>be<sp/>established.</highlight></codeline>
<codeline><highlight class="normal">Test<sp/>this<sp/>by<sp/>opening<sp/>the<sp/>server<sp/>before<sp/>the<sp/>client<sp/>or<sp/>just<sp/>directly<sp/>after.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>robust<sp/>`rgbd_test_server`<sp/>and<sp/>`rgbd_test_client`<sp/>should<sp/>always<sp/>reconnect.<sp/>Apply<sp/>the<sp/>same<sp/>test</highlight></codeline>
<codeline><highlight class="normal">procedure<sp/>as<sp/>the<sp/>nodes<sp/>using<sp/>ROS<sp/>topics.<sp/>When<sp/>both<sp/>are<sp/>running<sp/>on<sp/>the<sp/>same<sp/>machine,<sp/>communication</highlight></codeline>
<codeline><highlight class="normal">should<sp/>be<sp/>happening<sp/>via<sp/>the<sp/>shared<sp/>memory.<sp/>This<sp/>can<sp/>be<sp/>checked<sp/>by<sp/>either<sp/>`rostopic<sp/>info`<sp/>or</highlight></codeline>
<codeline><highlight class="normal">`rosnode<sp/>info`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Cross<sp/>testing</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>verify<sp/>the<sp/>robust<sp/>behaviour<sp/>of<sp/>the<sp/>classes<sp/>perform<sp/>the<sp/>following<sp/>tests:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">1.<sp/>Combine<sp/>the<sp/>`rgbd_test_client`<sp/>with<sp/><sp/>`rgbd_test_server_rgbd`.<sp/>This<sp/>should<sp/>always<sp/>reconnect.</highlight></codeline>
<codeline><highlight class="normal">2.<sp/>Extend<sp/>the<sp/>first<sp/>test<sp/>by<sp/>starting<sp/>a<sp/>`rgbd_to_shm`<sp/>node.<sp/>(__Note__:<sp/>This<sp/>node<sp/>should<sp/>be<sp/>run<sp/>on</highlight></codeline>
<codeline><highlight class="normal">the<sp/>same<sp/>machine<sp/>as<sp/>the<sp/>client<sp/>node.<sp/>This<sp/>might<sp/>require<sp/>some<sp/>remapping<sp/>of<sp/>the<sp/>RGBD<sp/>topic.)<sp/>The</highlight></codeline>
<codeline><highlight class="normal">client<sp/>node<sp/>should<sp/>switch<sp/>from<sp/>RGBD<sp/>communication<sp/>to<sp/>shared<sp/>memory<sp/>communication.<sp/>By<sp/>closing<sp/>the</highlight></codeline>
<codeline><highlight class="normal">`rgbd_to_shm`<sp/>node,<sp/>the<sp/>client<sp/>node<sp/>should<sp/>switch<sp/>back<sp/>to<sp/>the<sp/>RGBD<sp/>topic.<sp/>After<sp/>both<sp/>opening<sp/>and</highlight></codeline>
<codeline><highlight class="normal">closing<sp/>of<sp/>the<sp/>`rgbd_to_shm`<sp/>node,<sp/>check<sp/>the<sp/>way<sp/>of<sp/>communication<sp/>again<sp/>via<sp/>either<sp/>`rostopic<sp/>info`</highlight></codeline>
<codeline><highlight class="normal">or<sp/>`rosnode<sp/>info`.</highlight></codeline>
<codeline><highlight class="normal">3.<sp/>Start<sp/>the<sp/>`rgbd_test_server`<sp/>followed<sp/>by<sp/>the<sp/>`rgbd_test_client_shm`.<sp/>Apply<sp/>the<sp/>same<sp/>test<sp/>as</highlight></codeline>
<codeline><highlight class="normal">used<sp/>by<sp/>the<sp/>`rgbd_test_server_shm`.<sp/>As<sp/>`rgbd_test_server`<sp/>provides<sp/>the<sp/>same<sp/>shared<sp/>memory</highlight></codeline>
<codeline><highlight class="normal">communication<sp/>and<sp/>extra<sp/>RGBD<sp/>topic<sp/>and<sp/>service.</highlight></codeline>
<codeline><highlight class="normal">4.<sp/>In<sp/>any<sp/>test,<sp/>the<sp/>`rgbd_test_server`<sp/>can<sp/>be<sp/>replaced<sp/>by<sp/>the<sp/>combination<sp/>of<sp/>the</highlight></codeline>
<codeline><highlight class="normal">`rgbd_test_server_ros`<sp/>with<sp/>the<sp/>`ros_to_rgbd`<sp/>nodes.</highlight></codeline>
<codeline><highlight class="normal">5.<sp/>In<sp/>any<sp/>test,<sp/>the<sp/>`rgbd_test_client`<sp/>can<sp/>be<sp/>replaced<sp/>by<sp/>the<sp/>combination<sp/>of<sp/>the<sp/>`rgbd_to_ros`<sp/>and</highlight></codeline>
<codeline><highlight class="normal">the<sp/>`rgbd_test_client_ros`<sp/>nodes.</highlight></codeline>
    </programlisting>
    <location file="test/README.md"/>
  </compounddef>
</doxygen>
