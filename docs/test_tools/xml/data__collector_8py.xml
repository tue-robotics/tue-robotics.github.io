<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="data__collector_8py" kind="file" language="Python">
    <compoundname>data_collector.py</compoundname>
    <innernamespace refid="namespacedata__collector">data_collector</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacedata__collector" refkind="compound"><highlight class="comment">#!/usr/bin/python</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;Data<sp/>collector</highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral">Usage:</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral"><sp/><sp/>data_collector.py<sp/>&lt;name&gt;<sp/>&lt;start_time&gt;<sp/>&lt;end_time&gt;<sp/>[--go]</highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral"><sp/><sp/>data_collector.py<sp/>(-h<sp/>|<sp/>--help)</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"><sp/><sp/>data_collector.py<sp/>--version</highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral">Examples:</highlight></codeline>
<codeline lineno="11"><highlight class="stringliteral"><sp/><sp/>data_collector.py<sp/>reo2016_challenge_navigation<sp/>15:30<sp/>15:40</highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral"><sp/><sp/>data_collector.py<sp/>rwc_2016_challenge_restaurant<sp/>15:30<sp/>now</highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral"><sp/><sp/>data_collector.py<sp/>rwc_2016_challenge_speech_recognition<sp/>15:30<sp/>2015-03-02<sp/>17:40<sp/>2015-04-08</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral">Options:</highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/>-h<sp/>--help<sp/><sp/><sp/><sp/><sp/>Show<sp/>this<sp/>screen.</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>__future__<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>print_function</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>shutil</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>datetime<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>datetime</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>docopt<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>docopt</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>glob<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>glob</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>util<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_modification_date,<sp/>parse_start_end</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="namespacedata__collector_1a0cc56d2d2ca1fabff18f5c63cb23e60c" refkind="member"><highlight class="normal">GLOBS<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;faces&quot;</highlight><highlight class="normal">:<sp/>[</highlight><highlight class="stringliteral">&quot;/tmp/faces/*.jpeg&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;hmi&quot;</highlight><highlight class="normal">:<sp/>[</highlight><highlight class="stringliteral">&quot;/tmp/hmi/*.json&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;speech&quot;</highlight><highlight class="normal">:<sp/>[</highlight><highlight class="stringliteral">&quot;/tmp/*.wav&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;mapping_data_plans_and_audio&quot;</highlight><highlight class="normal">:<sp/>[</highlight><highlight class="stringliteral">&quot;/tmp/*.bag&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;objects&quot;</highlight><highlight class="normal"><sp/>:<sp/>[os.path.expanduser(</highlight><highlight class="stringliteral">&quot;~/ed/kinect/*/*.*&quot;</highlight><highlight class="normal">),<sp/>os.path.expanduser(</highlight><highlight class="stringliteral">&quot;~/ed/kinect/*/*/*.*&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="36"><highlight class="normal">}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39" refid="namespacedata__collector_1ac3f6c7d1d222810db2442a48f5199233" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacedata__collector_1ac3f6c7d1d222810db2442a48f5199233" kindref="member">del_empty_dirs</ref>(s_dir):</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>b_empty<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>s_target<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>os.listdir(s_dir):</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s_path<sp/>=<sp/>os.path.join(s_dir,<sp/>s_target)</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isdir(s_path):</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/><ref refid="namespacedata__collector_1ac3f6c7d1d222810db2442a48f5199233" kindref="member">del_empty_dirs</ref>(s_path):</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b_empty<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b_empty<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>b_empty:</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&apos;del:<sp/>%s&apos;</highlight><highlight class="normal"><sp/>%<sp/>s_dir)</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.rmdir(s_dir)</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>__name__<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__main__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="55" refid="namespacedata__collector_1ac9993c04351364377a1b14e0682ee715" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>now<sp/>=<sp/>datetime.now()</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57" refid="namespacedata__collector_1a061fe11bd5573f0d1ae980d040bd047b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>arguments<sp/>=<sp/>docopt(__doc__,<sp/>version=</highlight><highlight class="stringliteral">&apos;Data<sp/>Collector<sp/>1.0&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59" refid="namespacedata__collector_1ac1390cba0a37638f5cb1f8191402c7e4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>start,<sp/>end<sp/>=<sp/><ref refid="namespaceutil_1a4818fa992f7bb4ef2199928869e4b628" kindref="member">parse_start_end</ref>(arguments,<sp/>now)</highlight></codeline>
<codeline lineno="60" refid="namespacedata__collector_1acfcff61ff327d796aa8a60aae00dc027" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>name<sp/>=<sp/>arguments[</highlight><highlight class="stringliteral">&quot;&lt;name&gt;&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;I<sp/>am<sp/>going<sp/>to<sp/>collect<sp/>data<sp/>for<sp/>&apos;%s&apos;&quot;</highlight><highlight class="normal"><sp/>%<sp/>name)</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Datetime:<sp/>[%s<sp/>&lt;--&gt;<sp/>%s]&quot;</highlight><highlight class="normal"><sp/>%<sp/>(start.strftime(</highlight><highlight class="stringliteral">&quot;%Y-%m-%d<sp/>%H:%M&quot;</highlight><highlight class="normal">),<sp/>end.strftime(</highlight><highlight class="stringliteral">&quot;%Y-%m-%d<sp/>%H:%M&quot;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>arguments[</highlight><highlight class="stringliteral">&quot;--go&quot;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>raw_input(</highlight><highlight class="stringliteral">&quot;Press<sp/>Enter<sp/>to<sp/>continue...&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Create<sp/>dir<sp/>if<sp/>exist</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(name):</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.makedirs(name)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Copy<sp/>files</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>cat_name,<sp/>glob_entries<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>GLOBS.items():</highlight></codeline>
<codeline lineno="74" refid="namespacedata__collector_1a64ad01cd001e0e0643f9ea880181a7e1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dir_name<sp/>=<sp/>name<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal"><sp/>+<sp/>cat_name</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(dir_name):</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.makedirs(dir_name)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>glob_entry<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>glob_entries:</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>file_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>glob(glob_entry):</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>if<sp/>modification<sp/>date<sp/>is<sp/>between<sp/>bounds<sp/>(or<sp/>unknown)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="namespacedata__collector_1a40194640a5670c92412373f79224cd20" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mod_date<sp/>=<sp/><ref refid="namespaceutil_1a9991e1320838adb4e3a22a4db4d62cd5" kindref="member">get_modification_date</ref>(file_name)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>mod_date<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>start<sp/>&lt;<sp/>mod_date<sp/>&lt;<sp/>end:</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Writing<sp/>file<sp/>&apos;%s&apos;<sp/>to<sp/>&apos;%s&apos;&quot;</highlight><highlight class="normal"><sp/>%<sp/>(file_name,<sp/>dir_name))</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shutil.copy(file_name,<sp/>dir_name)</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacedata__collector_1ac3f6c7d1d222810db2442a48f5199233" kindref="member">del_empty_dirs</ref>(name)</highlight></codeline>
    </programlisting>
    <location file="src/test_tools/data_collection/data_collector.py"/>
  </compounddef>
</doxygen>
