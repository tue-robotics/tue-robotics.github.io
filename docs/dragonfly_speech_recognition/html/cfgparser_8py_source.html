<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>dragonfly_speech_recognition: cfgparser.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">dragonfly_speech_recognition
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_67e693a8e28ed4cd3a94396d1bba9053.html">dragonfly_speech_recognition</a></li><li class="navelem"><a class="el" href="dir_f4baed794ca531a42c87843b1ae6a659.html">grammar_parser</a></li><li class="navelem"><a class="el" href="dir_91b9023acc95d0c8b2e4f7854906b206.html">src</a></li><li class="navelem"><a class="el" href="dir_21dd9e38221b654db76adbd8a51e9280.html">grammar_parser</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cfgparser.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cfgparser_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacegrammar__parser_1_1cfgparser.html">    1</a></span>&#160;<span class="comment">#! /usr/bin/python</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># -*- coding: utf-8 -*-</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"># ----------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">&quot;&quot;&quot;Grammars for the ContextFreeGrammarParser are built from production rules, corresponding to the Rule-class below.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral">This means that sentences can be generated (and auto-completed), according to this grammar.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral">Moreover, sentences can be parsed according to the same rules.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="stringliteral">See https://www.tutorialspoint.com/automata_theory/context_free_grammar_introduction.htm and https://en.wikipedia.org/wiki/Context-free_grammar for an introduction to context free grammars.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="stringliteral">If there is a rule &quot;A -&gt; one&quot;, then that means that to generate something according to rule A, the generated sentence is &quot;one&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="stringliteral">In this example &quot;A&quot; is the lname. lname stands for left name, as it&#39;s on the left of the arrow.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="stringliteral">Sentences are produced and parsed from left to right.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="stringliteral">There can be multiple lines in the grammar definition file with the same lname, which simply add ways to produce/parse sentences for that lname.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="stringliteral">Rules can refer to each other via their lname.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="stringliteral">If a rule A defines a way to start a sentence and refers to B, that means the completion of rule A is one via rule B.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="stringliteral">For example, the grammar:</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="stringliteral">A -&gt; go B</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="stringliteral">B -&gt; forward</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="stringliteral">B -&gt; backward</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="stringliteral">can generate the sentences &quot;go forward&quot; and &quot;go backward&quot;. And thus parse these sentences as well.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="stringliteral">Rules can also have variables that will be assigned to when a sentence is parsed.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="stringliteral">For example, the line:</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="stringliteral">    VP[&quot;action&quot;: A] -&gt; V_PLACE[A]</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="stringliteral">adds a rule for the lname VP, with a field called &quot;action&quot;, which will be set to A.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="stringliteral">The value for A is determined by a rule with lname V_PLACE, which will determine the value of A.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="stringliteral">The rule</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="stringliteral">    V_PLACE[&quot;place&quot;] -&gt; place | put</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="stringliteral">applies when the text is &quot;place&quot; or &quot;put&quot;.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="stringliteral">When that is the case, the rule applies and the text &quot;place&quot; is filled in for A.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="stringliteral">That means when the text &quot;put&quot; is typed, the variable &quot;action&quot; will be assigned the value &quot;place&quot;.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="stringliteral">The whole grammar has an entry point, or root rule, from which all the other rules are referred.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="stringliteral">Each rule forms branch upon branch, together building a Tree.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="stringliteral">When a sentence is parsed, a Tree is built. While this happens, the variables are collected.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="stringliteral">When the Tree is completely parsed, the collected variables and their assignments are fetched from the Tree with the get_semantics-method.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="stringliteral">This returns a string. However, this string represents a (nested) dictionary that maps a variable to a value.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="stringliteral">Semantics describe what a sentence means. In this case, it describes what action to perform and with what to perform it.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="stringliteral">The semantics are returned to whomever called CFGParser.parse(...), usually the REPL on console.py.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="stringliteral">The REPL sends the semantics to the action_server, which grounds the semantics by implementing the actions.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">import</span> itertools</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">import</span> random</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">import</span> re</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">import</span> yaml</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html">   60</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html">GrammarError</a>(Exception):</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="stringliteral">    Exception indicating a problem in the grammar rules.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html#adc06bb597b7aa249ac4b5afffd29eb9c">   65</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html#adc06bb597b7aa249ac4b5afffd29eb9c">__init__</a>(self, message):</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        Exception.__init__(self, message)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1ParseError.html">   69</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1ParseError.html">ParseError</a>(Exception):</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="stringliteral">    Exception indicating that the given sentence does not match on the grammar.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1ParseError.html#a784550e1d4fc002a7239b7191f4dfa68">   74</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1ParseError.html#a784550e1d4fc002a7239b7191f4dfa68">__init__</a>(self, words, word_index):</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">if</span> word_index &lt; 0 <span class="keywordflow">or</span> word_index &gt;= len(words):</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            msg = <span class="stringliteral">&quot;Word index {} is missing (sentence has {} words)&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                word_index, len(words))</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            msg = <span class="stringliteral">&quot;Word &#39;{}&#39; at index {} failed to match&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                words[word_index], word_index)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        Exception.__init__(self, msg)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html">   84</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html">bcolors</a>:</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#a9dff198e145c22349476e141cc4f418b">   85</a></span>&#160;    HEADER = <span class="stringliteral">&#39;\033[95m&#39;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#a8c6475feec015427c75f3a55eee71233">   86</a></span>&#160;    OKBLUE = <span class="stringliteral">&#39;\033[94m&#39;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#a2dc8b8839f60dd4dab0b07ef3ea14c9f">   87</a></span>&#160;    OKGREEN = <span class="stringliteral">&#39;\033[92m&#39;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#aa2d9dde0469ffffde6d823864247b5fd">   88</a></span>&#160;    WARNING = <span class="stringliteral">&#39;\033[93m&#39;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#ad2b7dc309136701abb95e4efc2748201">   89</a></span>&#160;    FAIL = <span class="stringliteral">&#39;\033[91m&#39;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#a065976091106d44525f7aa935120d2b3">   90</a></span>&#160;    ENDC = <span class="stringliteral">&#39;\033[0m&#39;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#a056378d64dbe299b1f6ac955127a37df">   91</a></span>&#160;    BOLD = <span class="stringliteral">&#39;\033[1m&#39;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1bcolors.html#ae8a6a1e592088af53d38b1a633906b2e">   92</a></span>&#160;    UNDERLINE = <span class="stringliteral">&#39;\033[4m&#39;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html">   95</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html">Option</a>:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;An option is a continuation of a sentence of where there are multiple ways to continue the sentence.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="stringliteral">    These choices in an Option are called called conjuncts.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#aba68ee3731d75db39f1b38f6dbd5e7a4">   99</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#aba68ee3731d75db39f1b38f6dbd5e7a4">__init__</a>(self, lsemantic=&quot;&quot;, conjs=None):</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Constructor of an Option</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="stringliteral">        :param lsemantic the name of the semantics that the option is the continuation of. E.g. if the lsemantic is some action, this option might be the object to perform that action with.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">        :param conjs the choices in this option&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a9c2b88ea4579ba8145a1edc7b8837e5b">  103</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a9c2b88ea4579ba8145a1edc7b8837e5b">lsemantic</a> = lsemantic</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> conjs:</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">  105</a></span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">conjuncts</a> = conjs</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">conjuncts</a> = []</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a5a27bfa1c404344a5f4eb4c0bc0f9fed">  109</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a5a27bfa1c404344a5f4eb4c0bc0f9fed">__repr__</a>(self):</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Option(lsemantic=&#39;{lsem}&#39;, conjs={c})&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            lsem=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a9c2b88ea4579ba8145a1edc7b8837e5b">lsemantic</a>, c=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">conjuncts</a>)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a73608a0e8a0760fd66a2f91ee1d8af64">  113</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a73608a0e8a0760fd66a2f91ee1d8af64">__eq__</a>(self, other):</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">if</span> isinstance(other, Option):</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a9c2b88ea4579ba8145a1edc7b8837e5b">lsemantic</a> == other.lsemantic <span class="keywordflow">and</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">conjuncts</a> == other.conjuncts</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a8492c5295a01470ddb2acd08f810a783">  120</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a8492c5295a01470ddb2acd08f810a783">from_cfg_def</a>(option_definition, left_semantics):</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Parse text from the CFG definition into an Option and the choices it is composed of. &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        opt_strs = option_definition.split(<span class="stringliteral">&quot;|&quot;</span>)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">for</span> opt_str <span class="keywordflow">in</span> opt_strs:</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            opt_str = opt_str.strip()</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            opt = <a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html">Option</a>(left_semantics)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">while</span> opt_str:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                (rname, rsem, opt_str) = <a class="code" href="namespacegrammar__parser_1_1cfgparser.html#ac20401fd2a7ace93c6f0ad562fdeaddd">parse_next_atom</a>(opt_str)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                is_variable = rname[0].isupper()</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                opt.conjuncts += [<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html">Conjunct</a>(rname, rsem, is_variable)]</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">yield</span> opt</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a5b3731aa90e56a86ba46bd7ffcc0a472">  136</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a5b3731aa90e56a86ba46bd7ffcc0a472">pretty_print</a>(self, level=0):</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        tabs = level * <span class="stringliteral">&quot;    &quot;</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        ret = <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        ret += tabs + <span class="stringliteral">&quot;Option(lsemantic=&#39;{lsem}&#39;, conjs=[&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            lsem=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a9c2b88ea4579ba8145a1edc7b8837e5b">lsemantic</a>)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">for</span> conj <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">conjuncts</a>:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment"># ret += &quot;\n&quot;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="comment"># ret += tabs + &quot;    &quot; + &quot;{c},&quot;.format(c=conj)</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            ret += <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            ret += conj.pretty_print()</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        ret += <span class="stringliteral">&quot;])&quot;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span> ret</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a52b852ab56b62708e6f7c31fba57b075">  149</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a52b852ab56b62708e6f7c31fba57b075">graphviz_id</a>(self):</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Option &#39;{lsem}&#39;&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(lsem=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a9c2b88ea4579ba8145a1edc7b8837e5b">lsemantic</a>).replace(<span class="stringliteral">&#39;&quot;&#39;</span>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                                                     <span class="stringliteral">&#39;&#39;</span>).replace(</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="stringliteral">&quot;:&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a3fe0d023b2369c15b2e79e05d04c2c62">  154</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a3fe0d023b2369c15b2e79e05d04c2c62">to_graphviz</a>(self, graph):</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">for</span> conj <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">conjuncts</a>:</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            graph.edge(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html#a52b852ab56b62708e6f7c31fba57b075">graphviz_id</a>(), conj.graphviz_id())</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            conj.to_graphviz(graph)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"># ----------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html">  163</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html">Conjunct</a>:</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;&quot;A Conjunct is a placeholder in the parse-tree, which can be filled in by an Option or a word&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ac993d3289549ea09504f5b80c3b2892f">  166</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ac993d3289549ea09504f5b80c3b2892f">__init__</a>(self, name, rsemantic=&quot;&quot;, is_variable=False):</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;:param name the word or variable</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">        :param rsemantic what option is the Conjunct part of</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">        :param is_variable is the conjunct variable or terminal?&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">  170</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">name</a> = name</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5e0612956ac168dee0365707c9305d4d">  171</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5e0612956ac168dee0365707c9305d4d">rsemantic</a> = rsemantic</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a2068c84406418893ae5fdcfde156a71f">  172</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a2068c84406418893ae5fdcfde156a71f">is_variable</a> = is_variable</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#acd3c7bf3528e7e83c5979d2284643752">  174</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#acd3c7bf3528e7e83c5979d2284643752">__repr__</a>(self):</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Conjunct(name=&#39;{name}&#39;, rsemantic=&#39;{r}&#39;, is_variable={v})&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            name=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">name</a>, r=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5e0612956ac168dee0365707c9305d4d">rsemantic</a>,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            v=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a2068c84406418893ae5fdcfde156a71f">is_variable</a>)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#af7e6a85e72f32cb46c361a5e1aac1e8c">  179</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#af7e6a85e72f32cb46c361a5e1aac1e8c">__eq__</a>(self, other):</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> isinstance(other, Conjunct):</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">name</a> == other.name <span class="keywordflow">and</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5e0612956ac168dee0365707c9305d4d">rsemantic</a> == other.rsemantic <span class="keywordflow">and</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a2068c84406418893ae5fdcfde156a71f">is_variable</a> == other.is_variable</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a0ae7afd794e6e5cc4b7eb0a7a9dcd557">  184</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a0ae7afd794e6e5cc4b7eb0a7a9dcd557">pretty_print</a>(self, level=0):</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a2068c84406418893ae5fdcfde156a71f">is_variable</a> <span class="keywordflow">or</span> <span class="stringliteral">&quot;$&quot;</span> <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">name</a>:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            prefix = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5e0612956ac168dee0365707c9305d4d">rsemantic</a> + <span class="stringliteral">&quot;=&quot;</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5e0612956ac168dee0365707c9305d4d">rsemantic</a> + <span class="stringliteral">&quot;=&quot;</span> + self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">name</a>  <span class="comment"># + str(self)</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordflow">return</span> bcolors.OKGREEN + self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">name</a> + bcolors.ENDC  <span class="comment"># + str(self)</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5b6efa09aca8f4fb0e09e969cbe68983">  191</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5b6efa09aca8f4fb0e09e969cbe68983">graphviz_id</a>(self):</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Conjunct {name}&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(name=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">name</a>)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab7dd396710b7e13a34e41ca713bd773d">  194</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab7dd396710b7e13a34e41ca713bd773d">to_graphviz</a>(self, graph):</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        graph.node(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5b6efa09aca8f4fb0e09e969cbe68983">graphviz_id</a>())</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"># ----------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html">  201</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html">Rule</a>:</div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a9a2d887a94b95974b9d77420425c36a1">  202</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a9a2d887a94b95974b9d77420425c36a1">__init__</a>(self, lname, options=None):</div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aa5319269960cfeb637d245fd3d20bb58">  203</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aa5319269960cfeb637d245fd3d20bb58">lname</a> = lname</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aaa6835b88c634ec93877c28ba95c351c">  204</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aaa6835b88c634ec93877c28ba95c351c">options</a> = options <span class="keywordflow">if</span> options <span class="keywordflow">else</span> []</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a103f8a853272905570436c700c1013fa">  206</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a103f8a853272905570436c700c1013fa">__repr__</a>(self):</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Rule(lname=&#39;{lname}&#39;, options={opts})&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(lname=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aa5319269960cfeb637d245fd3d20bb58">lname</a>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                                              opts=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aaa6835b88c634ec93877c28ba95c351c">options</a>)</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a376c9d7ee5dafd12453cec24db21c1b8">  210</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a376c9d7ee5dafd12453cec24db21c1b8">__eq__</a>(self, other):</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> isinstance(other, Rule):</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aa5319269960cfeb637d245fd3d20bb58">lname</a> == other.lname <span class="keywordflow">and</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aaa6835b88c634ec93877c28ba95c351c">options</a> == other.options</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#adcfa74b8fffce5fc48ab02da73e59591">  217</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#adcfa74b8fffce5fc48ab02da73e59591">from_cfg_def</a>(s):</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        tmp = s.split(<span class="stringliteral">&quot; -&gt; &quot;</span>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">if</span> len(tmp) != 2:</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Invalid grammar, please use proper &#39; -&gt; &#39; arrows&quot;</span>,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                            tmp)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        (lname, lsem, outstr) = <a class="code" href="namespacegrammar__parser_1_1cfgparser.html#ac20401fd2a7ace93c6f0ad562fdeaddd">parse_next_atom</a>(tmp[0].strip())</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        rule = <a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html">Rule</a>(lname)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        rule.options = list(Option.from_cfg_def(tmp[1], lsem))</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span> rule</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#ad70b915d5dfab98b1bf09d8ff37fdb02">  231</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#ad70b915d5dfab98b1bf09d8ff37fdb02">pretty_print</a>(self, level=0):</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        tabs = (level) * <span class="stringliteral">&#39;    &#39;</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        ret = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        ret += tabs + self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aa5319269960cfeb637d245fd3d20bb58">lname</a></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">for</span> option <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aaa6835b88c634ec93877c28ba95c351c">options</a>:</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            ret += option.pretty_print(level=level + 1)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">return</span> ret</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a6d95381c2c8a60d3b5feb1f21687bb52">  239</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a6d95381c2c8a60d3b5feb1f21687bb52">graphviz_id</a>(self):</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Rule {lname}&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(lname=self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aa5319269960cfeb637d245fd3d20bb58">lname</a>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a44a8dc08970a562de31dd09f97231d92">  242</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a44a8dc08970a562de31dd09f97231d92">to_graphviz</a>(self, graph):</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">for</span> opt <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aaa6835b88c634ec93877c28ba95c351c">options</a>:</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            graph.edge(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a6d95381c2c8a60d3b5feb1f21687bb52">graphviz_id</a>(), opt.graphviz_id())</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            opt.to_graphviz(graph)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"># ----------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html">  251</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html">Tree</a>:</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac55a568ce854a81c49a982dcb42f979a">  252</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac55a568ce854a81c49a982dcb42f979a">__init__</a>(self, option):</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a55e3d0f92e33115514bfc992ba7304e2">  253</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a55e3d0f92e33115514bfc992ba7304e2">option</a> = option</div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#afe39fe12f8245cf3d94e7fb631037386">  254</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#afe39fe12f8245cf3d94e7fb631037386">subtrees</a> = [<span class="keywordtype">None</span> <span class="keywordflow">for</span> c <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a55e3d0f92e33115514bfc992ba7304e2">option</a>.conjuncts]</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac97872ab26911e60e7698ca3bc42a331">  255</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac97872ab26911e60e7698ca3bc42a331">parent</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a4f73f695fd947ae09494550d12787b2b">  256</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a4f73f695fd947ae09494550d12787b2b">parent_idx</a> = 0</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac65739f36ffba7470efc2dcdc9cdfb9e">  258</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac65739f36ffba7470efc2dcdc9cdfb9e">next</a>(self, idx):</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">if</span> idx + 1 &lt; len(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a55e3d0f92e33115514bfc992ba7304e2">option</a>.conjuncts):</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">return</span> self, idx + 1</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac97872ab26911e60e7698ca3bc42a331">parent</a>:</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac97872ab26911e60e7698ca3bc42a331">parent</a>.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac65739f36ffba7470efc2dcdc9cdfb9e">next</a>(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a4f73f695fd947ae09494550d12787b2b">parent_idx</a>)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">return</span> <span class="keywordtype">None</span>, 0</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac49be2755bb51524148a9f3fbc74cd32">  267</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac49be2755bb51524148a9f3fbc74cd32">add_subtree</a>(self, idx, tree):</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        tree.parent = self</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        tree.parent_idx = idx</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#afe39fe12f8245cf3d94e7fb631037386">subtrees</a>[idx] = tree</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">return</span> tree</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a29a018b68e000aa649392a0f45472d2d">  273</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a29a018b68e000aa649392a0f45472d2d">__repr__</a>(self):</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment"># TODO: Make this print like a tree</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> str(zip(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a55e3d0f92e33115514bfc992ba7304e2">option</a>.conjuncts, self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#afe39fe12f8245cf3d94e7fb631037386">subtrees</a>))</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a571dd35a82c6089c67cbbd2d2cd9371e">  277</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a571dd35a82c6089c67cbbd2d2cd9371e">pretty_print</a>(self, level=0):</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment"># print self, level</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment"># tabs = (level-1)*&#39;    &#39; + &quot;│   ├───&quot;</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        tabs = (level) * <span class="stringliteral">&#39;    &#39;</span> + <span class="stringliteral">&quot;└───&quot;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment"># tabs = &quot;\t&quot; * level #</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        ret = <span class="stringliteral">&quot;&quot;</span>  <span class="comment"># &quot;#tabs + self.option.pretty_print(level=level)</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">for</span> conjunct, subtree <span class="keywordflow">in</span> zip(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a55e3d0f92e33115514bfc992ba7304e2">option</a>.conjuncts, self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html#afe39fe12f8245cf3d94e7fb631037386">subtrees</a>):</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            ret += tabs + conjunct.pretty_print() + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">if</span> hasattr(subtree, <span class="stringliteral">&quot;pretty_print&quot;</span>):</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                ret += subtree.pretty_print(level=level + 1)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="comment"># ret += &quot;\n&quot;</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> ret</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"># ----------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="namespacegrammar__parser_1_1cfgparser.html#ac20401fd2a7ace93c6f0ad562fdeaddd">  295</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacegrammar__parser_1_1cfgparser.html#ac20401fd2a7ace93c6f0ad562fdeaddd">parse_next_atom</a>(s):</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="stringliteral">    Returns (name, semantics, remaining_str)</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="stringliteral">    For example for &quot;VP[X, Y] foo bar&quot; it returns:</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="stringliteral">         (&quot;VP&quot;, &quot;X, Y&quot;, &quot;foo bar&quot;)</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="stringliteral">    :param s:</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="stringliteral">    :return: Tuple with the rule&#39;s lname, the variables involved and the remaining text: (&quot;VP&quot;, &quot;X, Y&quot;, &quot;foo bar&quot;)</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    s = s.strip()</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(s)):</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        c = s[i]</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">if</span> c == <span class="stringliteral">&#39; &#39;</span>:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> s[:i], <span class="stringliteral">&quot;&quot;</span>, s[i:].strip()</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">elif</span> c == <span class="stringliteral">&#39;[&#39;</span>:</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            j = s.find(<span class="stringliteral">&quot;]&quot;</span>, i)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">if</span> j &lt; 0:</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordflow">raise</span> Exception</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">return</span> s[:i], s[i + 1:j], s[j + 1:].strip()</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> s, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"># ----------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html">  321</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html">CFGParser</a>:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="stringliteral">    Parser for parsing the heard sentence, and converting it to information for</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="stringliteral">    the action that should be performed.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="stringliteral">    Usage:</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="stringliteral">    - For loading a grammar from a file use fromfile().</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="stringliteral">    - For loading a grammar from a text string use fromstring().</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="stringliteral">    - For loading a grammar with functions, construct a CFGParser object, add</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="stringliteral">      the functions using CFGParser.set_function(), and finally load the</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="stringliteral">      grammar using fromfile or fromstring, passing in the CFGParser object</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="stringliteral">      as well.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="stringliteral">    The parser performs a few basic checks on the grammar, such as missing</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="stringliteral">    sub-rules and missing functions while loading. The CFGParser.verify function</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="stringliteral">    goes a step further by expanding all alternatives.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="stringliteral">    To parse a sentence, use parse_raw() at a CFGParser instance to get maximum information, or</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="stringliteral">    use parse() at a CFGParser instance to avoid getting exceptions.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5ecdb519554b73b7afe02248bd5b54b6">  343</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5ecdb519554b73b7afe02248bd5b54b6">__init__</a>(self):</div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">  344</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a> = {}</div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">  345</a></span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">functions</a> = {}</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a00ddec73b160cf683c03668b5fc14506">  348</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a00ddec73b160cf683c03668b5fc14506">fromfile</a>(filename, parser=None):</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="stringliteral">        Load the grammar from the provided file.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="stringliteral">        :param filename: Path to the text file containing the grammar</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="stringliteral">        :param parser: If not None, the parser to use (else a new parser is created).</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="stringliteral">        :return: The parser containing the grammar.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keyword">with</span> open(filename) <span class="keyword">as</span> f:</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            string = f.read()</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">return</span> CFGParser.fromstring(string, parser)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a9c42f8838ff6b25b8234bd3250fd1d92">  361</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a9c42f8838ff6b25b8234bd3250fd1d92">fromstring</a>(string, parser=None):</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="stringliteral">        Load the grammar from the provided text.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="stringliteral">        :param string: Text containing the grammar</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="stringliteral">        :param parser: If not None, the parser to use (else a new parser is created).</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="stringliteral">        :return: The parser containing the grammar.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">if</span> parser <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            parser = <a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html">CFGParser</a>()</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">for</span> line <span class="keywordflow">in</span> string.replace(<span class="stringliteral">&quot;;&quot;</span>, <span class="stringliteral">&quot;\n&quot;</span>).split(<span class="stringliteral">&quot;\n&quot;</span>):</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            line = line.strip()</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">if</span> line == <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">or</span> line[0] == <span class="stringliteral">&#39;#&#39;</span>:</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            parser.add_rule(line)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        parser.check_rules()</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> parser</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aa9fd5a02b0a122ea5b2a3a31f6c2a985">  381</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aa9fd5a02b0a122ea5b2a3a31f6c2a985">check_rules</a>(self):</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="stringliteral">        Verify completeness of the loaded grammar, no rules that refer to missing</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="stringliteral">        sub-rules and no functions that don&#39;t exist.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">for</span> rule <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>.values():</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keywordflow">for</span> option <span class="keywordflow">in</span> rule.options:</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <span class="keywordflow">for</span> conj <span class="keywordflow">in</span> option.conjuncts:</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <span class="keywordflow">if</span> conj.is_variable:</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        <span class="keyword">assert</span> conj.name <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>, <span class="stringliteral">&quot;Rule &#39;{}&#39; is missing&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                            conj.name)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    <span class="keywordflow">if</span> conj.name[0] == <span class="stringliteral">&#39;$&#39;</span>:</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                        <span class="keyword">assert</span> conj.name[</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                               1:] <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">functions</a>, <span class="stringliteral">&quot;Function &#39;{}&#39; is missing&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                            conj.name[1:])</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a55ed74b90773447f93550248c1e96cde">  397</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a55ed74b90773447f93550248c1e96cde">verify</a>(self, target=None):</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> target <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="comment"># Try whether all rules in the grammar are valid</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">for</span> r <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>:</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a1c694b10bca37bed8341b095c7262912">get_unwrapped</a>(r)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a1c694b10bca37bed8341b095c7262912">get_unwrapped</a>(target)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ae8a9718fb205eca40969c44fe0c7fa6b">  406</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ae8a9718fb205eca40969c44fe0c7fa6b">add_rule</a>(self, s):</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        rule = Rule.from_cfg_def(s)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment"># See if a rule with this lname already exists. If not, add it</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> rule.lname <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            original_rule = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>[rule.lname]</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            original_rule.options += rule.options</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>[rule.lname] = rule</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a402b1840f02b980e9c07b83a96b801a8">  416</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a402b1840f02b980e9c07b83a96b801a8">set_function</a>(self, name, func):</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="stringliteral">        Add a new function to the parser. Must be done before loading the grammar.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="stringliteral">        TODO #11: Ensure the function expansion result does not refer to missing sub-rules or functions.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">functions</a>[name] = func</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acaa69542bedb3bb2c1a0766ec811558e">  424</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acaa69542bedb3bb2c1a0766ec811558e">get_semantics</a>(self, tree):</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Get the semantics of a tree.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="stringliteral">        This means that variables are unified with their values, which may be recursively gotten from the tree&#39;s subtrees. &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        semantics = tree.option.lsemantic</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(tree.subtrees)):</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            conj = tree.option.conjuncts[i]</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            subtree = tree.subtrees[i]</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">if</span> subtree:</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                child_semantics = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acaa69542bedb3bb2c1a0766ec811558e">get_semantics</a>(subtree)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                semantics = semantics.replace(conj.rsemantic, child_semantics)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">return</span> semantics</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a185e051b08bded47277321b278e33b5d">  440</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a185e051b08bded47277321b278e33b5d">parse</a>(self, target, words, debug=False):</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="stringliteral">        Parse the given sentence against the grammar loaded in the class. This</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="stringliteral">        method hides all errors (and returns False in that case). Use the</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="stringliteral">        self.parse_raw function if the difference between a successful and</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="stringliteral">        failed parse is relevant.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="stringliteral">        :param target: Target rule in the grammar to start parsing the sentence.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="stringliteral">        :type target: str.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="stringliteral">        :param words: Sentence to parse, either as a single string or a list of words.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="stringliteral">        :type words: str, or a list of str.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="stringliteral">        :param debug: If True, output the matched sequence in the tree.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="stringliteral">        :type debug: Boolean, by default False.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="stringliteral">        :return: The captured data value collected during parsing if parsing</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="stringliteral">                 succeeds, else False.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2534c7f1443069198beb2d467e1f9fde">parse_raw</a>(target, words, debug)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">except</span> GrammarError <span class="keyword">as</span> ex:</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            print(<span class="stringliteral">&quot;grammar_parser, Grammar error: {}&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(ex))</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">except</span> ParseError <span class="keyword">as</span> ex:</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            print(<span class="stringliteral">&quot;grammar_parser, Parse error: {}&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(ex))</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2534c7f1443069198beb2d467e1f9fde">  472</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2534c7f1443069198beb2d467e1f9fde">parse_raw</a>(self, target, words, debug=False):</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="stringliteral">        Parse the given sentence against the grammar loaded in the class. This</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="stringliteral">        method throws exceptions on failures, the self.parse function returns</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="stringliteral">        False in such a case.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="stringliteral">        :param target: Target rule in the grammar to start parsing the sentence.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="stringliteral">        :type target: str.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="stringliteral">        :param words: Sentence to parse, either as a single string or a list of words.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="stringliteral">        :type words: str, or a list of str.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="stringliteral">        :param debug: If True, output the matched sequence in the tree.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="stringliteral">        :type debug: Boolean, by default False.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="stringliteral">        :return: The captured data value collected during parsing if parsing</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="stringliteral">                 succeeds, a GrammarError exception if the grammar is found to</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="stringliteral">                 be incorrect, or a ParseError exception if the sentence fails</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="stringliteral">                 to match the grammar.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> isinstance(words, str):</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            words = words.split(<span class="stringliteral">&quot; &quot;</span>)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span> target <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>:</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">raise</span> Exception(</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <span class="stringliteral">&quot;Target {} not present in grammar rules&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(target))</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        rule = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>[target]</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        best_fail = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">for</span> opt <span class="keywordflow">in</span> rule.options:</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            T = <a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html">Tree</a>(opt)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            ret = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a550ef374b0c5d4de75007eb74090ce5f">_parse</a>((T, 0), words, 0)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">if</span> ret <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">if</span> debug:</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    print(T.pretty_print())</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                <span class="comment"># Simply take the first tree that successfully parses</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                semantics_str = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acaa69542bedb3bb2c1a0766ec811558e">get_semantics</a>(T).replace(<span class="stringliteral">&quot;&lt;&quot;</span>, <span class="stringliteral">&quot;[&quot;</span>).replace(</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    <span class="stringliteral">&quot;&gt;&quot;</span>, <span class="stringliteral">&quot;]&quot;</span>)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                semantics = yaml.safe_load(semantics_str)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="comment"># just let the yaml error bubble up, the will give a nice backtrace</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                <span class="keywordflow">return</span> semantics</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">elif</span> best_fail <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> best_fail &lt; ret:</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                best_fail = ret</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keyword">assert</span> best_fail <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">raise</span> <a class="code" href="classgrammar__parser_1_1cfgparser_1_1ParseError.html">ParseError</a>(words, best_fail)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a550ef374b0c5d4de75007eb74090ce5f">  521</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a550ef374b0c5d4de75007eb74090ce5f">_parse</a>(self, TIdx, words, word_index):</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral">        Try to match the provided words on the given grammar rule option.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="stringliteral">        :param TIdx: Tuple of grammar Rule, and rule alternative index.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="stringliteral">        :param words: Words to match on the alternative.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="stringliteral">        :param word_index: First word in words to match on the alternative.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral">        :return: On successful match None is returned, else an index in words</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="stringliteral">                 pointing at the position that failed to match. Note that the</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="stringliteral">                 index may be equal to the number of words (indicating that</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="stringliteral">                 words are missing).</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        (T, idx) = TIdx</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> T:</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="comment"># We ran out of grammar.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">if</span> len(words) == word_index:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="comment"># And out of words at the same time, hooray!</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keywordflow">return</span> word_index</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">if</span> len(T.option.conjuncts) == idx:</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a550ef374b0c5d4de75007eb74090ce5f">_parse</a>(T.next(idx), words, word_index)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="comment"># At least one grammar symbol exists.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        conj = T.option.conjuncts[idx]</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">if</span> conj.is_variable:</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="comment"># Conjunct is a sub-rule, &#39;check_rules&#39; ensures a sub-rule exists,</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="comment"># but functions may introduce new sub-rule calls.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">if</span> conj.name <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>:</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html">GrammarError</a>(<span class="stringliteral">&quot;Rule &#39;{}&#39; does not exist&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(conj.name))</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            options = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>[conj.name].options</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">elif</span> conj.name[0] == <span class="stringliteral">&quot;$&quot;</span>:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="comment"># Conjunct is a function that must be expanded.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            func_name = conj.name[1:]</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="comment"># &#39;check_rules&#39; ensures the function exists, but a previous</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="comment"># $function expansion may be wrong.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> func_name <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">functions</a>:</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html">GrammarError</a>(</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="stringliteral">&quot;Function &#39;{}&#39; does not exist&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(func_name))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            options = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">functions</a>[func_name](words[word_index:])</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <span class="comment"># XXX Expanded result should not refer to missing sub-rules or</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="comment"># functions. However, any check at this time is too late.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="comment"># Conjunct is an actual word.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordflow">if</span> word_index &gt;= len(words):</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                <span class="comment"># Ran out of words but not out of grammar terminals.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keywordflow">return</span> word_index</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordflow">if</span> conj.name == words[word_index]:</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a550ef374b0c5d4de75007eb74090ce5f">_parse</a>(T.next(idx), words, word_index + 1)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <span class="keywordflow">return</span> word_index</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        best_fail = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">for</span> opt <span class="keywordflow">in</span> options:</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            subtree = T.add_subtree(idx, <a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html">Tree</a>(opt))</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            ret = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a550ef374b0c5d4de75007eb74090ce5f">_parse</a>((subtree, 0), words, word_index)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="keywordflow">if</span> ret <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">if</span> best_fail <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> best_fail &lt; ret:</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                best_fail = ret</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keyword">assert</span> best_fail <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span> best_fail</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a01dd7b5dd2c19668d7bd427a1601ea86">  595</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a01dd7b5dd2c19668d7bd427a1601ea86">next_word</a>(self, target, words):</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> target <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>:</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        rule = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>[target]</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        next_words = []</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">for</span> opt <span class="keywordflow">in</span> rule.options:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            next_words += self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5db09b7fc5c2811e8682ae95871877da">_next_word</a>((<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html">Tree</a>(opt), 0), words)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">return</span> next_words</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5db09b7fc5c2811e8682ae95871877da">  607</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5db09b7fc5c2811e8682ae95871877da">_next_word</a>(self, TIdx, words):</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        (T, idx) = TIdx</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> T:</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">return</span> []</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        conj = T.option.conjuncts[idx]</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">if</span> conj.is_variable:</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> conj.name <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="keywordflow">return</span> []</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            options = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>[conj.name].options</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">elif</span> conj.name[0] == <span class="stringliteral">&quot;$&quot;</span>:</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            func_name = conj.name[1:]</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2917cc849a8e7391270b22a8ca1c2341">has_completion_function</a>(func_name):</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            options = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a6b4793b7a26193a27c12fe8db01be8fc">get_completion_function</a>(func_name)(words)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordflow">if</span> words == []:</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">return</span> [conj.name]</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">elif</span> conj.name == words[0]:</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5db09b7fc5c2811e8682ae95871877da">_next_word</a>(T.next(idx), words[1:])</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="keywordflow">return</span> []</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        next_words = []</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">for</span> opt <span class="keywordflow">in</span> options:</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            subtree = T.add_subtree(idx, <a class="code" href="classgrammar__parser_1_1cfgparser_1_1Tree.html">Tree</a>(opt))</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            next_words += self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5db09b7fc5c2811e8682ae95871877da">_next_word</a>((subtree, 0), words)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">return</span> next_words</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2917cc849a8e7391270b22a8ca1c2341">  641</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2917cc849a8e7391270b22a8ca1c2341">has_completion_function</a>(self, func_name):</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">return</span> func_name <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">functions</a></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a6b4793b7a26193a27c12fe8db01be8fc">  644</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a6b4793b7a26193a27c12fe8db01be8fc">get_completion_function</a>(self, func_name):</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">functions</a>[func_name]</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aeffed607010bb2ae519838fe75a4a3e5">  648</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aeffed607010bb2ae519838fe75a4a3e5">graphviz_id</a>():</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;CFGParser&quot;</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a937afc076896af0476cf3ae45ed66ea3">  651</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a937afc076896af0476cf3ae45ed66ea3">to_graphviz</a>(self, graph):</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">for</span> name, rule <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>.items():</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            graph.edge(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aeffed607010bb2ae519838fe75a4a3e5">graphviz_id</a>(), rule.graphviz_id())</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            rule.to_graphviz(graph)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a61d849d538e2f9ffc8f470d11a9f1447">  656</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a61d849d538e2f9ffc8f470d11a9f1447">visualize_options</a>(self, graph, target_rule, previous_words=None, depth=2):</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        previous_words = [] <span class="keywordflow">if</span> <span class="keywordflow">not</span> previous_words <span class="keywordflow">else</span> previous_words</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        colors = itertools.cycle(</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            [<span class="stringliteral">&quot;blue&quot;</span>, <span class="stringliteral">&quot;green&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>, <span class="stringliteral">&quot;cyan&quot;</span>, <span class="stringliteral">&quot;magenta&quot;</span>, <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;purple&quot;</span>,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;             <span class="stringliteral">&quot;orange&quot;</span>])</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">if</span> previous_words:</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            previous_word = previous_words[-1]</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            previous_word = target_rule</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        graph.node(previous_word)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        next_words = set(self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a01dd7b5dd2c19668d7bd427a1601ea86">next_word</a>(target_rule, previous_words))</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> next_words <span class="keywordflow">and</span> depth:</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">for</span> next_word <span class="keywordflow">in</span> next_words:</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                graph.edge(previous_word, next_word, color=colors.next())</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a61d849d538e2f9ffc8f470d11a9f1447">visualize_options</a>(graph, target_rule,</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                                       previous_words + [next_word],</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                       depth=depth - 1)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a1c694b10bca37bed8341b095c7262912">  678</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a1c694b10bca37bed8341b095c7262912">get_unwrapped</a>(self, lname):</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">if</span> lname <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>:</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="keywordflow">raise</span> Exception(</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <span class="stringliteral">&quot;Target {} not present in grammar rules&quot;</span>.<a class="code" href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">format</a>(lname))</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        rule = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">rules</a>[lname]</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        opt_strings = []</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">for</span> opt <span class="keywordflow">in</span> rule.options:</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            conj_strings = []</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="keywordflow">for</span> conj <span class="keywordflow">in</span> opt.conjuncts:</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                <span class="keywordflow">if</span> conj.is_variable:</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    unwrapped_string = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a1c694b10bca37bed8341b095c7262912">get_unwrapped</a>(conj.name)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    <span class="keywordflow">if</span> unwrapped_string:</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                        conj_strings.append(unwrapped_string)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                    conj_strings.append(conj.name)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            opt_strings.append(<span class="stringliteral">&quot; &quot;</span>.join(conj_strings))</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        s = <span class="stringliteral">&quot;|&quot;</span>.join(opt_strings)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">if</span> len(opt_strings) &gt; 1:</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            s = <span class="stringliteral">&quot;(&quot;</span> + s + <span class="stringliteral">&quot;)&quot;</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">return</span> s</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aef1f24105c012a19e4e826db915c04d2">  707</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aef1f24105c012a19e4e826db915c04d2">get_random_sentence</a>(self, lname):</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        unwrapped = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a1c694b10bca37bed8341b095c7262912">get_unwrapped</a>(lname)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        spec = <span class="stringliteral">&quot;(%s)&quot;</span> % unwrapped</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">while</span> re.search(<span class="stringliteral">&#39;\([^)]+\)&#39;</span>, spec):</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            options = re.findall(<span class="stringliteral">&#39;\([^()]+\)&#39;</span>, spec)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <span class="keywordflow">for</span> option <span class="keywordflow">in</span> options:</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                spec = spec.replace(option,</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                                    random.choice(option[1:-1].split(<span class="stringliteral">&quot;|&quot;</span>)), 1)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">return</span> spec</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keyword">import</span> graphviz</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keyword">import</span> sys</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="namespacegrammar__parser_1_1cfgparser.html#a8c17657891cb6fac9077d45182d19dcf">  724</a></span>&#160;    grammar_file = sys.argv[1]</div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="namespacegrammar__parser_1_1cfgparser.html#a67dd590c752878b114c708a382b96cb4">  725</a></span>&#160;    rule = sys.argv[2]</div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="namespacegrammar__parser_1_1cfgparser.html#aa7ff86f3e26c3f5ba8427f1399404c31">  726</a></span>&#160;    depth = int(sys.argv[3])</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    </div>
<div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html">  728</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html">Visualizer</a>:</div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#afa5ea68de52b2d9ee62170cb8f7dd2e7">  729</a></span>&#160;        <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#afa5ea68de52b2d9ee62170cb8f7dd2e7">__init__</a>(self, grammarfile):</div>
<div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#a819b2f95e9b86ca0ee84fbca99a04516">  730</a></span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#a819b2f95e9b86ca0ee84fbca99a04516">parser</a> = CFGParser.fromfile(grammarfile)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#aca018f71017c3007abbf0c6c56dbba1e">  732</a></span>&#160;        <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#aca018f71017c3007abbf0c6c56dbba1e">get_completion_function</a>(self, name):</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">lambda</span> x: [<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Option.html">Option</a>(name, [<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html">Conjunct</a>(name.upper())])]</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#aeb5bbda408ca5442de1d21c2117eb250">  735</a></span>&#160;        <span class="keyword">def </span><a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#aeb5bbda408ca5442de1d21c2117eb250">test</a>(self, rule, depth):</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#a819b2f95e9b86ca0ee84fbca99a04516">parser</a>.has_completion_function = <span class="keyword">lambda</span> func_name: <span class="keyword">True</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#a819b2f95e9b86ca0ee84fbca99a04516">parser</a>.get_completion_function = self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#aca018f71017c3007abbf0c6c56dbba1e">get_completion_function</a></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            g = graphviz.Digraph(strict=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            self.<a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#a819b2f95e9b86ca0ee84fbca99a04516">parser</a>.visualize_options(g, rule, depth=int(depth))</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            g.render(<span class="stringliteral">&#39;options&#39;</span>, view=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="namespacegrammar__parser_1_1cfgparser.html#a4f309abc23df1f9a1709c344ae1ff343">  743</a></span>&#160;    tester = <a class="code" href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html">Visualizer</a>(grammar_file)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    tester.test(rule, depth=depth)</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1ParseError_html_a784550e1d4fc002a7239b7191f4dfa68"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1ParseError.html#a784550e1d4fc002a7239b7191f4dfa68">grammar_parser.cfgparser.ParseError.__init__</a></div><div class="ttdeci">def __init__(self, words, word_index)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00074">cfgparser.py:74</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html">grammar_parser.cfgparser.Tree</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00251">cfgparser.py:251</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_ac97872ab26911e60e7698ca3bc42a331"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac97872ab26911e60e7698ca3bc42a331">grammar_parser.cfgparser.Tree.parent</a></div><div class="ttdeci">parent</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00255">cfgparser.py:255</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1ParseError_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1ParseError.html">grammar_parser.cfgparser.ParseError</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00069">cfgparser.py:69</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_a5b6efa09aca8f4fb0e09e969cbe68983"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5b6efa09aca8f4fb0e09e969cbe68983">grammar_parser.cfgparser.Conjunct.graphviz_id</a></div><div class="ttdeci">def graphviz_id(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00191">cfgparser.py:191</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1bcolors_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1bcolors.html">grammar_parser.cfgparser.bcolors</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00084">cfgparser.py:84</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1GrammarError_html_adc06bb597b7aa249ac4b5afffd29eb9c"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html#adc06bb597b7aa249ac4b5afffd29eb9c">grammar_parser.cfgparser.GrammarError.__init__</a></div><div class="ttdeci">def __init__(self, message)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00065">cfgparser.py:65</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a00ddec73b160cf683c03668b5fc14506"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a00ddec73b160cf683c03668b5fc14506">grammar_parser.cfgparser.CFGParser.fromfile</a></div><div class="ttdeci">def fromfile(filename, parser=None)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00348">cfgparser.py:348</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a5db09b7fc5c2811e8682ae95871877da"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5db09b7fc5c2811e8682ae95871877da">grammar_parser.cfgparser.CFGParser._next_word</a></div><div class="ttdeci">def _next_word(self, TIdx, words)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00607">cfgparser.py:607</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_a4f73f695fd947ae09494550d12787b2b"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a4f73f695fd947ae09494550d12787b2b">grammar_parser.cfgparser.Tree.parent_idx</a></div><div class="ttdeci">parent_idx</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00256">cfgparser.py:256</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html">grammar_parser.cfgparser.Conjunct</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00163">cfgparser.py:163</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_a103f8a853272905570436c700c1013fa"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a103f8a853272905570436c700c1013fa">grammar_parser.cfgparser.Rule.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00206">cfgparser.py:206</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a52b852ab56b62708e6f7c31fba57b075"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a52b852ab56b62708e6f7c31fba57b075">grammar_parser.cfgparser.Option.graphviz_id</a></div><div class="ttdeci">def graphviz_id(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00149">cfgparser.py:149</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_a0ae7afd794e6e5cc4b7eb0a7a9dcd557"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a0ae7afd794e6e5cc4b7eb0a7a9dcd557">grammar_parser.cfgparser.Conjunct.pretty_print</a></div><div class="ttdeci">def pretty_print(self, level=0)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00184">cfgparser.py:184</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a2917cc849a8e7391270b22a8ca1c2341"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2917cc849a8e7391270b22a8ca1c2341">grammar_parser.cfgparser.CFGParser.has_completion_function</a></div><div class="ttdeci">def has_completion_function(self, func_name)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00641">cfgparser.py:641</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a6b4793b7a26193a27c12fe8db01be8fc"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a6b4793b7a26193a27c12fe8db01be8fc">grammar_parser.cfgparser.CFGParser.get_completion_function</a></div><div class="ttdeci">def get_completion_function(self, func_name)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00644">cfgparser.py:644</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html">grammar_parser.cfgparser.CFGParser</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00321">cfgparser.py:321</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_aeffed607010bb2ae519838fe75a4a3e5"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aeffed607010bb2ae519838fe75a4a3e5">grammar_parser.cfgparser.CFGParser.graphviz_id</a></div><div class="ttdeci">def graphviz_id()</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00648">cfgparser.py:648</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a5a27bfa1c404344a5f4eb4c0bc0f9fed"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a5a27bfa1c404344a5f4eb4c0bc0f9fed">grammar_parser.cfgparser.Option.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00109">cfgparser.py:109</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_ab62b1bc1784543b0b3b4324d36967cff"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab62b1bc1784543b0b3b4324d36967cff">grammar_parser.cfgparser.Conjunct.name</a></div><div class="ttdeci">name</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00170">cfgparser.py:170</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_adcfa74b8fffce5fc48ab02da73e59591"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#adcfa74b8fffce5fc48ab02da73e59591">grammar_parser.cfgparser.Rule.from_cfg_def</a></div><div class="ttdeci">def from_cfg_def(s)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00217">cfgparser.py:217</a></div></div>
<div class="ttc" id="anamespacegrammar__parser_1_1cfgparser_html_ac20401fd2a7ace93c6f0ad562fdeaddd"><div class="ttname"><a href="namespacegrammar__parser_1_1cfgparser.html#ac20401fd2a7ace93c6f0ad562fdeaddd">grammar_parser.cfgparser.parse_next_atom</a></div><div class="ttdeci">def parse_next_atom(s)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00295">cfgparser.py:295</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a55ed74b90773447f93550248c1e96cde"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a55ed74b90773447f93550248c1e96cde">grammar_parser.cfgparser.CFGParser.verify</a></div><div class="ttdeci">def verify(self, target=None)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00397">cfgparser.py:397</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_a5e0612956ac168dee0365707c9305d4d"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a5e0612956ac168dee0365707c9305d4d">grammar_parser.cfgparser.Conjunct.rsemantic</a></div><div class="ttdeci">rsemantic</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00171">cfgparser.py:171</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_ac993d3289549ea09504f5b80c3b2892f"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ac993d3289549ea09504f5b80c3b2892f">grammar_parser.cfgparser.Conjunct.__init__</a></div><div class="ttdeci">def __init__(self, name, rsemantic=&quot;&quot;, is_variable=False)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00166">cfgparser.py:166</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_ab7dd396710b7e13a34e41ca713bd773d"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#ab7dd396710b7e13a34e41ca713bd773d">grammar_parser.cfgparser.Conjunct.to_graphviz</a></div><div class="ttdeci">def to_graphviz(self, graph)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00194">cfgparser.py:194</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_a376c9d7ee5dafd12453cec24db21c1b8"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a376c9d7ee5dafd12453cec24db21c1b8">grammar_parser.cfgparser.Rule.__eq__</a></div><div class="ttdeci">def __eq__(self, other)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00210">cfgparser.py:210</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_a2068c84406418893ae5fdcfde156a71f"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#a2068c84406418893ae5fdcfde156a71f">grammar_parser.cfgparser.Conjunct.is_variable</a></div><div class="ttdeci">is_variable</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00172">cfgparser.py:172</a></div></div>
<div class="ttc" id="anamespacedragonfly__speech__recognition_1_1dragonfly__client_html_a5c5aeb1fdc09eb0375a6080813d84cd5"><div class="ttname"><a href="namespacedragonfly__speech__recognition_1_1dragonfly__client.html#a5c5aeb1fdc09eb0375a6080813d84cd5">dragonfly_speech_recognition.dragonfly_client.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="dragonfly__client_8py_source.html#l00013">dragonfly_client.py:13</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a61d849d538e2f9ffc8f470d11a9f1447"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a61d849d538e2f9ffc8f470d11a9f1447">grammar_parser.cfgparser.CFGParser.visualize_options</a></div><div class="ttdeci">def visualize_options(self, graph, target_rule, previous_words=None, depth=2)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00656">cfgparser.py:656</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_aa5319269960cfeb637d245fd3d20bb58"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aa5319269960cfeb637d245fd3d20bb58">grammar_parser.cfgparser.Rule.lname</a></div><div class="ttdeci">lname</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00203">cfgparser.py:203</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_ac65739f36ffba7470efc2dcdc9cdfb9e"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac65739f36ffba7470efc2dcdc9cdfb9e">grammar_parser.cfgparser.Tree.next</a></div><div class="ttdeci">def next(self, idx)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00258">cfgparser.py:258</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_ac55a568ce854a81c49a982dcb42f979a"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac55a568ce854a81c49a982dcb42f979a">grammar_parser.cfgparser.Tree.__init__</a></div><div class="ttdeci">def __init__(self, option)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00252">cfgparser.py:252</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_af7e6a85e72f32cb46c361a5e1aac1e8c"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#af7e6a85e72f32cb46c361a5e1aac1e8c">grammar_parser.cfgparser.Conjunct.__eq__</a></div><div class="ttdeci">def __eq__(self, other)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00179">cfgparser.py:179</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a8492c5295a01470ddb2acd08f810a783"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a8492c5295a01470ddb2acd08f810a783">grammar_parser.cfgparser.Option.from_cfg_def</a></div><div class="ttdeci">def from_cfg_def(option_definition, left_semantics)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00120">cfgparser.py:120</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_a6d95381c2c8a60d3b5feb1f21687bb52"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a6d95381c2c8a60d3b5feb1f21687bb52">grammar_parser.cfgparser.Rule.graphviz_id</a></div><div class="ttdeci">def graphviz_id(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00239">cfgparser.py:239</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a73608a0e8a0760fd66a2f91ee1d8af64"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a73608a0e8a0760fd66a2f91ee1d8af64">grammar_parser.cfgparser.Option.__eq__</a></div><div class="ttdeci">def __eq__(self, other)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00113">cfgparser.py:113</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_a29a018b68e000aa649392a0f45472d2d"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a29a018b68e000aa649392a0f45472d2d">grammar_parser.cfgparser.Tree.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00273">cfgparser.py:273</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a3fe0d023b2369c15b2e79e05d04c2c62"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a3fe0d023b2369c15b2e79e05d04c2c62">grammar_parser.cfgparser.Option.to_graphviz</a></div><div class="ttdeci">def to_graphviz(self, graph)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00154">cfgparser.py:154</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Visualizer_html_aeb5bbda408ca5442de1d21c2117eb250"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#aeb5bbda408ca5442de1d21c2117eb250">grammar_parser.cfgparser.Visualizer.test</a></div><div class="ttdeci">def test(self, rule, depth)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00735">cfgparser.py:735</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Visualizer_html_afa5ea68de52b2d9ee62170cb8f7dd2e7"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#afa5ea68de52b2d9ee62170cb8f7dd2e7">grammar_parser.cfgparser.Visualizer.__init__</a></div><div class="ttdeci">def __init__(self, grammarfile)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00729">cfgparser.py:729</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_aa9fd5a02b0a122ea5b2a3a31f6c2a985"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aa9fd5a02b0a122ea5b2a3a31f6c2a985">grammar_parser.cfgparser.CFGParser.check_rules</a></div><div class="ttdeci">def check_rules(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00381">cfgparser.py:381</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_ac49be2755bb51524148a9f3fbc74cd32"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#ac49be2755bb51524148a9f3fbc74cd32">grammar_parser.cfgparser.Tree.add_subtree</a></div><div class="ttdeci">def add_subtree(self, idx, tree)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00267">cfgparser.py:267</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_a44a8dc08970a562de31dd09f97231d92"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a44a8dc08970a562de31dd09f97231d92">grammar_parser.cfgparser.Rule.to_graphviz</a></div><div class="ttdeci">def to_graphviz(self, graph)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00242">cfgparser.py:242</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_a571dd35a82c6089c67cbbd2d2cd9371e"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a571dd35a82c6089c67cbbd2d2cd9371e">grammar_parser.cfgparser.Tree.pretty_print</a></div><div class="ttdeci">def pretty_print(self, level=0)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00277">cfgparser.py:277</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Conjunct_html_acd3c7bf3528e7e83c5979d2284643752"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Conjunct.html#acd3c7bf3528e7e83c5979d2284643752">grammar_parser.cfgparser.Conjunct.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00174">cfgparser.py:174</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a9c2b88ea4579ba8145a1edc7b8837e5b"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a9c2b88ea4579ba8145a1edc7b8837e5b">grammar_parser.cfgparser.Option.lsemantic</a></div><div class="ttdeci">lsemantic</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00103">cfgparser.py:103</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_aaa6835b88c634ec93877c28ba95c351c"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#aaa6835b88c634ec93877c28ba95c351c">grammar_parser.cfgparser.Rule.options</a></div><div class="ttdeci">options</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00204">cfgparser.py:204</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_afe39fe12f8245cf3d94e7fb631037386"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#afe39fe12f8245cf3d94e7fb631037386">grammar_parser.cfgparser.Tree.subtrees</a></div><div class="ttdeci">subtrees</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00254">cfgparser.py:254</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1GrammarError_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1GrammarError.html">grammar_parser.cfgparser.GrammarError</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00060">cfgparser.py:60</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a9c42f8838ff6b25b8234bd3250fd1d92"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a9c42f8838ff6b25b8234bd3250fd1d92">grammar_parser.cfgparser.CFGParser.fromstring</a></div><div class="ttdeci">def fromstring(string, parser=None)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00361">cfgparser.py:361</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a550ef374b0c5d4de75007eb74090ce5f"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a550ef374b0c5d4de75007eb74090ce5f">grammar_parser.cfgparser.CFGParser._parse</a></div><div class="ttdeci">def _parse(self, TIdx, words, word_index)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00521">cfgparser.py:521</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html">grammar_parser.cfgparser.Option</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00095">cfgparser.py:95</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a5ecdb519554b73b7afe02248bd5b54b6"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a5ecdb519554b73b7afe02248bd5b54b6">grammar_parser.cfgparser.CFGParser.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00343">cfgparser.py:343</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a2534c7f1443069198beb2d467e1f9fde"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a2534c7f1443069198beb2d467e1f9fde">grammar_parser.cfgparser.CFGParser.parse_raw</a></div><div class="ttdeci">def parse_raw(self, target, words, debug=False)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00472">cfgparser.py:472</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a1c694b10bca37bed8341b095c7262912"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a1c694b10bca37bed8341b095c7262912">grammar_parser.cfgparser.CFGParser.get_unwrapped</a></div><div class="ttdeci">def get_unwrapped(self, lname)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00678">cfgparser.py:678</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a01dd7b5dd2c19668d7bd427a1601ea86"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a01dd7b5dd2c19668d7bd427a1601ea86">grammar_parser.cfgparser.CFGParser.next_word</a></div><div class="ttdeci">def next_word(self, target, words)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00595">cfgparser.py:595</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_aba68ee3731d75db39f1b38f6dbd5e7a4"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#aba68ee3731d75db39f1b38f6dbd5e7a4">grammar_parser.cfgparser.Option.__init__</a></div><div class="ttdeci">def __init__(self, lsemantic=&quot;&quot;, conjs=None)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00099">cfgparser.py:99</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a402b1840f02b980e9c07b83a96b801a8"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a402b1840f02b980e9c07b83a96b801a8">grammar_parser.cfgparser.CFGParser.set_function</a></div><div class="ttdeci">def set_function(self, name, func)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00416">cfgparser.py:416</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_ae8a9718fb205eca40969c44fe0c7fa6b"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ae8a9718fb205eca40969c44fe0c7fa6b">grammar_parser.cfgparser.CFGParser.add_rule</a></div><div class="ttdeci">def add_rule(self, s)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00406">cfgparser.py:406</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a0d8ef5241b6b2a03b533a70b80ba8bf2"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a0d8ef5241b6b2a03b533a70b80ba8bf2">grammar_parser.cfgparser.Option.conjuncts</a></div><div class="ttdeci">conjuncts</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00105">cfgparser.py:105</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Option_html_a5b3731aa90e56a86ba46bd7ffcc0a472"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Option.html#a5b3731aa90e56a86ba46bd7ffcc0a472">grammar_parser.cfgparser.Option.pretty_print</a></div><div class="ttdeci">def pretty_print(self, level=0)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00136">cfgparser.py:136</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_a9a2d887a94b95974b9d77420425c36a1"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#a9a2d887a94b95974b9d77420425c36a1">grammar_parser.cfgparser.Rule.__init__</a></div><div class="ttdeci">def __init__(self, lname, options=None)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00202">cfgparser.py:202</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Visualizer_html_a819b2f95e9b86ca0ee84fbca99a04516"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#a819b2f95e9b86ca0ee84fbca99a04516">grammar_parser.cfgparser.Visualizer.parser</a></div><div class="ttdeci">parser</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00730">cfgparser.py:730</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a185e051b08bded47277321b278e33b5d"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a185e051b08bded47277321b278e33b5d">grammar_parser.cfgparser.CFGParser.parse</a></div><div class="ttdeci">def parse(self, target, words, debug=False)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00440">cfgparser.py:440</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Tree_html_a55e3d0f92e33115514bfc992ba7304e2"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Tree.html#a55e3d0f92e33115514bfc992ba7304e2">grammar_parser.cfgparser.Tree.option</a></div><div class="ttdeci">option</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00253">cfgparser.py:253</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Visualizer_html_aca018f71017c3007abbf0c6c56dbba1e"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html#aca018f71017c3007abbf0c6c56dbba1e">grammar_parser.cfgparser.Visualizer.get_completion_function</a></div><div class="ttdeci">def get_completion_function(self, name)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00732">cfgparser.py:732</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html">grammar_parser.cfgparser.Rule</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00201">cfgparser.py:201</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_acc313c251ed7b7b9981e4bec30dead0d"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acc313c251ed7b7b9981e4bec30dead0d">grammar_parser.cfgparser.CFGParser.functions</a></div><div class="ttdeci">functions</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00345">cfgparser.py:345</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_acaa69542bedb3bb2c1a0766ec811558e"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#acaa69542bedb3bb2c1a0766ec811558e">grammar_parser.cfgparser.CFGParser.get_semantics</a></div><div class="ttdeci">def get_semantics(self, tree)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00424">cfgparser.py:424</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_a937afc076896af0476cf3ae45ed66ea3"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#a937afc076896af0476cf3ae45ed66ea3">grammar_parser.cfgparser.CFGParser.to_graphviz</a></div><div class="ttdeci">def to_graphviz(self, graph)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00651">cfgparser.py:651</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_ab6a0c51e3d7c2afc29665e788488d423"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#ab6a0c51e3d7c2afc29665e788488d423">grammar_parser.cfgparser.CFGParser.rules</a></div><div class="ttdeci">rules</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00344">cfgparser.py:344</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1CFGParser_html_aef1f24105c012a19e4e826db915c04d2"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1CFGParser.html#aef1f24105c012a19e4e826db915c04d2">grammar_parser.cfgparser.CFGParser.get_random_sentence</a></div><div class="ttdeci">def get_random_sentence(self, lname)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00707">cfgparser.py:707</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Rule_html_ad70b915d5dfab98b1bf09d8ff37fdb02"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Rule.html#ad70b915d5dfab98b1bf09d8ff37fdb02">grammar_parser.cfgparser.Rule.pretty_print</a></div><div class="ttdeci">def pretty_print(self, level=0)</div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00231">cfgparser.py:231</a></div></div>
<div class="ttc" id="aclassgrammar__parser_1_1cfgparser_1_1Visualizer_html"><div class="ttname"><a href="classgrammar__parser_1_1cfgparser_1_1Visualizer.html">grammar_parser.cfgparser.Visualizer</a></div><div class="ttdef"><b>Definition:</b> <a href="cfgparser_8py_source.html#l00728">cfgparser.py:728</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 2 2025 04:46:22 for dragonfly_speech_recognition by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
