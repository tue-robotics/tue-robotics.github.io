<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="kaldi__demo_8py" kind="file" language="Python">
    <compoundname>kaldi_demo.py</compoundname>
    <innerclass refid="classkaldi__demo_1_1ExampleCustomRule" prot="public">kaldi_demo::ExampleCustomRule</innerclass>
    <innerclass refid="classkaldi__demo_1_1ExampleDictationRule" prot="public">kaldi_demo::ExampleDictationRule</innerclass>
    <innernamespace refid="namespacekaldi__demo">kaldi_demo</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacekaldi__demo" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/>__future__<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>print_function</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>logging,<sp/>os</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>dragonfly</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="7" refid="namespacekaldi__demo_1a7e1ecbf2a375219505be39d7cf2ea8a0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>logging.basicConfig(level=10)</highlight></codeline>
<codeline lineno="8"><highlight class="normal"><sp/><sp/><sp/><sp/>logging.getLogger(</highlight><highlight class="stringliteral">&apos;grammar.decode&apos;</highlight><highlight class="normal">).setLevel(20)</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><sp/><sp/>logging.getLogger(</highlight><highlight class="stringliteral">&apos;compound&apos;</highlight><highlight class="normal">).setLevel(20)</highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>logging.getLogger(&apos;kaldi&apos;).setLevel(30)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/>logging.getLogger(</highlight><highlight class="stringliteral">&apos;engine&apos;</highlight><highlight class="normal">).setLevel(10)</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/>logging.getLogger(</highlight><highlight class="stringliteral">&apos;kaldi&apos;</highlight><highlight class="normal">).setLevel(10)</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>logging.basicConfig(level=20)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedragonfly_1_1log" kindref="compound">dragonfly.log</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>setup_log</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacedragonfly_1_1log_1a63ebb656a7eac0e092eaf67bebccd865" kindref="member">setup_log</ref>()</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19" refid="classkaldi__demo_1_1ExampleCustomRule" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classkaldi__demo_1_1ExampleCustomRule" kindref="compound">ExampleCustomRule</ref>(<ref refid="classdragonfly_1_1grammar_1_1rule__compound_1_1CompoundRule" kindref="compound">dragonfly.CompoundRule</ref>):</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21" refid="classkaldi__demo_1_1ExampleCustomRule_1ac28f26b2c8a28a27e220d5210ef7b9e8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>spec<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;I<sp/>want<sp/>to<sp/>eat<sp/>&lt;food&gt;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="classkaldi__demo_1_1ExampleCustomRule_1aa296ab2b51f6e1ec888bc032464e5e13" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>extras<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dragonfly.Choice(</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;food&quot;</highlight><highlight class="normal">,<sp/>{</highlight><highlight class="stringliteral">&quot;(an<sp/>|<sp/>a<sp/>juicy)<sp/>apple&quot;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&quot;good&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;a<sp/>[greasy]<sp/>hamburger&quot;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&quot;bad&quot;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28" refid="classkaldi__demo_1_1ExampleCustomRule_1a94d21454cbd3a58b809edcf5339fcc30" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classkaldi__demo_1_1ExampleCustomRule_1a94d21454cbd3a58b809edcf5339fcc30" kindref="member">_process_recognition</ref>(self,<sp/>node,<sp/>extras):</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>good_or_bad<sp/>=<sp/>extras[</highlight><highlight class="stringliteral">&quot;food&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;That<sp/>is<sp/>a<sp/>%s<sp/>idea!&quot;</highlight><highlight class="normal"><sp/>%<sp/>good_or_bad)</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32" refid="classkaldi__demo_1_1ExampleDictationRule" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classkaldi__demo_1_1ExampleDictationRule" kindref="compound">ExampleDictationRule</ref>(<ref refid="classdragonfly_1_1grammar_1_1rule__mapping_1_1MappingRule" kindref="compound">dragonfly.MappingRule</ref>):</highlight></codeline>
<codeline lineno="33" refid="classkaldi__demo_1_1ExampleDictationRule_1a4c6a261787ef0fce4bc0eec4406b9a4c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>mapping<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;dictate<sp/>&lt;text&gt;&quot;</highlight><highlight class="normal">:<sp/>dragonfly.Function(</highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>text:<sp/>print(</highlight><highlight class="stringliteral">&quot;I<sp/>heard<sp/>%r!&quot;</highlight><highlight class="normal"><sp/>%<sp/>str(text))),</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="36" refid="classkaldi__demo_1_1ExampleDictationRule_1af3c2da560e515285aac551bcae31bf6b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>extras<sp/>=<sp/>[<sp/>dragonfly.Dictation(</highlight><highlight class="stringliteral">&quot;text&quot;</highlight><highlight class="normal">)<sp/>]</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Load<sp/>engine<sp/>before<sp/>instantiating<sp/>rules/grammars!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Set<sp/>any<sp/>configuration<sp/>options<sp/>here<sp/>as<sp/>keyword<sp/>arguments.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="namespacekaldi__demo_1a16fa481dfcc26766f1ad35a18c835445" refkind="member"><highlight class="normal">engine<sp/>=<sp/>dragonfly.get_engine(</highlight><highlight class="stringliteral">&quot;kaldi&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>model_dir=</highlight><highlight class="stringliteral">&apos;kaldi_model&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>tmp_dir=&apos;kaldi_tmp&apos;,<sp/><sp/>#<sp/>default<sp/>for<sp/>temporary<sp/>directory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>vad_aggressiveness=3,<sp/><sp/>#<sp/>default<sp/>aggressiveness<sp/>of<sp/>VAD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>vad_padding_ms=300,<sp/><sp/>#<sp/>default<sp/>ms<sp/>of<sp/>required<sp/>silence<sp/>surrounding<sp/>VAD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>input_device_index=None,<sp/><sp/>#<sp/>set<sp/>to<sp/>an<sp/>int<sp/>to<sp/>choose<sp/>a<sp/>non-default<sp/>microphone</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>cloud_dictation=None,<sp/><sp/>#<sp/>set<sp/>to<sp/>&apos;gcloud&apos;<sp/>to<sp/>use<sp/>cloud<sp/>dictation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal">)</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Call<sp/>connect()<sp/>now<sp/>that<sp/>the<sp/>engine<sp/>configuration<sp/>is<sp/>set.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal">engine.connect()</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52" refid="namespacekaldi__demo_1ab03e7c5d5620c41bcf54839e6dade86f" refkind="member"><highlight class="normal">grammar<sp/>=<sp/><ref refid="classdragonfly_1_1grammar_1_1grammar__base_1_1Grammar" kindref="compound">dragonfly.Grammar</ref>(name=</highlight><highlight class="stringliteral">&quot;mygrammar&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="53" refid="namespacekaldi__demo_1a43ad475c0b69d0d8277932cc6382a375" refkind="member"><highlight class="normal">rule<sp/>=<sp/><ref refid="classkaldi__demo_1_1ExampleCustomRule" kindref="compound">ExampleCustomRule</ref>()</highlight></codeline>
<codeline lineno="54"><highlight class="normal">grammar.add_rule(rule)</highlight></codeline>
<codeline lineno="55"><highlight class="normal">grammar.add_rule(<ref refid="classkaldi__demo_1_1ExampleDictationRule" kindref="compound">ExampleDictationRule</ref>())</highlight></codeline>
<codeline lineno="56"><highlight class="normal">grammar.load()</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal">print(</highlight><highlight class="stringliteral">&apos;Try<sp/>saying:<sp/>&quot;I<sp/>want<sp/>to<sp/>eat<sp/>an<sp/>apple&quot;<sp/>or<sp/>&quot;I<sp/>want<sp/>to<sp/>eat<sp/>a<sp/>greasy<sp/>hamburger&quot;<sp/>or<sp/>&quot;dictate<sp/>this<sp/>is<sp/>just<sp/>a<sp/>test&quot;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="59"><highlight class="normal">print(</highlight><highlight class="stringliteral">&quot;Listening...&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="60"><highlight class="normal">engine.do_recognition()</highlight></codeline>
    </programlisting>
    <location file="src/dragonfly_speech_recognition/dragonfly/dragonfly/examples/kaldi_demo.py"/>
  </compounddef>
</doxygen>
