<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="WorldModelROS_8cpp" kind="file" language="C++">
    <compoundname>WorldModelROS.cpp</compoundname>
    <includes refid="WorldModelROS_8h" local="yes">wire/WorldModelROS.h</includes>
    <includes refid="ClassModel_8h" local="yes">wire/core/ClassModel.h</includes>
    <includes refid="Property_8h" local="yes">wire/core/Property.h</includes>
    <includes refid="Evidence_8h" local="yes">wire/core/Evidence.h</includes>
    <includes refid="EvidenceSet_8h" local="yes">wire/core/EvidenceSet.h</includes>
    <includes refid="SemanticObject_8h" local="yes">wire/storage/SemanticObject.h</includes>
    <includes refid="ObjectModelParser_8h" local="yes">wire/util/ObjectModelParser.h</includes>
    <includes refid="Hypothesis_8h" local="yes">wire/logic/Hypothesis.h</includes>
    <includes refid="HypothesesTree_8h" local="yes">wire/logic/HypothesesTree.h</includes>
    <includes local="yes">boost/thread.hpp</includes>
    <includes local="no">list</includes>
    <incdepgraph>
      <node id="29">
        <label>wire/logic/Hypothesis.h</label>
        <link refid="Hypothesis_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>std_srvs/Empty.h</label>
      </node>
      <node id="25">
        <label>list</label>
        <link refid="cpp/header/list" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml"/>
      </node>
      <node id="13">
        <label>tf/transform_listener.h</label>
      </node>
      <node id="23">
        <label>vector</label>
        <link refid="cpp/header/vector" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml"/>
      </node>
      <node id="12">
        <label>problib/conversions.h</label>
        <link refid="conversions_8h.html" external="/home/docker/ros/noetic/system/build/docs/problib/tags"/>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>wire_msgs/WorldState.h</label>
      </node>
      <node id="7">
        <label>wire_msgs/WorldEvidence.h</label>
      </node>
      <node id="31">
        <label>boost/thread.hpp</label>
      </node>
      <node id="16">
        <label>wire/core/ClassModel.h</label>
        <link refid="ClassModel_8h"/>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>wire_msgs/ObjectEvidence.h</label>
      </node>
      <node id="15">
        <label>problib/pdfs/PMF.h</label>
        <link refid="PMF_8h.html" external="/home/docker/ros/noetic/system/build/docs/problib/tags"/>
      </node>
      <node id="24">
        <label>wire/storage/SemanticObject.h</label>
        <link refid="SemanticObject_8h"/>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>WorldModelROS.cpp</label>
        <link refid="WorldModelROS_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
        <childnode refid="20" relation="include">
        </childnode>
        <childnode refid="21" relation="include">
        </childnode>
        <childnode refid="22" relation="include">
        </childnode>
        <childnode refid="24" relation="include">
        </childnode>
        <childnode refid="26" relation="include">
        </childnode>
        <childnode refid="29" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
        <childnode refid="31" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
      </node>
      <node id="30">
        <label>wire/logic/HypothesesTree.h</label>
        <link refid="HypothesesTree_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>map</label>
        <link refid="cpp/header/map" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml"/>
      </node>
      <node id="18">
        <label>wire/core/IStateEstimator.h</label>
        <link refid="IStateEstimator_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
      </node>
      <node id="26">
        <label>wire/util/ObjectModelParser.h</label>
        <link refid="ObjectModelParser_8h"/>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="27" relation="include">
        </childnode>
        <childnode refid="28" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="20">
        <label>wire/core/Property.h</label>
        <link refid="Property_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>wire/WorldModelROS.h</label>
        <link refid="WorldModelROS_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
      <node id="27">
        <label>tinyxml2.h</label>
      </node>
      <node id="10">
        <label>wire_msgs/ObjectState.h</label>
      </node>
      <node id="14">
        <label>wire/storage/KnowledgeDatabase.h</label>
        <link refid="KnowledgeDatabase_8h"/>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>ros/ros.h</label>
      </node>
      <node id="21">
        <label>wire/core/Evidence.h</label>
        <link refid="Evidence_8h"/>
        <childnode refid="17" relation="include">
        </childnode>
      </node>
      <node id="22">
        <label>wire/core/EvidenceSet.h</label>
        <link refid="EvidenceSet_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="23" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>string</label>
        <link refid="cpp/header/string" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml"/>
      </node>
      <node id="19">
        <label>problib/pdfs/PDF.h</label>
        <link refid="PDF_8h.html" external="/home/docker/ros/noetic/system/build/docs/problib/tags"/>
      </node>
      <node id="17">
        <label>wire/core/PropertySet.h</label>
        <link refid="PropertySet_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
      </node>
      <node id="28">
        <label>pluginlib/class_loader.h</label>
      </node>
      <node id="3">
        <label>wire/core/datatypes.h</label>
        <link refid="datatypes_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="WorldModelROS_8h" kindref="compound">wire/WorldModelROS.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ClassModel_8h" kindref="compound">wire/core/ClassModel.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="Property_8h" kindref="compound">wire/core/Property.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="Evidence_8h" kindref="compound">wire/core/Evidence.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="EvidenceSet_8h" kindref="compound">wire/core/EvidenceSet.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="SemanticObject_8h" kindref="compound">wire/storage/SemanticObject.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ObjectModelParser_8h" kindref="compound">wire/util/ObjectModelParser.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="Hypothesis_8h" kindref="compound">wire/logic/Hypothesis.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="HypothesesTree_8h" kindref="compound">wire/logic/HypothesesTree.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;boost/thread.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="cpp/header/list" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">list</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal"><ref refid="namespacestd" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std</ref>;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal"><ref refid="namespacemhf" kindref="compound">mhf</ref>;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20" refid="classmhf_1_1WorldModelROS_1ab7d7971f3834b42b42970d9b52a65af4" refkind="member"><highlight class="normal">WorldModelROS::WorldModelROS(tf::TransformListener*<sp/>tf_listener)</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/>:<sp/><ref refid="world__model_8cpp_1ae8d34bb7b69faed3987577ea3885ae01" kindref="member">loop_rate_</ref>(20),<sp/>world_model_(0),<sp/><sp/>tf_listener_(tf_listener),<sp/>is_tf_owner_(false),<sp/>last_update_duration(0),</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>max_update_duration(0),<sp/>world_model_frame_id_(</highlight><highlight class="stringliteral">&quot;/map&quot;</highlight><highlight class="normal">),<sp/>output_frame_id_(</highlight><highlight class="stringliteral">&quot;/map&quot;</highlight><highlight class="normal">),<sp/>max_num_hyps_(100),<sp/>min_prob_ratio_(1e-10),</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>last_update_(0)<sp/>{</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a04d78efee0b41faddbf7e036c2914f89" kindref="member">initialize</ref>();</highlight></codeline>
<codeline lineno="25"><highlight class="normal">}</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27" refid="classmhf_1_1WorldModelROS_1a4ac5aa331a3c9eb04ed1fac9649efd71" refkind="member"><highlight class="normal"><ref refid="classmhf_1_1WorldModelROS_1a4ac5aa331a3c9eb04ed1fac9649efd71" kindref="member">WorldModelROS::~WorldModelROS</ref>()<sp/>{</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>delete<sp/>tf<sp/>listener</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classmhf_1_1WorldModelROS_1ab977e0397abc20b00ca3800dbc88bc75" kindref="member">is_tf_owner_</ref>)<sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1ae8373d65aa2268d1e37b6febcf25a9ff" kindref="member">tf_listener_</ref>;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>delete<sp/>multiple<sp/>hypothesis<sp/>filter_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>shutdown<sp/>subscribers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="cpp/container/list" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">list&lt;ros::Subscriber&gt;::iterator</ref><sp/>it<sp/>=<sp/><ref refid="classmhf_1_1WorldModelROS_1a131ee270b7be8ae69cc8a1730ef20727" kindref="member">subs_evidence_</ref>.<ref refid="cpp/container/list/begin" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">begin</ref>();<sp/>it<sp/>!=<sp/><ref refid="classmhf_1_1WorldModelROS_1a131ee270b7be8ae69cc8a1730ef20727" kindref="member">subs_evidence_</ref>.<ref refid="cpp/container/list/end" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">end</ref>();<sp/>++it)<sp/>{</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>it-&gt;shutdown();</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="41"><highlight class="normal">}</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43" refid="classmhf_1_1WorldModelROS_1a04d78efee0b41faddbf7e036c2914f89" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1a04d78efee0b41faddbf7e036c2914f89" kindref="member">WorldModelROS::initialize</ref>()<sp/>{</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>node<sp/>handle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>ros::NodeHandle<sp/>n(</highlight><highlight class="stringliteral">&quot;~&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>parameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/>n.getParam(</highlight><highlight class="stringliteral">&quot;world_model_frame&quot;</highlight><highlight class="normal">,<sp/><ref refid="classmhf_1_1WorldModelROS_1a587e3f82a058d1af687a60790f3d7157" kindref="member">world_model_frame_id_</ref>);</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/>n.getParam(</highlight><highlight class="stringliteral">&quot;output_frame&quot;</highlight><highlight class="normal">,<sp/><ref refid="classmhf_1_1WorldModelROS_1a70290173ff5aeb5ad624803051a9a36a" kindref="member">output_frame_id_</ref>);</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>n.getParam(</highlight><highlight class="stringliteral">&quot;max_num_hypotheses&quot;</highlight><highlight class="normal">,<sp/><ref refid="classmhf_1_1WorldModelROS_1a13d0f73dd84e57511be47f58801a0320" kindref="member">max_num_hyps_</ref>);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>n.getParam(</highlight><highlight class="stringliteral">&quot;min_probability_ratio&quot;</highlight><highlight class="normal">,<sp/><ref refid="classmhf_1_1WorldModelROS_1aa8dec0c04152d5537bb4321de068bf31" kindref="member">min_prob_ratio_</ref>);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>object_models_filename<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/>n.getParam(</highlight><highlight class="stringliteral">&quot;knowledge_filename&quot;</highlight><highlight class="normal">,<sp/>object_models_filename);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(object_models_filename<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR(</highlight><highlight class="stringliteral">&quot;Parameter<sp/>&apos;knowledge_filename&apos;<sp/>not<sp/>set.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Parse<sp/>object<sp/>models</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ObjectModelParser<sp/>parser(object_models_filename);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1ObjectModelParser" kindref="compound">ObjectModelParser</ref><sp/>parser(object_models_filename);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!parser.<ref refid="classmhf_1_1ObjectModelParser_1a6c26de40ba683034fc874b1ab0fe9dd8" kindref="member">parse</ref>(<ref refid="classmhf_1_1KnowledgeDatabase_1a95b7a82ae3f837ad5d1a926e711f939b" kindref="member">KnowledgeDatabase::getInstance</ref>()))<sp/>{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>parsing<sp/>failed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR_STREAM(</highlight><highlight class="stringliteral">&quot;While<sp/>parsing<sp/>&apos;&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>object_models_filename<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;&apos;:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="cpp/io/manip/endl" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">endl</ref><sp/>&lt;&lt;<sp/><ref refid="cpp/io/manip/endl" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">endl</ref><sp/>&lt;&lt;<sp/>parser.<ref refid="classmhf_1_1ObjectModelParser_1af6ebf1c3872ab73949ee4668ec755ddf" kindref="member">getErrorMessage</ref>());</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>tf<sp/>listener</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classmhf_1_1WorldModelROS_1ae8373d65aa2268d1e37b6febcf25a9ff" kindref="member">tf_listener_</ref>)<sp/>{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ae8373d65aa2268d1e37b6febcf25a9ff" kindref="member">tf_listener_</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>tf::TransformListener();</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ab977e0397abc20b00ca3800dbc88bc75" kindref="member">is_tf_owner_</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Service<sp/>for<sp/>resetting<sp/>the<sp/>world<sp/>model</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ad15b4cbc0aa87c53eea43610c0b5eb74" kindref="member">srv_reset_</ref><sp/>=<sp/>n.advertiseService(</highlight><highlight class="stringliteral">&quot;reset&quot;</highlight><highlight class="normal">,<sp/>&amp;<ref refid="classmhf_1_1WorldModelROS_1a618cf1dc62633f1e0416183f152e8d41" kindref="member">WorldModelROS::resetWorldModel</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Publishers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ab7fb80d5b5e212d01888747f0b9949d0" kindref="member">pub_wm_</ref><sp/>=<sp/>n.advertise&lt;wire_msgs::WorldState&gt;(</highlight><highlight class="stringliteral">&quot;/world_state&quot;</highlight><highlight class="normal">,<sp/>10);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>initialize<sp/>the<sp/>filter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1HypothesisTree" kindref="compound">HypothesisTree</ref>(<ref refid="classmhf_1_1WorldModelROS_1a13d0f73dd84e57511be47f58801a0320" kindref="member">max_num_hyps_</ref>,<sp/><ref refid="classmhf_1_1WorldModelROS_1aa8dec0c04152d5537bb4321de068bf31" kindref="member">min_prob_ratio_</ref>);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="86"><highlight class="normal">}</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="classmhf_1_1WorldModelROS_1af020824b502ab29bc9732823ceb7e474" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1af020824b502ab29bc9732823ceb7e474" kindref="member">WorldModelROS::registerEvidenceTopic</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="cpp/string/basic_string" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::string</ref>&amp;<sp/>topic_name)<sp/>{</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>ros::NodeHandle<sp/>n;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a131ee270b7be8ae69cc8a1730ef20727" kindref="member">subs_evidence_</ref>.<ref refid="cpp/container/list/push_back" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">push_back</ref>(n.subscribe(topic_name,<sp/>100,<sp/>&amp;<ref refid="classmhf_1_1WorldModelROS_1a7fc86bdc1bd433be4e332f4659836934" kindref="member">WorldModelROS::evidenceCallback</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="91"><highlight class="normal">}</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="classmhf_1_1WorldModelROS_1aa1da425464d500d695212a65bc3ecff9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1aa1da425464d500d695212a65bc3ecff9" kindref="member">WorldModelROS::startThreaded</ref>()<sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ad38f1e1efca315c10b14b4c1d9747150" kindref="member">processing_thread_</ref><sp/>=<sp/>boost::thread(boost::bind(&amp;<ref refid="classmhf_1_1WorldModelROS_1ab96b6e0e05e96819692166449c93c69b" kindref="member">WorldModelROS::start</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="95"><highlight class="normal">}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97" refid="classmhf_1_1WorldModelROS_1ab96b6e0e05e96819692166449c93c69b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1ab96b6e0e05e96819692166449c93c69b" kindref="member">WorldModelROS::start</ref>()<sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/>ros::Rate<sp/>r(<ref refid="classmhf_1_1WorldModelROS_1a2bb4b88c7df6a6de39684000923b65cd" kindref="member">loop_rate_</ref>);</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="cpp/algorithm/count" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(ros::ok())<sp/>{</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ros::spinOnce();</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ac4531208e6dbb6fd3d189f3c63232916" kindref="member">processEvidence</ref>(r.expectedCycleTime());</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a16789b7e33c1dd70d192643c487c5a71" kindref="member">publish</ref>();</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++<ref refid="cpp/algorithm/count" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">count</ref>;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="cpp/algorithm/count" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">count</ref><sp/>==<sp/>15)<sp/>{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//showStatistics();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cpp/algorithm/count" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>r.sleep();</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>ros::spinOnce();</highlight></codeline>
<codeline lineno="114"><highlight class="normal">}</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="classmhf_1_1WorldModelROS_1aea556e9e30652705f2c31edccf17de63" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1aea556e9e30652705f2c31edccf17de63" kindref="member">WorldModelROS::objectToMsg</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1SemanticObject" kindref="compound">SemanticObject</ref>&amp;<sp/>obj,<sp/>wire_msgs::ObjectState&amp;<sp/>msg)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>msg.ID<sp/>=<sp/>obj.<ref refid="classmhf_1_1SemanticObject_1a1135c67c92f139984464bfa0b8da5590" kindref="member">getID</ref>();</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="cpp/container/map" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">map&lt;Attribute, Property*&gt;</ref>&amp;<sp/>properties<sp/>=<sp/>obj.<ref refid="classmhf_1_1PropertySet_1a51d383aa8d68636ad95b4948e63f03d8" kindref="member">getPropertyMap</ref>();</highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<ref refid="cpp/container/map" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">map&lt;Attribute, Property*&gt;::const_iterator</ref><sp/>it_prop<sp/>=<sp/>properties.<ref refid="cpp/container/map/begin" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">begin</ref>();<sp/>it_prop<sp/>!=<sp/>properties.<ref refid="cpp/container/map/end" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">end</ref>();<sp/>++it_prop)<sp/>{</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1Property" kindref="compound">Property</ref>*<sp/>prop<sp/>=<sp/>it_prop-&gt;second;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wire_msgs::Property<sp/>prop_msg;</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prop_msg.attribute<sp/>=<sp/><ref refid="classmhf_1_1AttributeConv_1a13b2a5c9b52504ae9120ec9bcbc123cb" kindref="member">AttributeConv::attribute_str</ref>(it_prop-&gt;first);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacepbl_1a27c7ec453adb3a1a495911fa8f0d3e97" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::PDFtoMsg</ref>(prop-&gt;<ref refid="classmhf_1_1Property_1a772a122ae9af465ca03e09ada865da3d" kindref="member">getValue</ref>(),<sp/>prop_msg.pdf);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.properties.push_back(prop_msg);</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="131"><highlight class="normal">}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133" refid="classmhf_1_1WorldModelROS_1a30c68da967c77fad3b8e6bca25858ee6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1a30c68da967c77fad3b8e6bca25858ee6" kindref="member">WorldModelROS::hypothesisToMsg</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1Hypothesis" kindref="compound">Hypothesis</ref>&amp;<sp/>hyp,<sp/>wire_msgs::WorldState&amp;<sp/>msg)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacemhf_1ae209e58ac587543af50a25222aeda18e" kindref="member">ros::Time</ref><sp/><ref refid="cpp/chrono/c/time" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">time</ref><sp/>=<sp/>ros::Time::now();</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/>msg.header.frame_id<sp/>=<sp/><ref refid="classmhf_1_1WorldModelROS_1a587e3f82a058d1af687a60790f3d7157" kindref="member">world_model_frame_id_</ref>;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>msg.header.stamp<sp/>=<sp/><ref refid="cpp/chrono/c/time" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">time</ref>;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<ref refid="cpp/container/list" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">list&lt;SemanticObject*&gt;::const_iterator</ref><sp/>it<sp/>=<sp/>hyp.<ref refid="classmhf_1_1Hypothesis_1a9bef7d268c5a54350637d5634e498328" kindref="member">getObjects</ref>().begin();<sp/>it<sp/>!=<sp/>hyp.<ref refid="classmhf_1_1Hypothesis_1a9bef7d268c5a54350637d5634e498328" kindref="member">getObjects</ref>().end();<sp/>++it)<sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1SemanticObject" kindref="compound">SemanticObject</ref>*<sp/>obj_clone<sp/>=<sp/>(*it)-&gt;<ref refid="classmhf_1_1SemanticObject_1a517066aa0aaf9effaf3c1299f6e44195" kindref="member">clone</ref>();</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj_clone-&gt;<ref refid="classmhf_1_1PropertySet_1a31fd08eaacea40e59fad77aad81f94c0" kindref="member">propagate</ref>(<ref refid="cpp/chrono/c/time" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">time</ref>.toSec());</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wire_msgs::ObjectState<sp/>obj_msg;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classmhf_1_1WorldModelROS_1aea556e9e30652705f2c31edccf17de63" kindref="member">objectToMsg</ref>(*obj_clone,<sp/>obj_msg))<sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.objects.push_back(obj_msg);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>obj_clone;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="154"><highlight class="normal">}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156" refid="classmhf_1_1WorldModelROS_1abe44fc14b5cf17118bdf05e3a21f7442" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1abe44fc14b5cf17118bdf05e3a21f7442" kindref="member">WorldModelROS::transformPosition</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classpbl_1_1PDF" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::PDF</ref>&amp;<sp/>pdf_in,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal">&amp;<sp/>frame_in,<sp/><ref refid="classpbl_1_1Gaussian" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Gaussian</ref>&amp;<sp/>pdf_out)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classpbl_1_1Gaussian" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Gaussian</ref>*<sp/>gauss<sp/>=<sp/><ref refid="namespacepbl_1a838425c78a7dc7178e51e65feaa6b953" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::PDFtoGaussian</ref>(pdf_in);</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!gauss)<sp/>{</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR(</highlight><highlight class="stringliteral">&quot;Position<sp/>evidence<sp/>is<sp/>not<sp/>a<sp/>gaussian!&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>arma::vec&amp;<sp/>pos<sp/>=<sp/>gauss-&gt;<ref refid="classpbl_1_1Gaussian_1a2f26a0259dee3c92d0e0a1833e5f51f6" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">getMean</ref>();</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/>tf::Stamped&lt;tf::Point&gt;<sp/>pos_stamped(tf::Point(pos(0),<sp/>pos(1),<sp/>pos(2)),<sp/><ref refid="namespacemhf_1ae209e58ac587543af50a25222aeda18e" kindref="member">ros::Time</ref>(),<sp/>frame_in);</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tf::Stamped&lt;tf::Point&gt;<sp/>pos_stamped_world;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ae8373d65aa2268d1e37b6febcf25a9ff" kindref="member">tf_listener_</ref>-&gt;transformPoint(<ref refid="classmhf_1_1WorldModelROS_1a587e3f82a058d1af687a60790f3d7157" kindref="member">world_model_frame_id_</ref>,<sp/>pos_stamped,<sp/>pos_stamped_world);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpbl_1_1Vector3" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Vector3</ref><sp/>pos_world(pos_stamped_world.getX(),<sp/>pos_stamped_world.getY(),<sp/>pos_stamped_world.getZ());</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pdf_out.<ref refid="classpbl_1_1Gaussian_1a74f75fcd57464749974d556f1d8e59fb" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">setMean</ref>(pos_world);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>todo:<sp/>also<sp/>transform<sp/>covariance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pdf_out.<ref refid="classpbl_1_1Gaussian_1a0af83268e87c8813bc096c7056c1df91" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">setCovariance</ref>(gauss-&gt;<ref refid="classpbl_1_1Gaussian_1a7ea75ec90ec7e9026bb3265bd916ed93" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">getCovariance</ref>());</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(tf::TransformException&amp;<sp/>ex){</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR(</highlight><highlight class="stringliteral">&quot;[WORLD_MODEL]<sp/>%s&quot;</highlight><highlight class="normal">,ex.what());</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="182"><highlight class="normal">}</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184" refid="classmhf_1_1WorldModelROS_1aba68db7f6a8ee990430a5a18edb9b249" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1aba68db7f6a8ee990430a5a18edb9b249" kindref="member">WorldModelROS::transformOrientation</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classpbl_1_1PDF" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::PDF</ref>&amp;<sp/>pdf_in,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal">&amp;<sp/>frame_in,<sp/><ref refid="classpbl_1_1Gaussian" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Gaussian</ref>&amp;<sp/>pdf_out)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classpbl_1_1Gaussian" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Gaussian</ref>*<sp/>gauss<sp/>=<sp/><ref refid="namespacepbl_1a838425c78a7dc7178e51e65feaa6b953" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::PDFtoGaussian</ref>(pdf_in);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!gauss)<sp/>{</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR(</highlight><highlight class="stringliteral">&quot;Orientation<sp/>evidence<sp/>is<sp/>not<sp/>a<sp/>gaussian!&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>arma::vec&amp;<sp/>ori<sp/>=<sp/>gauss-&gt;<ref refid="classpbl_1_1Gaussian_1a2f26a0259dee3c92d0e0a1833e5f51f6" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">getMean</ref>();</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/>tf::Stamped&lt;tf::Quaternion&gt;<sp/>ori_stamped(tf::Quaternion(ori(0),<sp/>ori(1),<sp/>ori(2),<sp/>ori(3)),<sp/><ref refid="namespacemhf_1ae209e58ac587543af50a25222aeda18e" kindref="member">ros::Time</ref>(),<sp/>frame_in);</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tf::Stamped&lt;tf::Quaternion&gt;<sp/>ori_stamped_world;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ae8373d65aa2268d1e37b6febcf25a9ff" kindref="member">tf_listener_</ref>-&gt;transformQuaternion(<ref refid="classmhf_1_1WorldModelROS_1a587e3f82a058d1af687a60790f3d7157" kindref="member">world_model_frame_id_</ref>,<sp/>ori_stamped,<sp/>ori_stamped_world);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpbl_1_1Vector4" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Vector4</ref><sp/>ori_world(ori_stamped_world.getX(),<sp/>ori_stamped_world.getY(),<sp/>ori_stamped_world.getZ(),<sp/>ori_stamped_world.getW());</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pdf_out.<ref refid="classpbl_1_1Gaussian_1a74f75fcd57464749974d556f1d8e59fb" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">setMean</ref>(ori_world);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>todo:<sp/>also<sp/>transform<sp/>covariance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pdf_out.<ref refid="classpbl_1_1Gaussian_1a0af83268e87c8813bc096c7056c1df91" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">setCovariance</ref>(gauss-&gt;<ref refid="classpbl_1_1Gaussian_1a7ea75ec90ec7e9026bb3265bd916ed93" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">getCovariance</ref>());</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(tf::TransformException&amp;<sp/>ex){</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR(</highlight><highlight class="stringliteral">&quot;[WORLD<sp/>MODEL]<sp/>%s&quot;</highlight><highlight class="normal">,ex.what());</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="210"><highlight class="normal">}</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212" refid="classmhf_1_1WorldModelROS_1a7fc86bdc1bd433be4e332f4659836934" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1a7fc86bdc1bd433be4e332f4659836934" kindref="member">WorldModelROS::evidenceCallback</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wire_msgs::WorldEvidence::ConstPtr&amp;<sp/>world_evidence_msg)<sp/>{</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a408b9ab3f684956d16f44f8cdce8046f" kindref="member">evidence_buffer_</ref>.<ref refid="cpp/container/list/push_back" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">push_back</ref>(*world_evidence_msg);</highlight></codeline>
<codeline lineno="214"><highlight class="normal">}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216" refid="classmhf_1_1WorldModelROS_1ac4531208e6dbb6fd3d189f3c63232916" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1ac4531208e6dbb6fd3d189f3c63232916" kindref="member">WorldModelROS::processEvidence</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="namespacemhf_1a87afa4283038f8851f8d11a58c1be253" kindref="member">ros::Duration</ref><sp/>max_duration)<sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacemhf_1ae209e58ac587543af50a25222aeda18e" kindref="member">ros::Time</ref><sp/>start_time<sp/>=<sp/>ros::Time::now();</highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(!<ref refid="classmhf_1_1WorldModelROS_1a408b9ab3f684956d16f44f8cdce8046f" kindref="member">evidence_buffer_</ref>.<ref refid="cpp/container/list/empty" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">empty</ref>()<sp/>&amp;&amp;<sp/>ros::Time::now()<sp/>-<sp/>start_time<sp/>&lt;<sp/>max_duration)<sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacemhf_1ae209e58ac587543af50a25222aeda18e" kindref="member">ros::Time</ref><sp/>time_before_update<sp/>=<sp/>ros::Time::now();</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ac4531208e6dbb6fd3d189f3c63232916" kindref="member">processEvidence</ref>(<ref refid="classmhf_1_1WorldModelROS_1a408b9ab3f684956d16f44f8cdce8046f" kindref="member">evidence_buffer_</ref>.<ref refid="cpp/container/list/back" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">back</ref>());</highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a992bae93559d3580da35b98f2b9be962" kindref="member">last_update_duration</ref><sp/>=<sp/>(ros::Time::now().toSec()<sp/>-<sp/>time_before_update.toSec());</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1af6e02121ba29f53ab9fe7c1ab3461e49" kindref="member">max_update_duration</ref><sp/>=<sp/><ref refid="cpp/algorithm/max" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">max</ref>(<ref refid="classmhf_1_1WorldModelROS_1af6e02121ba29f53ab9fe7c1ab3461e49" kindref="member">max_update_duration</ref>,<sp/><ref refid="classmhf_1_1WorldModelROS_1a992bae93559d3580da35b98f2b9be962" kindref="member">last_update_duration</ref>);</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a408b9ab3f684956d16f44f8cdce8046f" kindref="member">evidence_buffer_</ref>.<ref refid="cpp/container/list/pop_back" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">pop_back</ref>();</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal">}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="233" refid="classmhf_1_1WorldModelROS_1ae25d57feba0f01eeaedbec3e1b1b627d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1ac4531208e6dbb6fd3d189f3c63232916" kindref="member">WorldModelROS::processEvidence</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wire_msgs::WorldEvidence&amp;<sp/>world_evidence_msg)<sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacemhf_1ae209e58ac587543af50a25222aeda18e" kindref="member">ros::Time</ref><sp/>current_time<sp/>=<sp/>ros::Time::now();</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(current_time<sp/>&lt;<sp/><ref refid="classmhf_1_1WorldModelROS_1a3970445f6f7a7dbf26a21eb11ec9631a" kindref="member">last_update_</ref>)<sp/>{</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_WARN(</highlight><highlight class="stringliteral">&quot;Saw<sp/>a<sp/>negative<sp/>time<sp/>change<sp/>of<sp/>%f<sp/>seconds;<sp/>resetting<sp/>the<sp/>world<sp/>model.&quot;</highlight><highlight class="normal">,<sp/>(current_time<sp/>-<sp/><ref refid="classmhf_1_1WorldModelROS_1a3970445f6f7a7dbf26a21eb11ec9631a" kindref="member">last_update_</ref>).toSec());</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1HypothesisTree" kindref="compound">HypothesisTree</ref>(<ref refid="classmhf_1_1WorldModelROS_1a13d0f73dd84e57511be47f58801a0320" kindref="member">max_num_hyps_</ref>,<sp/><ref refid="classmhf_1_1WorldModelROS_1aa8dec0c04152d5537bb4321de068bf31" kindref="member">min_prob_ratio_</ref>);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a3970445f6f7a7dbf26a21eb11ec9631a" kindref="member">last_update_</ref><sp/>=<sp/>current_time;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>reset<sp/>the<sp/>warnings<sp/>stringstream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a40b51dafeb85f4e2a5c6993e668925f2" kindref="member">warnings_</ref>.<ref refid="cpp/io/basic_stringstream/str" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">str</ref>(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1EvidenceSet" kindref="compound">EvidenceSet</ref><sp/>evidence_set;</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cpp/container/list" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">std::list&lt;Evidence*&gt;</ref><sp/>measurements_mem;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="cpp/container/vector" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">vector&lt;wire_msgs::ObjectEvidence&gt;</ref>&amp;<sp/>object_evidence<sp/>=<sp/>world_evidence_msg.object_evidence;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<ref refid="cpp/container/vector" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">vector&lt;wire_msgs::ObjectEvidence&gt;::const_iterator</ref><sp/>it_ev<sp/>=<sp/>object_evidence.<ref refid="cpp/container/vector/begin" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">begin</ref>();<sp/>it_ev<sp/>!=<sp/>object_evidence.<ref refid="cpp/container/vector/end" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">end</ref>();<sp/>++it_ev)<sp/>{</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wire_msgs::ObjectEvidence&amp;<sp/>evidence<sp/>=<sp/>(*it_ev);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Evidence*<sp/>meas<sp/>=<sp/>new<sp/>Evidence(world_evidence_msg-&gt;header.stamp.toSec(),<sp/>evidence.certainty,<sp/>evidence.negative);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1Evidence" kindref="compound">Evidence</ref>*<sp/>meas<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1Evidence" kindref="compound">Evidence</ref>(current_time.toSec());</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>measurements_mem.<ref refid="cpp/container/list/push_back" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">push_back</ref>(meas);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>position_ok<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<ref refid="cpp/container/vector" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">vector&lt;wire_msgs::Property&gt;::const_iterator</ref><sp/>it_prop<sp/>=<sp/>evidence.properties.<ref refid="cpp/container/vector/begin" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">begin</ref>();<sp/>it_prop<sp/>!=<sp/>evidence.properties.end();<sp/>++it_prop<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wire_msgs::Property&amp;<sp/>prop<sp/>=<sp/>*it_prop;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpbl_1_1PDF" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::PDF</ref>*<sp/>pdf<sp/>=<sp/><ref refid="namespacepbl_1add0e4e7594300cd53e837e20e5549fa4" kindref="member" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::msgToPDF</ref>(prop.pdf);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pdf)<sp/>{</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(prop.attribute<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;position&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpbl_1_1Gaussian" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Gaussian</ref><sp/>pos_pdf(3);</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classmhf_1_1WorldModelROS_1abe44fc14b5cf17118bdf05e3a21f7442" kindref="member">transformPosition</ref>(*pdf,<sp/>world_evidence_msg.header.frame_id,<sp/>pos_pdf))<sp/>{</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>position<sp/>is<sp/>a<sp/>necessary<sp/>property.<sp/>If<sp/>the<sp/>transform<sp/>was<sp/>not<sp/>successful,<sp/>abort<sp/>and<sp/>don&apos;t<sp/>use<sp/>the<sp/>evidence</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position_ok<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>meas-&gt;<ref refid="classmhf_1_1PropertySet_1a873cfcb7c51cea17521c03424f6aa55c" kindref="member">addProperty</ref>(<ref refid="classmhf_1_1AttributeConv_1a0dc9d14b0d90ebdb8ec6ef8a77efa32f" kindref="member">AttributeConv::attribute</ref>(prop.attribute),<sp/>pos_pdf);</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(prop.attribute<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;orientation&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpbl_1_1Gaussian" kindref="compound" external="/home/docker/ros/noetic/system/build/docs/problib/tags">pbl::Gaussian</ref><sp/>ori_pdf(4);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classmhf_1_1WorldModelROS_1aba68db7f6a8ee990430a5a18edb9b249" kindref="member">transformOrientation</ref>(*pdf,<sp/>world_evidence_msg.header.frame_id,<sp/>ori_pdf))<sp/>{</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>meas-&gt;<ref refid="classmhf_1_1PropertySet_1a873cfcb7c51cea17521c03424f6aa55c" kindref="member">addProperty</ref>(<ref refid="classmhf_1_1AttributeConv_1a0dc9d14b0d90ebdb8ec6ef8a77efa32f" kindref="member">AttributeConv::attribute</ref>(prop.attribute),<sp/>ori_pdf);</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>meas-&gt;<ref refid="classmhf_1_1PropertySet_1a873cfcb7c51cea17521c03424f6aa55c" kindref="member">addProperty</ref>(<ref refid="classmhf_1_1AttributeConv_1a0dc9d14b0d90ebdb8ec6ef8a77efa32f" kindref="member">AttributeConv::attribute</ref>(prop.attribute),<sp/>*pdf);</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>pdf;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR_STREAM(</highlight><highlight class="stringliteral">&quot;For<sp/>attribute<sp/>&apos;&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>prop.attribute<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;&apos;:<sp/>malformed<sp/>pdf:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>prop.pdf);</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(position_ok)<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evidence_set.<ref refid="classmhf_1_1EvidenceSet_1a256771a9cc4fa9aca547bc3c9e892df3" kindref="member">add</ref>(meas);</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_ERROR(</highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>transform<sp/>position.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="comment">//<sp/>end<sp/>iteration<sp/>over<sp/>object<sp/>evidence<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>-&gt;<ref refid="classmhf_1_1HypothesisTree_1a33d44e8dcac982ffaba06edf9bb57abc" kindref="member">addEvidence</ref>(evidence_set);</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<ref refid="cpp/container/list" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">list&lt;Evidence*&gt;::iterator</ref><sp/>it<sp/>=<sp/>measurements_mem.<ref refid="cpp/container/list/begin" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">begin</ref>();<sp/>it<sp/>!=<sp/>measurements_mem.<ref refid="cpp/container/list/end" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">end</ref>();<sp/>++it)<sp/>{</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>(*it);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="302"><highlight class="normal">}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304" refid="classmhf_1_1WorldModelROS_1a618cf1dc62633f1e0416183f152e8d41" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1a618cf1dc62633f1e0416183f152e8d41" kindref="member">WorldModelROS::resetWorldModel</ref>(std_srvs::Empty::Request&amp;<sp/>req,<sp/>std_srvs::Empty::Response&amp;<sp/>res)<sp/>{</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1HypothesisTree" kindref="compound">HypothesisTree</ref>(<ref refid="classmhf_1_1WorldModelROS_1a13d0f73dd84e57511be47f58801a0320" kindref="member">max_num_hyps_</ref>,<sp/><ref refid="classmhf_1_1WorldModelROS_1aa8dec0c04152d5537bb4321de068bf31" kindref="member">min_prob_ratio_</ref>);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="308"><highlight class="normal">}</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310" refid="classmhf_1_1WorldModelROS_1a16789b7e33c1dd70d192643c487c5a71" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1a16789b7e33c1dd70d192643c487c5a71" kindref="member">WorldModelROS::publish</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>wire_msgs::WorldState<sp/>map_world_msg;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1a30c68da967c77fad3b8e6bca25858ee6" kindref="member">hypothesisToMsg</ref>(<ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>-&gt;<ref refid="classmhf_1_1HypothesisTree_1aafa94fabe3ddbcd2349ec5b98d194f60" kindref="member">getMAPHypothesis</ref>(),<sp/>map_world_msg);</highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Publish<sp/>results</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1ab7fb80d5b5e212d01888747f0b9949d0" kindref="member">pub_wm_</ref>.publish(map_world_msg);</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal">}</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319" refid="classmhf_1_1WorldModelROS_1ad0a8d868cfae3972a65a7326491d3c8f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="cpp/container/list" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">list&lt;SemanticObject*&gt;</ref>&amp;<sp/><ref refid="classmhf_1_1WorldModelROS_1ad0a8d868cfae3972a65a7326491d3c8f" kindref="member">WorldModelROS::getMAPObjects</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>-&gt;<ref refid="classmhf_1_1HypothesisTree_1a7e7538fd589b425b28fffe658fb08eb9" kindref="member">getMAPObjects</ref>();</highlight></codeline>
<codeline lineno="321"><highlight class="normal">}</highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323" refid="classmhf_1_1WorldModelROS_1ac73e50d1eed5c8e2a5c3fd87767c0063" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classmhf_1_1WorldModelROS_1ac73e50d1eed5c8e2a5c3fd87767c0063" kindref="member">WorldModelROS::showStatistics</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cpp/io/c/fprintf" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">printf</ref>(</highlight><highlight class="stringliteral">&quot;*****<sp/>%f<sp/>*****\n&quot;</highlight><highlight class="normal">,<sp/>ros::Time::now().toSec());</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>-&gt;<ref refid="classmhf_1_1HypothesisTree_1a3a93aed422f03f0874a62e564fca150e" kindref="member">showStatistics</ref>();</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cpp/io/cout" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">cout</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Num<sp/>MAP<sp/>objects:<sp/><sp/><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="classmhf_1_1WorldModelROS_1afd637971d535d9097cf5c3143dbb770a" kindref="member">world_model_</ref>-&gt;<ref refid="classmhf_1_1HypothesisTree_1a7e7538fd589b425b28fffe658fb08eb9" kindref="member">getMAPObjects</ref>().size()<sp/>&lt;&lt;<sp/><ref refid="cpp/io/manip/endl" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">endl</ref>;</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cpp/io/cout" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">cout</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Last<sp/>update:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="classmhf_1_1WorldModelROS_1a992bae93559d3580da35b98f2b9be962" kindref="member">last_update_duration</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>seconds&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="cpp/io/manip/endl" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">endl</ref>;</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cpp/io/cout" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">cout</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Max<sp/>update:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="classmhf_1_1WorldModelROS_1af6e02121ba29f53ab9fe7c1ab3461e49" kindref="member">max_update_duration</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>seconds&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="cpp/io/manip/endl" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">endl</ref>;</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cpp/io/cout" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">cout</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Evidence<sp/>buffer<sp/>size:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="classmhf_1_1WorldModelROS_1a408b9ab3f684956d16f44f8cdce8046f" kindref="member">evidence_buffer_</ref>.<ref refid="cpp/container/list/size" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">size</ref>()<sp/>&lt;&lt;<sp/><ref refid="cpp/io/manip/endl" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">endl</ref>;</highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="332"><highlight class="comment"><sp/><sp/><sp/><sp/>const<sp/>list&lt;Hypothesis*&gt;&amp;<sp/>hyp_list<sp/>=<sp/>world_model_-&gt;getHypotheses();</highlight></codeline>
<codeline lineno="333"><highlight class="comment"><sp/><sp/><sp/><sp/>for(list&lt;Hypothesis*<sp/>&gt;::const_iterator<sp/>it_hyp<sp/>=<sp/>hyp_list.begin();<sp/>it_hyp<sp/>!=<sp/>hyp_list.end();<sp/>++it_hyp)<sp/>{</highlight></codeline>
<codeline lineno="334"><highlight class="comment"></highlight></codeline>
<codeline lineno="335"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>const<sp/>list&lt;SemanticObject*&gt;&amp;<sp/>objs<sp/>=<sp/>(*it_hyp)-&gt;getObjects();</highlight></codeline>
<codeline lineno="336"><highlight class="comment"></highlight></codeline>
<codeline lineno="337"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>double<sp/>hyp_prob<sp/>=<sp/>(*it_hyp)-&gt;getProbability();</highlight></codeline>
<codeline lineno="338"><highlight class="comment"></highlight></codeline>
<codeline lineno="339"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cout<sp/>&lt;&lt;<sp/>&quot;Hyp<sp/>P<sp/>=<sp/>&quot;<sp/>&lt;&lt;<sp/>hyp_prob<sp/>&lt;&lt;<sp/>&quot;:<sp/>&quot;<sp/>&lt;&lt;<sp/>objs.size()<sp/>&lt;&lt;<sp/>&quot;<sp/>object(s)&quot;<sp/>&lt;&lt;<sp/>endl;</highlight></codeline>
<codeline lineno="340"><highlight class="comment"></highlight></codeline>
<codeline lineno="341"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="342"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classmhf_1_1WorldModelROS_1a40b51dafeb85f4e2a5c6993e668925f2" kindref="member">warnings_</ref>.<ref refid="cpp/io/basic_stringstream/str" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">str</ref>().empty())<sp/>{</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ROS_WARN_STREAM(<ref refid="classmhf_1_1WorldModelROS_1a40b51dafeb85f4e2a5c6993e668925f2" kindref="member">warnings_</ref>.<ref refid="cpp/io/basic_stringstream/str" kindref="compound" external="/home/docker/.local/lib/python3.8/site-packages/catkin_tools_document/external/cppreference-doxygen-web.tag.xml">str</ref>());</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="347"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="src/WorldModelROS.cpp"/>
  </compounddef>
</doxygen>
