<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rgbd_image_buffer: rgbd::ImageBuffer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rgbd_image_buffer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacergbd.html">rgbd</a></li><li class="navelem"><a class="el" href="classrgbd_1_1ImageBuffer.html">ImageBuffer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classrgbd_1_1ImageBuffer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rgbd::ImageBuffer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classrgbd_1_1ImageBuffer.html" title="The ImageBuffer class provides a buffer to synchronise rgbd images with sensor positions....">ImageBuffer</a> class provides a buffer to synchronise rgbd images with sensor positions. Images are stored until they are removed from the buffer or until a certain amount of time has passed.  
 <a href="classrgbd_1_1ImageBuffer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9a1ce005603ab3aa1844d4efcd2117b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#ac9a1ce005603ab3aa1844d4efcd2117b">ImageBuffer</a> ()</td></tr>
<tr class="separator:ac9a1ce005603ab3aa1844d4efcd2117b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a69eea8b9b7fcc2bba5d9681457958"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a44a69eea8b9b7fcc2bba5d9681457958">initialize</a> (const <a class="elRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;topic, const <a class="elRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;root_frame=&quot;map&quot;, const float worker_thread_frequency=20)</td></tr>
<tr class="memdesc:a44a69eea8b9b7fcc2bba5d9681457958"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the buffer.  <a href="classrgbd_1_1ImageBuffer.html#a44a69eea8b9b7fcc2bba5d9681457958">More...</a><br /></td></tr>
<tr class="separator:a44a69eea8b9b7fcc2bba5d9681457958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dcce8079cd2748e448e6c91a3df4c7e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a3dcce8079cd2748e448e6c91a3df4c7e">nextImage</a> (<a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a> &amp;image, <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;sensor_pose)</td></tr>
<tr class="memdesc:a3dcce8079cd2748e448e6c91a3df4c7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the most recent combination of image and transform, provided it is different from the previous time the function was called.  <a href="classrgbd_1_1ImageBuffer.html#a3dcce8079cd2748e448e6c91a3df4c7e">More...</a><br /></td></tr>
<tr class="separator:a3dcce8079cd2748e448e6c91a3df4c7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3858657267ea27205538d9773fb3452"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#af3858657267ea27205538d9773fb3452">waitForRecentImage</a> (<a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a> &amp;image, <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;sensor_pose, double timeout_sec, double check_rate)</td></tr>
<tr class="memdesc:af3858657267ea27205538d9773fb3452"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until a new image with transform is found. Returns false if no image or TF could be found within 'timeout_sec' seconds. But will always give it one try, both to get the image and to get TF.  <a href="classrgbd_1_1ImageBuffer.html#af3858657267ea27205538d9773fb3452">More...</a><br /></td></tr>
<tr class="separator:af3858657267ea27205538d9773fb3452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73fff6ba9aac1138261c74f2a4efd135"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a73fff6ba9aac1138261c74f2a4efd135">waitForRecentImage</a> (<a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a> &amp;image, <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;sensor_pose, double timeout_sec, uint timeout_tries=25u)</td></tr>
<tr class="memdesc:a73fff6ba9aac1138261c74f2a4efd135"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until a new image with transform is found. Returns false if no image or TF could be found within 'timeout_sec' seconds. But will always give it one try, both to get the image and to get TF.  <a href="classrgbd_1_1ImageBuffer.html#a73fff6ba9aac1138261c74f2a4efd135">More...</a><br /></td></tr>
<tr class="separator:a73fff6ba9aac1138261c74f2a4efd135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ccba23c66bacca893bbd048e1ba0f97"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a0ccba23c66bacca893bbd048e1ba0f97">~ImageBuffer</a> ()</td></tr>
<tr class="separator:a0ccba23c66bacca893bbd048e1ba0f97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:adaa29c0bf5f276d42cf636a1b30c5331"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#adaa29c0bf5f276d42cf636a1b30c5331">getMostRecentImageTF</a> ()</td></tr>
<tr class="memdesc:adaa29c0bf5f276d42cf636a1b30c5331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates over the buffer and tries to get TF for the most recent image. Deletes image and all older images when succesful or when image is too old from the buffer.  <a href="classrgbd_1_1ImageBuffer.html#adaa29c0bf5f276d42cf636a1b30c5331">More...</a><br /></td></tr>
<tr class="separator:adaa29c0bf5f276d42cf636a1b30c5331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5c13e98fbeb51095d923d3007a589f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#ac5c13e98fbeb51095d923d3007a589f8">workerThreadFunc</a> (const float frequency=20)</td></tr>
<tr class="memdesc:ac5c13e98fbeb51095d923d3007a589f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls <a class="el" href="classrgbd_1_1ImageBuffer.html#adaa29c0bf5f276d42cf636a1b30c5331" title="Iterates over the buffer and tries to get TF for the most recent image. Deletes image and all older i...">ImageBuffer::getMostRecentImageTF</a> on the specified frequency.  <a href="classrgbd_1_1ImageBuffer.html#ac5c13e98fbeb51095d923d3007a589f8">More...</a><br /></td></tr>
<tr class="separator:ac5c13e98fbeb51095d923d3007a589f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6f9617d602988db55378105541a2f349"><td class="memItemLeft" align="right" valign="top">ros::CallbackQueue&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a6f9617d602988db55378105541a2f349">cb_queue_</a></td></tr>
<tr class="separator:a6f9617d602988db55378105541a2f349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d5343909f01cbbb86f6eeea444c744"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/forward_list.html">std::forward_list</a>&lt; <a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a57d5343909f01cbbb86f6eeea444c744">image_buffer_</a></td></tr>
<tr class="memdesc:a57d5343909f01cbbb86f6eeea444c744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Newer images should be pushed on the front. This will result in the front being the most recent and the back being the oldest.  <a href="classrgbd_1_1ImageBuffer.html#a57d5343909f01cbbb86f6eeea444c744">More...</a><br /></td></tr>
<tr class="separator:a57d5343909f01cbbb86f6eeea444c744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c776f137e740138be93cdf4380e9bf2"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt; <a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a>, <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a9c776f137e740138be93cdf4380e9bf2">recent_image_</a></td></tr>
<tr class="separator:a9c776f137e740138be93cdf4380e9bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e1a1840af63ff0533c95026f0b65900"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/thread/mutex.html">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a1e1a1840af63ff0533c95026f0b65900">recent_image_mutex_</a></td></tr>
<tr class="memdesc:a1e1a1840af63ff0533c95026f0b65900"><td class="mdescLeft">&#160;</td><td class="mdescRight">For protecting <a class="el" href="classrgbd_1_1ImageBuffer.html#a9c776f137e740138be93cdf4380e9bf2">ImageBuffer::recent_image_</a>.  <a href="classrgbd_1_1ImageBuffer.html#a1e1a1840af63ff0533c95026f0b65900">More...</a><br /></td></tr>
<tr class="separator:a1e1a1840af63ff0533c95026f0b65900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cbf41f01986ec9397714cebb64f454f"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="elRef" href="../../rgbd/html/classrgbd_1_1Client.html">rgbd::Client</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a9cbf41f01986ec9397714cebb64f454f">rgbd_client_</a></td></tr>
<tr class="separator:a9cbf41f01986ec9397714cebb64f454f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48a9aafee372e0d80269420e415eaeb4"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a48a9aafee372e0d80269420e415eaeb4">root_frame_</a></td></tr>
<tr class="separator:a48a9aafee372e0d80269420e415eaeb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa585409de6fb2e9c3ace6dc5c93c1818"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#aa585409de6fb2e9c3ace6dc5c93c1818">shutdown_</a></td></tr>
<tr class="separator:aa585409de6fb2e9c3ace6dc5c93c1818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c97af830778f38a09c1c594fb2b81a4"><td class="memItemLeft" align="right" valign="top">tf2_ros::Buffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a7c97af830778f38a09c1c594fb2b81a4">tf_buffer_</a></td></tr>
<tr class="separator:a7c97af830778f38a09c1c594fb2b81a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde126b740beed96f98c4c82dc3948fb"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; tf2_ros::TransformListener &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#abde126b740beed96f98c4c82dc3948fb">tf_listener_</a></td></tr>
<tr class="separator:abde126b740beed96f98c4c82dc3948fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99726f483025ce4ccf493304c2c4cbe3"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="elRef" href="https://en.cppreference.com/w/cpp/thread/thread.html">std::thread</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrgbd_1_1ImageBuffer.html#a99726f483025ce4ccf493304c2c4cbe3">worker_thread_ptr_</a></td></tr>
<tr class="separator:a99726f483025ce4ccf493304c2c4cbe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classrgbd_1_1ImageBuffer.html" title="The ImageBuffer class provides a buffer to synchronise rgbd images with sensor positions....">ImageBuffer</a> class provides a buffer to synchronise rgbd images with sensor positions. Images are stored until they are removed from the buffer or until a certain amount of time has passed. </p>

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00031">31</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac9a1ce005603ab3aa1844d4efcd2117b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a1ce005603ab3aa1844d4efcd2117b">&#9670;&nbsp;</a></span>ImageBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rgbd::ImageBuffer::ImageBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00020">20</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<a id="a0ccba23c66bacca893bbd048e1ba0f97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ccba23c66bacca893bbd048e1ba0f97">&#9670;&nbsp;</a></span>~ImageBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rgbd::ImageBuffer::~ImageBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00026">26</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adaa29c0bf5f276d42cf636a1b30c5331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaa29c0bf5f276d42cf636a1b30c5331">&#9670;&nbsp;</a></span>getMostRecentImageTF()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rgbd::ImageBuffer::getMostRecentImageTF </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterates over the buffer and tries to get TF for the most recent image. Deletes image and all older images when succesful or when image is too old from the buffer. </p>
<dl class="section return"><dt>Returns</dt><dd>Indicates whether the most recent image has been updated </dd></dl>

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00157">157</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<a id="a44a69eea8b9b7fcc2bba5d9681457958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44a69eea8b9b7fcc2bba5d9681457958">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rgbd::ImageBuffer::initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>root_frame</em> = <code>&quot;map&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>worker_thread_frequency</em> = <code>20</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>ros topic on which the rgbd images are published </td></tr>
    <tr><td class="paramname">root_frame</td><td>root frame to calculate sensor pose relative to (default: map) </td></tr>
    <tr><td class="paramname">worker_thread_frequency</td><td>frequency at which the worker thread updates the most recent image (default: 20) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00035">35</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<a id="a3dcce8079cd2748e448e6c91a3df4c7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dcce8079cd2748e448e6c91a3df4c7e">&#9670;&nbsp;</a></span>nextImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rgbd::ImageBuffer::nextImage </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_pose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the most recent combination of image and transform, provided it is different from the previous time the function was called. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">image</td><td>rgbd image to write the next image to. Iff a next image is found </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sensor_pose</td><td>will be filled with the sensor pose corresponding to the next image. Iff a next image is found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether or not a novel image is available </dd></dl>

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00138">138</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<a id="af3858657267ea27205538d9773fb3452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3858657267ea27205538d9773fb3452">&#9670;&nbsp;</a></span>waitForRecentImage() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rgbd::ImageBuffer::waitForRecentImage </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>timeout_sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>check_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks until a new image with transform is found. Returns false if no image or TF could be found within 'timeout_sec' seconds. But will always give it one try, both to get the image and to get TF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">image</td><td>rgbd image to write the next image to. Iff a next image is found </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sensor_pose</td><td>will be filled with the sensor pose corresponding to the next image. Iff a next image is found </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_sec</td><td>maximum duration to block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">check_rate</td><td>Check for a new image on this frequency. In case =0, set to 10 Hz </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether or not a next image was available within the timeout duration. </dd></dl>

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00052">52</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<a id="a73fff6ba9aac1138261c74f2a4efd135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73fff6ba9aac1138261c74f2a4efd135">&#9670;&nbsp;</a></span>waitForRecentImage() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rgbd::ImageBuffer::waitForRecentImage </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>timeout_sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>timeout_tries</em> = <code>25u</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks until a new image with transform is found. Returns false if no image or TF could be found within 'timeout_sec' seconds. But will always give it one try, both to get the image and to get TF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">image</td><td>rgbd image to write the next image to. Iff a next image is found </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sensor_pose</td><td>will be filled with the sensor pose corresponding to the next image. Iff a next image is found </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_sec</td><td>maximum duration to block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in,opt]</td><td>timeout_tries number of tries to check for a new image. In case =0, set to 25 tries </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether or not a next image was available within the timeout duration. </dd></dl>

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00124">124</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<a id="ac5c13e98fbeb51095d923d3007a589f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5c13e98fbeb51095d923d3007a589f8">&#9670;&nbsp;</a></span>workerThreadFunc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rgbd::ImageBuffer::workerThreadFunc </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>frequency</em> = <code>20</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calls <a class="el" href="classrgbd_1_1ImageBuffer.html#adaa29c0bf5f276d42cf636a1b30c5331" title="Iterates over the buffer and tries to get TF for the most recent image. Deletes image and all older i...">ImageBuffer::getMostRecentImageTF</a> on the specified frequency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frequency</td><td>Frequency for checking new images. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="image__buffer_8cpp_source.html#l00250">250</a> of file <a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6f9617d602988db55378105541a2f349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f9617d602988db55378105541a2f349">&#9670;&nbsp;</a></span>cb_queue_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ros::CallbackQueue rgbd::ImageBuffer::cb_queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00092">92</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="a57d5343909f01cbbb86f6eeea444c744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57d5343909f01cbbb86f6eeea444c744">&#9670;&nbsp;</a></span>image_buffer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/forward_list.html">std::forward_list</a>&lt;<a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a>&gt; rgbd::ImageBuffer::image_buffer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Newer images should be pushed on the front. This will result in the front being the most recent and the back being the oldest. </p>

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00090">90</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="a9c776f137e740138be93cdf4380e9bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c776f137e740138be93cdf4380e9bf2">&#9670;&nbsp;</a></span>recent_image_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt;<a class="elRef" href="../../rgbd/html/namespacergbd.html#a11f6d8b65b491dba632371e8355a99df">rgbd::ImageConstPtr</a>, <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a>&gt; rgbd::ImageBuffer::recent_image_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00094">94</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="a1e1a1840af63ff0533c95026f0b65900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e1a1840af63ff0533c95026f0b65900">&#9670;&nbsp;</a></span>recent_image_mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/thread/mutex.html">std::mutex</a> rgbd::ImageBuffer::recent_image_mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For protecting <a class="el" href="classrgbd_1_1ImageBuffer.html#a9c776f137e740138be93cdf4380e9bf2">ImageBuffer::recent_image_</a>. </p>

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00098">98</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="a9cbf41f01986ec9397714cebb64f454f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cbf41f01986ec9397714cebb64f454f">&#9670;&nbsp;</a></span>rgbd_client_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt;<a class="elRef" href="../../rgbd/html/classrgbd_1_1Client.html">rgbd::Client</a>&gt; rgbd::ImageBuffer::rgbd_client_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00082">82</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="a48a9aafee372e0d80269420e415eaeb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48a9aafee372e0d80269420e415eaeb4">&#9670;&nbsp;</a></span>root_frame_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> rgbd::ImageBuffer::root_frame_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00080">80</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="aa585409de6fb2e9c3ace6dc5c93c1818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa585409de6fb2e9c3ace6dc5c93c1818">&#9670;&nbsp;</a></span>shutdown_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rgbd::ImageBuffer::shutdown_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00100">100</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="a7c97af830778f38a09c1c594fb2b81a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c97af830778f38a09c1c594fb2b81a4">&#9670;&nbsp;</a></span>tf_buffer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tf2_ros::Buffer rgbd::ImageBuffer::tf_buffer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00084">84</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="abde126b740beed96f98c4c82dc3948fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abde126b740beed96f98c4c82dc3948fb">&#9670;&nbsp;</a></span>tf_listener_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt;tf2_ros::TransformListener&gt; rgbd::ImageBuffer::tf_listener_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00085">85</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<a id="a99726f483025ce4ccf493304c2c4cbe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99726f483025ce4ccf493304c2c4cbe3">&#9670;&nbsp;</a></span>worker_thread_ptr_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt;<a class="elRef" href="https://en.cppreference.com/w/cpp/thread/thread.html">std::thread</a>&gt; rgbd::ImageBuffer::worker_thread_ptr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="image__buffer_8h_source.html#l00099">99</a> of file <a class="el" href="image__buffer_8h_source.html">image_buffer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="image__buffer_8h_source.html">image_buffer.h</a></li>
<li><a class="el" href="image__buffer_8cpp_source.html">image_buffer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 2 2025 04:47:16 for rgbd_image_buffer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
