<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ed_sensor_integration: Fitter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ed_sensor_integration
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classFitter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Fitter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> class contains the algorithm to do the 2D fit of an entity.  
 <a href="classFitter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="fitter_8h_source.html">fitter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad82d546290a8d0fa8ba2091a7139325e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#ad82d546290a8d0fa8ba2091a7139325e">configureBeamModel</a> (const image_geometry::PinholeCameraModel &amp;cammodel)</td></tr>
<tr class="memdesc:ad82d546290a8d0fa8ba2091a7139325e"><td class="mdescLeft">&#160;</td><td class="mdescRight">configure the beam model (nr of data points and focal length) according to the camera you are using.  <a href="classFitter.html#ad82d546290a8d0fa8ba2091a7139325e">More...</a><br /></td></tr>
<tr class="separator:ad82d546290a8d0fa8ba2091a7139325e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cbcf2ef11c711eb5bc3cb01e00f9d9b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a3cbcf2ef11c711eb5bc3cb01e00f9d9b">estimateEntityPose</a> (const <a class="el" href="structFitterData.html">FitterData</a> &amp;data, const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;world, const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;id, const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;expected_pose, <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;fitted_pose, double max_yaw_change=M_PI) const</td></tr>
<tr class="memdesc:a3cbcf2ef11c711eb5bc3cb01e00f9d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">estimateEntityPose performs the entity pose estimation. Basically, tries to call estimateEntityPoseImp and return the results, catches any FitterErrors and returns false  <a href="classFitter.html#a3cbcf2ef11c711eb5bc3cb01e00f9d9b">More...</a><br /></td></tr>
<tr class="separator:a3cbcf2ef11c711eb5bc3cb01e00f9d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb857b873cba9ba6507d81a6464c9bca"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classOptimalFit.html">OptimalFit</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#acb857b873cba9ba6507d81a6464c9bca">findOptimum</a> (const <a class="el" href="structEstimationInputData.html">EstimationInputData</a> &amp;input_data, const <a class="el" href="structYawRange.html">YawRange</a> &amp;yaw_range) const</td></tr>
<tr class="memdesc:acb857b873cba9ba6507d81a6464c9bca"><td class="mdescLeft">&#160;</td><td class="mdescRight">findOptimum finds the 'optimal' fit by evaluating candidates over all beams and over the entire yaw range.  <a href="classFitter.html#acb857b873cba9ba6507d81a6464c9bca">More...</a><br /></td></tr>
<tr class="separator:acb857b873cba9ba6507d81a6464c9bca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e2708d2341a9841aed9695efc0383a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a1e2708d2341a9841aed9695efc0383a8">Fitter</a> ()</td></tr>
<tr class="memdesc:a1e2708d2341a9841aed9695efc0383a8"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> default constructor, must be configured later.  <a href="classFitter.html#a1e2708d2341a9841aed9695efc0383a8">More...</a><br /></td></tr>
<tr class="separator:a1e2708d2341a9841aed9695efc0383a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab851ff6a1c222fcd4053d77a65bd714a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#ab851ff6a1c222fcd4053d77a65bd714a">Fitter</a> (const image_geometry::PinholeCameraModel &amp;cammodel)</td></tr>
<tr class="memdesc:ab851ff6a1c222fcd4053d77a65bd714a"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> constructor.  <a href="classFitter.html#ab851ff6a1c222fcd4053d77a65bd714a">More...</a><br /></td></tr>
<tr class="separator:ab851ff6a1c222fcd4053d77a65bd714a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e3399b738a39f2eba9dc9f0cd42237"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#ab1e3399b738a39f2eba9dc9f0cd42237">Fitter</a> (unsigned int nr_data_points, float fx)</td></tr>
<tr class="memdesc:ab1e3399b738a39f2eba9dc9f0cd42237"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> constructor.  <a href="classFitter.html#ab1e3399b738a39f2eba9dc9f0cd42237">More...</a><br /></td></tr>
<tr class="separator:ab1e3399b738a39f2eba9dc9f0cd42237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9587019b45ed8caaf1a308fe7dee3d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structEntityRepresentation2D.html">EntityRepresentation2D</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a5e9587019b45ed8caaf1a308fe7dee3d">GetOrCreateEntity2D</a> (const <a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a> &amp;e) const</td></tr>
<tr class="memdesc:a5e9587019b45ed8caaf1a308fe7dee3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">GetOrCreateEntity2D returns the downprojected shape of the entity. If it's already in the cache, it's returned directly. If not, it's obtained from the entity.  <a href="classFitter.html#a5e9587019b45ed8caaf1a308fe7dee3d">More...</a><br /></td></tr>
<tr class="separator:a5e9587019b45ed8caaf1a308fe7dee3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8768e4805b73d86dcc476dec4504d01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#ae8768e4805b73d86dcc476dec4504d01">isConfigured</a> ()</td></tr>
<tr class="separator:ae8768e4805b73d86dcc476dec4504d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd85e00f88582fbb5fea699840b88a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a8dd85e00f88582fbb5fea699840b88a3">processSensorData</a> (const <a class="elRef" href="../../rgbd/html/classrgbd_1_1Image.html">rgbd::Image</a> &amp;<a class="elRef" href="../../ed/html/view__model_8cpp.html#aca3006a770e0e39a4c80202325df25ed">image</a>, const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;sensor_pose, <a class="el" href="structFitterData.html">FitterData</a> &amp;data) const</td></tr>
<tr class="memdesc:a8dd85e00f88582fbb5fea699840b88a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">processSensorData pre-processes sensor data, i.e., performs a downprojection of the input depth image based on the provided sensor pose and stores the result in the <a class="el" href="structFitterData.html" title="The FitterData struct contains the downprojected (hence 2D) sensor readings as well as the sensor pos...">FitterData</a> struct  <a href="classFitter.html#a8dd85e00f88582fbb5fea699840b88a3">More...</a><br /></td></tr>
<tr class="separator:a8dd85e00f88582fbb5fea699840b88a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f2b09e42fd66fa7f3a8322184f4af2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a79f2b09e42fd66fa7f3a8322184f4af2">~Fitter</a> ()</td></tr>
<tr class="separator:a79f2b09e42fd66fa7f3a8322184f4af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afa6d4aaf9d75dc661f516f988fd81430"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#afa6d4aaf9d75dc661f516f988fd81430">checkExpectedBeamThroughEntity</a> (const <a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; double &gt; &amp;model_ranges, <a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a> entity, const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;sensor_pose_xya, const int expected_center_beam) const</td></tr>
<tr class="memdesc:afa6d4aaf9d75dc661f516f988fd81430"><td class="mdescLeft">&#160;</td><td class="mdescRight">checkExpectedBeamThroughEntity checks if the expected center beam passes through the entity. If not: throw a fitter error  <a href="classFitter.html#afa6d4aaf9d75dc661f516f988fd81430">More...</a><br /></td></tr>
<tr class="separator:afa6d4aaf9d75dc661f516f988fd81430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e087fff26440ceef6dc0f53575dc6e5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a1e087fff26440ceef6dc0f53575dc6e5">estimateEntityPoseImp</a> (const <a class="el" href="structFitterData.html">FitterData</a> &amp;data, const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;world, const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;id, const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;expected_pose, <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;fitted_pose, double max_yaw_change) const</td></tr>
<tr class="memdesc:a1e087fff26440ceef6dc0f53575dc6e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">estimateEntityPoseImp actual implementation of the entity pose estimation. Preprocess input data iterates over all beams and the yaw range to compuate the best fit. Finally, a correction of the sensor pose is computed and the result is transformed back to 3D  <a href="classFitter.html#a1e087fff26440ceef6dc0f53575dc6e5">More...</a><br /></td></tr>
<tr class="separator:a1e087fff26440ceef6dc0f53575dc6e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a11923d654ca91b8e7bb45b40f0172e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a9a11923d654ca91b8e7bb45b40f0172e">evaluateCandidate</a> (const <a class="el" href="structEstimationInputData.html">EstimationInputData</a> &amp;static_data, <a class="el" href="classCandidate.html">Candidate</a> &amp;candidate) const</td></tr>
<tr class="memdesc:a9a11923d654ca91b8e7bb45b40f0172e"><td class="mdescLeft">&#160;</td><td class="mdescRight">evaluateCandidate renders the model, transform the model along the beam direction to get this distance right and render once again  <a href="classFitter.html#a9a11923d654ca91b8e7bb45b40f0172e">More...</a><br /></td></tr>
<tr class="separator:a9a11923d654ca91b8e7bb45b40f0172e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2adce958a648f34b06e2ddc816e7ead"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fitter_8h.html#a896ceca009294b6c6ed9af103a3edee7">Shape2D</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#af2adce958a648f34b06e2ddc816e7ead">get2DShape</a> (<a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a> entity_ptr) const</td></tr>
<tr class="memdesc:af2adce958a648f34b06e2ddc816e7ead"><td class="mdescLeft">&#160;</td><td class="mdescRight">get2DShape gets the downprojected, 2D shape from an entity  <a href="classFitter.html#af2adce958a648f34b06e2ddc816e7ead">More...</a><br /></td></tr>
<tr class="separator:af2adce958a648f34b06e2ddc816e7ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cbf48062d3af6d55fde3a0c01aaea65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structEstimationInputData.html">EstimationInputData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a4cbf48062d3af6d55fde3a0c01aaea65">preProcessInputData</a> (const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;world, const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;id, const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;expected_pose, const <a class="el" href="structFitterData.html">FitterData</a> &amp;data) const</td></tr>
<tr class="memdesc:a4cbf48062d3af6d55fde3a0c01aaea65"><td class="mdescLeft">&#160;</td><td class="mdescRight">preProcessInputData pre-processes the inputs for the fitting algorithm, i.e., gets the shape of the entity, compute its center, transform the shape to (0, 0), and compute the expected center beam. Everything is stored in a struct that can be used (const) throughout the rest of the algorithm  <a href="classFitter.html#a4cbf48062d3af6d55fde3a0c01aaea65">More...</a><br /></td></tr>
<tr class="separator:a4cbf48062d3af6d55fde3a0c01aaea65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3befefdb0da539edf71f53c97feef82b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a3befefdb0da539edf71f53c97feef82b">renderEntity</a> (const <a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a> &amp;e, const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;sensor_pose_xya, int identifier, <a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; double &gt; &amp;model_ranges, <a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; int &gt; &amp;identifiers) const</td></tr>
<tr class="memdesc:a3befefdb0da539edf71f53c97feef82b"><td class="mdescLeft">&#160;</td><td class="mdescRight">renderEntity renders the entity in 2D using the beam model with the provided (2D) sensor pose. The ranges of the simulated measurement are stored in 'model ranges' and the 'identifier' is stored in the 'identifiers' vector in order to be able to distinguish multiple entity shapes.  <a href="classFitter.html#a3befefdb0da539edf71f53c97feef82b">More...</a><br /></td></tr>
<tr class="separator:a3befefdb0da539edf71f53c97feef82b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039c4fc049ed0431886fb643b4cf0918"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a039c4fc049ed0431886fb643b4cf0918">renderWorldModel2D</a> (const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;world, const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;sensor_pose_xya, const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;skip_id, <a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; double &gt; &amp;model_ranges, <a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; int &gt; &amp;identifiers) const</td></tr>
<tr class="memdesc:a039c4fc049ed0431886fb643b4cf0918"><td class="mdescLeft">&#160;</td><td class="mdescRight">renderWorldModel2D renders all world model entities  <a href="classFitter.html#a039c4fc049ed0431886fb643b4cf0918">More...</a><br /></td></tr>
<tr class="separator:a039c4fc049ed0431886fb643b4cf0918"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:afed8610d9dfda5529c16d9573915b1ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBeamModel.html">BeamModel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#afed8610d9dfda5529c16d9573915b1ed">beam_model_</a></td></tr>
<tr class="separator:afed8610d9dfda5529c16d9573915b1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65065d42b6e060c7ac2e287ed4ee524f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a65065d42b6e060c7ac2e287ed4ee524f">configured_</a> = false</td></tr>
<tr class="separator:a65065d42b6e060c7ac2e287ed4ee524f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a46f221f5b20a6b2a2a44cbe46c938b"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/map.html">std::map</a>&lt; <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a>, <a class="el" href="structEntityRepresentation2D.html">EntityRepresentation2D</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a8a46f221f5b20a6b2a2a44cbe46c938b">entity_shapes_</a></td></tr>
<tr class="separator:a8a46f221f5b20a6b2a2a44cbe46c938b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109c58459f22239b805d9f8f2e952f70"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../ed/html/classed_1_1models_1_1ModelLoader.html">ed::models::ModelLoader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a109c58459f22239b805d9f8f2e952f70">model_loader_</a></td></tr>
<tr class="separator:a109c58459f22239b805d9f8f2e952f70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c288eea72aba4a9ae58ec2541e443ef"><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFitter.html#a2c288eea72aba4a9ae58ec2541e443ef">nr_data_points_</a></td></tr>
<tr class="separator:a2c288eea72aba4a9ae58ec2541e443ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> class contains the algorithm to do the 2D fit of an entity. </p>

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00100">100</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1e2708d2341a9841aed9695efc0383a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e2708d2341a9841aed9695efc0383a8">&#9670;&nbsp;</a></span>Fitter() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Fitter::Fitter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> default constructor, must be configured later. </p>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00235">235</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="ab1e3399b738a39f2eba9dc9f0cd42237"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e3399b738a39f2eba9dc9f0cd42237">&#9670;&nbsp;</a></span>Fitter() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Fitter::Fitter </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nr_data_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>fx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nr_data_points</td><td>Number of data points for the beam model </td></tr>
    <tr><td class="paramname">fx</td><td>focal length for the beam model </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00242">242</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="ab851ff6a1c222fcd4053d77a65bd714a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab851ff6a1c222fcd4053d77a65bd714a">&#9670;&nbsp;</a></span>Fitter() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Fitter::Fitter </td>
          <td>(</td>
          <td class="paramtype">const image_geometry::PinholeCameraModel &amp;&#160;</td>
          <td class="paramname"><em>cammodel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classFitter.html" title="The Fitter class contains the algorithm to do the 2D fit of an entity.">Fitter</a> constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cammodel</td><td>Cameramodel used to configure the fitter </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00121">121</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>

</div>
</div>
<a id="a79f2b09e42fd66fa7f3a8322184f4af2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79f2b09e42fd66fa7f3a8322184f4af2">&#9670;&nbsp;</a></span>~Fitter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Fitter::~Fitter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00252">252</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afa6d4aaf9d75dc661f516f988fd81430"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa6d4aaf9d75dc661f516f988fd81430">&#9670;&nbsp;</a></span>checkExpectedBeamThroughEntity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fitter::checkExpectedBeamThroughEntity </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>model_ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a>&#160;</td>
          <td class="paramname"><em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_pose_xya</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>expected_center_beam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>checkExpectedBeamThroughEntity checks if the expected center beam passes through the entity. If not: throw a fitter error </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model_ranges</td><td></td></tr>
    <tr><td class="paramname">entity</td><td></td></tr>
    <tr><td class="paramname">sensor_pose_xya</td><td></td></tr>
    <tr><td class="paramname">expected_center_beam</td><td>expected index of the beam through the center of the object. range: any int. indices outside bounds will also throw an error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00458">458</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="ad82d546290a8d0fa8ba2091a7139325e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad82d546290a8d0fa8ba2091a7139325e">&#9670;&nbsp;</a></span>configureBeamModel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fitter::configureBeamModel </td>
          <td>(</td>
          <td class="paramtype">const image_geometry::PinholeCameraModel &amp;&#160;</td>
          <td class="paramname"><em>cammodel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>configure the beam model (nr of data points and focal length) according to the camera you are using. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cammodel</td><td>camera model </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00475">475</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="a3cbcf2ef11c711eb5bc3cb01e00f9d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cbcf2ef11c711eb5bc3cb01e00f9d9b">&#9670;&nbsp;</a></span>estimateEntityPose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Fitter::estimateEntityPose </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structFitterData.html">FitterData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;&#160;</td>
          <td class="paramname"><em>world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>expected_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>fitted_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_yaw_change</em> = <code>M_PI</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>estimateEntityPose performs the entity pose estimation. Basically, tries to call estimateEntityPoseImp and return the results, catches any FitterErrors and returns false </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>pre-processed sensor data </td></tr>
    <tr><td class="paramname">world</td><td>world model </td></tr>
    <tr><td class="paramname">id</td><td>id of the entity we're trying to fit </td></tr>
    <tr><td class="paramname">expected_pose</td><td>pose where the entity is expected </td></tr>
    <tr><td class="paramname">fitted_pose</td><td>the fitted pose is stored here </td></tr>
    <tr><td class="paramname">max_yaw_change</td><td>maximum allowed yaw rotation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success or failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00258">258</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="a1e087fff26440ceef6dc0f53575dc6e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e087fff26440ceef6dc0f53575dc6e5">&#9670;&nbsp;</a></span>estimateEntityPoseImp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Fitter::estimateEntityPoseImp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structFitterData.html">FitterData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;&#160;</td>
          <td class="paramname"><em>world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>expected_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>fitted_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_yaw_change</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>estimateEntityPoseImp actual implementation of the entity pose estimation. Preprocess input data iterates over all beams and the yaw range to compuate the best fit. Finally, a correction of the sensor pose is computed and the result is transformed back to 3D </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>pre-processed sensor data </td></tr>
    <tr><td class="paramname">world</td><td>world model </td></tr>
    <tr><td class="paramname">id</td><td>id of the entity we're trying to fit </td></tr>
    <tr><td class="paramname">expected_pose</td><td>pose where the entity is expected </td></tr>
    <tr><td class="paramname">fitted_pose</td><td>the fitted pose is stored here </td></tr>
    <tr><td class="paramname">max_yaw_change</td><td>maximum allowed yaw rotation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success or failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00274">274</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="a9a11923d654ca91b8e7bb45b40f0172e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a11923d654ca91b8e7bb45b40f0172e">&#9670;&nbsp;</a></span>evaluateCandidate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Fitter::evaluateCandidate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structEstimationInputData.html">EstimationInputData</a> &amp;&#160;</td>
          <td class="paramname"><em>static_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCandidate.html">Candidate</a> &amp;&#160;</td>
          <td class="paramname"><em>candidate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>evaluateCandidate renders the model, transform the model along the beam direction to get this distance right and render once again </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">static_data</td><td>'static' input data that was the result from the pre-processing </td></tr>
    <tr><td class="paramname">candidate</td><td>contains the 'candidate' beam index and yaw that is evaluated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00388">388</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="acb857b873cba9ba6507d81a6464c9bca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb857b873cba9ba6507d81a6464c9bca">&#9670;&nbsp;</a></span>findOptimum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classOptimalFit.html">OptimalFit</a> &gt; Fitter::findOptimum </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structEstimationInputData.html">EstimationInputData</a> &amp;&#160;</td>
          <td class="paramname"><em>input_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structYawRange.html">YawRange</a> &amp;&#160;</td>
          <td class="paramname"><em>yaw_range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>findOptimum finds the 'optimal' fit by evaluating candidates over all beams and over the entire yaw range. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input_data</td><td><a class="el" href="structEstimationInputData.html" title="The EstimationInputData struct contains processed data from the world model (entity,...">EstimationInputData</a>: everything that's required </td></tr>
    <tr><td class="paramname">yaw_range</td><td>min and max yaw range to sample over </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the optimum </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00347">347</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="af2adce958a648f34b06e2ddc816e7ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2adce958a648f34b06e2ddc816e7ead">&#9670;&nbsp;</a></span>get2DShape()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fitter_8h.html#a896ceca009294b6c6ed9af103a3edee7">Shape2D</a> Fitter::get2DShape </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a>&#160;</td>
          <td class="paramname"><em>entity_ptr</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get2DShape gets the downprojected, 2D shape from an entity </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entity_ptr</td><td>points to the entity </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the computed shape </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00417">417</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="a5e9587019b45ed8caaf1a308fe7dee3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9587019b45ed8caaf1a308fe7dee3d">&#9670;&nbsp;</a></span>GetOrCreateEntity2D()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structEntityRepresentation2D.html">EntityRepresentation2D</a> Fitter::GetOrCreateEntity2D </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GetOrCreateEntity2D returns the downprojected shape of the entity. If it's already in the cache, it's returned directly. If not, it's obtained from the entity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>input entity </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>2D entity representation </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00528">528</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="ae8768e4805b73d86dcc476dec4504d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8768e4805b73d86dcc476dec4504d01">&#9670;&nbsp;</a></span>isConfigured()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Fitter::isConfigured </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00125">125</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>

</div>
</div>
<a id="a4cbf48062d3af6d55fde3a0c01aaea65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cbf48062d3af6d55fde3a0c01aaea65">&#9670;&nbsp;</a></span>preProcessInputData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structEstimationInputData.html">EstimationInputData</a> Fitter::preProcessInputData </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;&#160;</td>
          <td class="paramname"><em>world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>expected_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structFitterData.html">FitterData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>preProcessInputData pre-processes the inputs for the fitting algorithm, i.e., gets the shape of the entity, compute its center, transform the shape to (0, 0), and compute the expected center beam. Everything is stored in a struct that can be used (const) throughout the rest of the algorithm </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">world</td><td>world model </td></tr>
    <tr><td class="paramname">id</td><td>id of the entity to fit </td></tr>
    <tr><td class="paramname">expected_pose</td><td>expected pose of the entity </td></tr>
    <tr><td class="paramname">data</td><td>input sensor data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structEstimationInputData.html" title="The EstimationInputData struct contains processed data from the world model (entity,...">EstimationInputData</a> used throughout the rest of the algorithm </dd></dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00307">307</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="a8dd85e00f88582fbb5fea699840b88a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dd85e00f88582fbb5fea699840b88a3">&#9670;&nbsp;</a></span>processSensorData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fitter::processSensorData </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="../../rgbd/html/classrgbd_1_1Image.html">rgbd::Image</a> &amp;&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFitterData.html">FitterData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>processSensorData pre-processes sensor data, i.e., performs a downprojection of the input depth image based on the provided sensor pose and stores the result in the <a class="el" href="structFitterData.html" title="The FitterData struct contains the downprojected (hence 2D) sensor readings as well as the sensor pos...">FitterData</a> struct </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>input (depth) image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sensor_pose</td><td>pose of the sensor in the world while taking the image </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>processed data is stored here </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00486">486</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="a3befefdb0da539edf71f53c97feef82b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3befefdb0da539edf71f53c97feef82b">&#9670;&nbsp;</a></span>renderEntity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fitter::renderEntity </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/namespaceed.html#ac65887f1813a584fb493e0a93b80d277">ed::EntityConstPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_pose_xya</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>identifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>model_ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>identifiers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>renderEntity renders the entity in 2D using the beam model with the provided (2D) sensor pose. The ranges of the simulated measurement are stored in 'model ranges' and the 'identifier' is stored in the 'identifiers' vector in order to be able to distinguish multiple entity shapes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>entity to render </td></tr>
    <tr><td class="paramname">sensor_pose_xya</td><td>2D sensor pose (i.e., only x, y and yaw are used) </td></tr>
    <tr><td class="paramname">identifier</td><td></td></tr>
    <tr><td class="paramname">model_ranges</td><td></td></tr>
    <tr><td class="paramname">identifiers</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00548">548</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<a id="a039c4fc049ed0431886fb643b4cf0918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039c4fc049ed0431886fb643b4cf0918">&#9670;&nbsp;</a></span>renderWorldModel2D()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fitter::renderWorldModel2D </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1WorldModel.html">ed::WorldModel</a> &amp;&#160;</td>
          <td class="paramname"><em>world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../geolib2/html/namespacegeo.html#a6c851aec5e98801c86d46d508de5c05d">geo::Pose3D</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_pose_xya</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a> &amp;&#160;</td>
          <td class="paramname"><em>skip_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>model_ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>identifiers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>renderWorldModel2D renders all world model entities </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">world</td><td>world model </td></tr>
    <tr><td class="paramname">sensor_pose_xya</td><td>sensor pose </td></tr>
    <tr><td class="paramname">skip_id</td><td>id to skip (so we don't render the entity we're fitting </td></tr>
    <tr><td class="paramname">model_ranges</td><td>data is stored here </td></tr>
    <tr><td class="paramname">identifiers</td><td>to distinguish which 'range' belongs to which entity. In this case, -1 will be used as an identifier </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fitter_8cpp_source.html#l00431">431</a> of file <a class="el" href="fitter_8cpp_source.html">fitter.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="afed8610d9dfda5529c16d9573915b1ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed8610d9dfda5529c16d9573915b1ed">&#9670;&nbsp;</a></span>beam_model_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBeamModel.html">BeamModel</a> Fitter::beam_model_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00255">255</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>

</div>
</div>
<a id="a65065d42b6e060c7ac2e287ed4ee524f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65065d42b6e060c7ac2e287ed4ee524f">&#9670;&nbsp;</a></span>configured_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Fitter::configured_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00264">264</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>

</div>
</div>
<a id="a8a46f221f5b20a6b2a2a44cbe46c938b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a46f221f5b20a6b2a2a44cbe46c938b">&#9670;&nbsp;</a></span>entity_shapes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://en.cppreference.com/w/cpp/container/map.html">std::map</a>&lt;<a class="elRef" href="../../ed/html/classed_1_1UUID.html">ed::UUID</a>, <a class="el" href="structEntityRepresentation2D.html">EntityRepresentation2D</a>&gt; Fitter::entity_shapes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00258">258</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>

</div>
</div>
<a id="a109c58459f22239b805d9f8f2e952f70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a109c58459f22239b805d9f8f2e952f70">&#9670;&nbsp;</a></span>model_loader_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../ed/html/classed_1_1models_1_1ModelLoader.html">ed::models::ModelLoader</a> Fitter::model_loader_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00261">261</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>

</div>
</div>
<a id="a2c288eea72aba4a9ae58ec2541e443ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c288eea72aba4a9ae58ec2541e443ef">&#9670;&nbsp;</a></span>nr_data_points_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint Fitter::nr_data_points_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fitter_8h_source.html#l00263">263</a> of file <a class="el" href="fitter_8h_source.html">fitter.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="fitter_8h_source.html">fitter.h</a></li>
<li><a class="el" href="fitter_8cpp_source.html">fitter.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 2 2025 04:47:33 for ed_sensor_integration by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
