<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="near__object__designator_8py" kind="file" language="Python">
    <compoundname>near_object_designator.py</compoundname>
    <innerclass refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator" prot="public">challenge_storing_groceries::near_object_designator::NearObjectSpotDesignator</innerclass>
    <innernamespace refid="namespacechallenge__storing__groceries_1_1near__object__designator">challenge_storing_groceries::near_object_designator</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacechallenge__storing__groceries_1_1near__object__designator" refkind="compound"><highlight class="comment">#<sp/>System</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>rospy</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>math</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>arange</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">#<sp/>ROS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>visualization_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>MarkerArray,<sp/>Marker</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">#<sp/>TUe<sp/>robotics</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>pykdl_ros<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>FrameStamped,<sp/>VectorStamped</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>robot_smach_states.util.designators.ed_designators<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Designator</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator" kindref="compound">NearObjectSpotDesignator</ref>(Designator):</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Designates<sp/>an<sp/>empty<sp/>spot<sp/>near<sp/>another<sp/>object.</highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>It<sp/>does<sp/>this<sp/>by<sp/>querying<sp/>ED<sp/>for<sp/>entities<sp/>that<sp/>occupy<sp/>some<sp/>space.</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>the<sp/>result<sp/>is<sp/>no<sp/>entities,<sp/>then<sp/>we<sp/>found<sp/>an<sp/>open<sp/>spot.</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a4d40431c640704d6345014631b9335c0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a4d40431c640704d6345014631b9335c0" kindref="member">__init__</ref>(self,<sp/>robot,<sp/>near_entity_designator,<sp/>supporting_entity_designator,<sp/>name=None):</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Designate<sp/>an<sp/>empty<sp/>spot<sp/>(as<sp/>PoseStamped)<sp/>on<sp/>some<sp/>designated<sp/>entity</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>robot:<sp/>Robot<sp/>whose<sp/>worldmodel<sp/>to<sp/>use</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>near_entity_designator:<sp/>Designator<sp/>resolving<sp/>to<sp/>an<sp/>Entity,<sp/>e.g.<sp/>EntityByIdDesignator</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>supporting_entity_designator:<sp/>Designator<sp/>resolving<sp/>to<sp/>an<sp/>Entity</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>name:<sp/>name<sp/>for<sp/>introspection<sp/>purposes</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super(NearObjectSpotDesignator,<sp/>self).<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a4d40431c640704d6345014631b9335c0" kindref="member">__init__</ref>(resolve_type=FrameStamped,<sp/>name=name)</highlight></codeline>
<codeline lineno="29" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1af93100954858f9f1467b66886b1b7eca" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1af93100954858f9f1467b66886b1b7eca" kindref="member">robot</ref><sp/>=<sp/>robot</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a97ffa7fb91414db780e35794955fe11d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a97ffa7fb91414db780e35794955fe11d" kindref="member">near_entity_designator</ref><sp/>=<sp/>near_entity_designator</highlight></codeline>
<codeline lineno="32" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a047793286322db34d96e846224189fd4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a047793286322db34d96e846224189fd4" kindref="member">supporting_entity_designator</ref><sp/>=<sp/>supporting_entity_designator</highlight></codeline>
<codeline lineno="33" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a1ead17228a62aa320247a06ab1eadad0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a1ead17228a62aa320247a06ab1eadad0" kindref="member">_edge_distance</ref><sp/>=<sp/>0.05<sp/><sp/></highlight><highlight class="comment">#<sp/>Distance<sp/>to<sp/>table<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a88d788ceb2068addaca7088cb1b88c05" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a88d788ceb2068addaca7088cb1b88c05" kindref="member">_spacing</ref><sp/>=<sp/>0.05</highlight></codeline>
<codeline lineno="35" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a87bf4a3e54eed23aebc5593d4f961c28" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a87bf4a3e54eed23aebc5593d4f961c28" kindref="member">_radius</ref><sp/>=<sp/>0.2<sp/><sp/></highlight><highlight class="comment">#<sp/>desired<sp/>distance<sp/>between<sp/>near_entity<sp/>and<sp/>the<sp/>place<sp/>pose</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a1996590f67bcc45c5499cf084844a4a3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a1996590f67bcc45c5499cf084844a4a3" kindref="member">marker_pub</ref><sp/>=<sp/>rospy.Publisher(</highlight><highlight class="stringliteral">&apos;/empty_spots&apos;</highlight><highlight class="normal">,<sp/>MarkerArray,<sp/>queue_size=1)</highlight></codeline>
<codeline lineno="38" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a475f02fcc0e71ae3c971908824f03c3d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a475f02fcc0e71ae3c971908824f03c3d" kindref="member">marker_array</ref><sp/>=<sp/>MarkerArray()</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ae526767bd01fa2067550f9bb727a90d3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ae526767bd01fa2067550f9bb727a90d3" kindref="member">_resolve</ref>(self):</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="42"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:return:<sp/>Where<sp/>can<sp/>an<sp/>object<sp/>be<sp/>placed</highlight></codeline>
<codeline lineno="43"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:returns:<sp/>FrameStamped</highlight></codeline>
<codeline lineno="44"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>near_entity<sp/>=<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a97ffa7fb91414db780e35794955fe11d" kindref="member">near_entity_designator</ref>.resolve()</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>supporting_entity<sp/>=<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a047793286322db34d96e846224189fd4" kindref="member">supporting_entity_designator</ref>.resolve()</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#TODO<sp/>derive<sp/>area<sp/>from<sp/>the<sp/>position<sp/>of<sp/>near_entity<sp/>in<sp/>supporting<sp/>entity</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>open_POIs<sp/>=<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ad25b0a9e9daf51245e8208225b58239d" kindref="member">_determine_points_of_interest</ref>(near_entity,<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a87bf4a3e54eed23aebc5593d4f961c28" kindref="member">_radius</ref>,<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a88d788ceb2068addaca7088cb1b88c05" kindref="member">_spacing</ref>)</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>all(isinstance(v,<sp/>FrameStamped)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>v<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>open_POIs)</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>filter<sp/>poi&apos;s<sp/>that<sp/>fall<sp/>outside<sp/>of<sp/>the<sp/>supporting<sp/>surface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#open_POIs<sp/>=<sp/>filter(lambda<sp/>pose:<sp/>self._is_poi_in_area(pose,<sp/>supporting_entity,<sp/>area),<sp/>open_POIs)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>filter<sp/>poi&apos;s<sp/>occupied<sp/>by<sp/>other<sp/>entities</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>open_POIs<sp/>=<sp/>list(filter(</highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>pose:<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a22df9da57c7d1b3738592a222db42d10" kindref="member">_is_poi_unoccupied</ref>(pose,<sp/>supporting_entity),<sp/>open_POIs))</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>open_POIs:</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rospy.logdebug(</highlight><highlight class="stringliteral">&quot;No<sp/>suitable<sp/>place<sp/>position<sp/>found&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a2210344cd046d7d824c423c1408bc827" kindref="member">_create_markers_from_pois</ref>(open_POIs)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>sort<sp/>POI&apos;s<sp/>based<sp/>on<sp/>distance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_pose<sp/>=<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1af93100954858f9f1467b66886b1b7eca" kindref="member">robot</ref>.base.get_location()</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>open_POIs_dist<sp/>=<sp/>[(poi,<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a0dbd7b8aa58e9098a1c242ab6efe836d" kindref="member">_distance_to_poi_area_heuristic</ref>(poi,<sp/>base_pose))<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>poi<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>open_POIs]</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>open_POIs_dist.sort(key=</highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>tup:tup[1])</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>selection<sp/>=<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ad59e9931f6602bd0ac3f3d0d417960e6" kindref="member">_create_selection_marker</ref>(open_POIs_dist[0][0])</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a475f02fcc0e71ae3c971908824f03c3d" kindref="member">marker_array</ref>.markers.append(selection)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a1996590f67bcc45c5499cf084844a4a3" kindref="member">marker_pub</ref>.publish(self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a475f02fcc0e71ae3c971908824f03c3d" kindref="member">marker_array</ref>)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>open_POIs_dist[0][0]</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a22df9da57c7d1b3738592a222db42d10" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a22df9da57c7d1b3738592a222db42d10" kindref="member">_is_poi_unoccupied</ref>(self,<sp/>poi,<sp/>surface_entity):</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="75"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>whether<sp/>or<sp/>not<sp/>the<sp/>poi<sp/>is<sp/>occupied<sp/>by<sp/>another<sp/>entity</highlight></codeline>
<codeline lineno="76"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>poi:<sp/>FrameStamped</highlight></codeline>
<codeline lineno="77"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>surface_entity:<sp/>Entity</highlight></codeline>
<codeline lineno="78"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:return:<sp/>bool</highlight></codeline>
<codeline lineno="79"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>entities_at_poi<sp/>=<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1af93100954858f9f1467b66886b1b7eca" kindref="member">robot</ref>.ed.get_entities(center_point=VectorStamped(poi.frame.p,<sp/>poi.header.stamp,<sp/>poi.header.frame_id),</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>radius=0.05)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>entities_at_poi<sp/>=<sp/>[entity<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>entity<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>entities_at_poi<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>entity.uuid<sp/>!=<sp/>surface_entity.uuid]</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>any(entities_at_poi)</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a755ea9dd4e74a3683c3f59c64eec1709" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a755ea9dd4e74a3683c3f59c64eec1709" kindref="member">_is_poi_in_area</ref>(self,<sp/>poi,<sp/>entity,<sp/>area):</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>whether<sp/>or<sp/>not<sp/>a<sp/>poi<sp/>is<sp/>within<sp/>an<sp/>area</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>poi:<sp/>FrameStamped</highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>entity:<sp/>Entity<sp/>to<sp/>place<sp/>on</highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>area:<sp/>Area<sp/>to<sp/>place<sp/>in</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:return:<sp/>bool</highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>area<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>entity.volumes:</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rospy.logerr_throttle(</highlight><highlight class="stringliteral">&quot;{}<sp/>not<sp/>an<sp/>area<sp/>of<sp/>{}&quot;</highlight><highlight class="normal">.format(area,<sp/>entity.uuid))</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>poi_in_entity_frame<sp/>=<sp/>poi.projectToFrame(entity.frame_id,<sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1af93100954858f9f1467b66886b1b7eca" kindref="member">robot</ref>.tf_listener)</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>entity.in_volume(poi_in_entity_frame.extractVectorStamped(),<sp/>area)</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a0dbd7b8aa58e9098a1c242ab6efe836d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a0dbd7b8aa58e9098a1c242ab6efe836d" kindref="member">_distance_to_poi_area_heuristic</ref>(self,<sp/>frame_stamped,<sp/>base_pose):</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="103"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>frame_stamped:<sp/>FrameStamped</highlight></codeline>
<codeline lineno="104"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>base_pose:<sp/>FrameStamped</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:return:<sp/>direct<sp/>distance<sp/>in<sp/>meters<sp/>between<sp/>a<sp/>point<sp/>and<sp/>the<sp/>robot</highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pose_x<sp/>=<sp/>base_pose.frame.p[0]</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pose_y<sp/>=<sp/>base_pose.frame.p[1]</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>=<sp/>frame_stamped.frame.p.x()</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>=<sp/>frame_stamped.frame.p.y()</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dist<sp/>=<sp/>math.hypot(pose_x<sp/>-<sp/>x,<sp/>pose_y<sp/>-<sp/>y)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>dist</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a2210344cd046d7d824c423c1408bc827" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a2210344cd046d7d824c423c1408bc827" kindref="member">_create_markers_from_pois</ref>(self,<sp/>pois):</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>poi<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>pois:</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a475f02fcc0e71ae3c971908824f03c3d" kindref="member">marker_array</ref>.markers.append(self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a93c9658453419ff08f73f051c485f76a" kindref="member">_create_marker</ref>(poi.frame.p.x(),<sp/>poi.frame.p.y(),<sp/>poi.frame.p.z()))</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a93c9658453419ff08f73f051c485f76a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a93c9658453419ff08f73f051c485f76a" kindref="member">_create_marker</ref>(self,<sp/>x,<sp/>y,<sp/>z):</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker<sp/>=<sp/>Marker()</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.id<sp/>=<sp/>len(self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a475f02fcc0e71ae3c971908824f03c3d" kindref="member">marker_array</ref>.markers)</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.type<sp/>=<sp/>2</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.header.frame_id<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;map&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.header.stamp<sp/>=<sp/>rospy.Time.now()</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.position.x<sp/>=<sp/>x</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.position.y<sp/>=<sp/>y</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.position.z<sp/>=<sp/>z</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.orientation.w<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.scale.x<sp/>=<sp/>0.05</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.scale.y<sp/>=<sp/>0.05</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.scale.z<sp/>=<sp/>0.05</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.color.r<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.color.a<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.lifetime<sp/>=<sp/>rospy.Duration(10.0)</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>marker</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ad59e9931f6602bd0ac3f3d0d417960e6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ad59e9931f6602bd0ac3f3d0d417960e6" kindref="member">_create_selection_marker</ref>(self,<sp/>selected_pose):</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker<sp/>=<sp/>Marker()</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.id<sp/>=<sp/>len(self.<ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a475f02fcc0e71ae3c971908824f03c3d" kindref="member">marker_array</ref>.markers)<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.type<sp/>=<sp/>2</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.header.frame_id<sp/>=<sp/>selected_pose.header.frame_id</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.header.stamp<sp/>=<sp/>rospy.Time.now()</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.position.x<sp/>=<sp/>selected_pose.frame.p.x()</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.position.y<sp/>=<sp/>selected_pose.frame.p.y()</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.position.z<sp/>=<sp/>selected_pose.frame.p.z()</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.pose.orientation.w<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.scale.x<sp/>=<sp/>0.05</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.scale.y<sp/>=<sp/>0.05</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.scale.z<sp/>=<sp/>0.05</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.color.g<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.color.a<sp/>=<sp/>0.7</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker.lifetime<sp/>=<sp/>rospy.Duration(30.0)</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>marker</highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ad25b0a9e9daf51245e8208225b58239d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1ad25b0a9e9daf51245e8208225b58239d" kindref="member">_determine_points_of_interest</ref>(self,<sp/>near_entity,<sp/>radius,<sp/>spacing):</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>near_place<sp/>=<sp/>near_entity.pose.frame.p</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>points<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>a<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>arange(0,<sp/>2*math.pi,<sp/>spacing/radius):</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dx<sp/>=<sp/>radius<sp/>*<sp/>math.cos(a)</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dy<sp/>=<sp/>radius<sp/>*<sp/>math.sin(a)</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fs<sp/>=<sp/>FrameStamped.from_xyz_rpy(x=near_place.x()<sp/>+<sp/>dx,</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y=near_place.y()<sp/>+<sp/>dy,</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>z=near_place.z(),</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>roll=0.0,</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pitch=0.0,</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yaw=0.0,</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stamp=rospy.Time.now(),</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frame_id=</highlight><highlight class="stringliteral">&quot;map&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>points<sp/>+=<sp/>[fs]</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>points</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175" refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a594fa9ffa829669828e60f49cd9a35a8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator_1a594fa9ffa829669828e60f49cd9a35a8" kindref="member">__repr__</ref>(self):</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>f</highlight><highlight class="stringliteral">&quot;NearObjectSpotDesignator(near_object_designator={self.near_entity_designator},<sp/>supporting_entity_designator={self.supporting_entity_designator}<sp/>name=&apos;{self._name}&apos;)&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>__name__<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__main__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>sys</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>robot_skills.get_robot<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_robot</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>robot_smach_states.util.designators<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>EntityByIdDesignator</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(sys.argv)<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(f</highlight><highlight class="stringliteral">&quot;usage:<sp/>python<sp/>{sys.argv[0]}<sp/>ROBOT<sp/>ENTITY_ID<sp/>SHELF_ID&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sys.exit()</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>rospy.init_node(</highlight><highlight class="stringliteral">&apos;test_near_object&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190" refid="namespacechallenge__storing__groceries_1_1near__object__designator_1a54f8626cb935837c9b7a56d3bdbc387a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>robot<sp/>=<sp/>get_robot(sys.argv[1])</highlight></codeline>
<codeline lineno="191" refid="namespacechallenge__storing__groceries_1_1near__object__designator_1a0465ebd82dc8b04f354212caa847196e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>entityDes<sp/>=<sp/>EntityByIdDesignator(robot,<sp/>uuid=sys.argv[2])</highlight></codeline>
<codeline lineno="192" refid="namespacechallenge__storing__groceries_1_1near__object__designator_1aa2768fea64f718850dda5ae22f8f58f4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>shelfDes<sp/>=<sp/>EntityByIdDesignator(robot,<sp/>uuid=sys.argv[3])</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194" refid="namespacechallenge__storing__groceries_1_1near__object__designator_1ace5983f81a7a0d95664eb17e34cb892e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>nearObjectDes<sp/>=<sp/><ref refid="classchallenge__storing__groceries_1_1near__object__designator_1_1NearObjectSpotDesignator" kindref="compound">NearObjectSpotDesignator</ref>(robot,<sp/>entityDes,<sp/>shelfDes)</highlight></codeline>
<codeline lineno="195" refid="namespacechallenge__storing__groceries_1_1near__object__designator_1a393f7180a0805c5036c8f0b3e17561f4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>place_pose<sp/>=<sp/>nearObjectDes.resolve()</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/>rospy.loginfo(f</highlight><highlight class="stringliteral">&quot;Designator<sp/>{nearObjectDes}<sp/>resolves<sp/>to<sp/>{place_pose}&quot;</highlight><highlight class="normal">)</highlight></codeline>
    </programlisting>
    <location file="src/challenge_storing_groceries/near_object_designator.py"/>
  </compounddef>
</doxygen>
